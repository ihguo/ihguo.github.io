<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="KNOW-HOW">
<meta property="og:url" content="http://example.com/page/12/index.html">
<meta property="og:site_name" content="KNOW-HOW">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Guo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/12/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/12/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>KNOW-HOW</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">KNOW-HOW</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Guo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">181</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">151</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/raytroop" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;raytroop" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:raytroop@gmail.com" title="E-Mail → mailto:raytroop@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/06/butter-filter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/06/butter-filter/" class="post-title-link" itemprop="url">Butterworth filter</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-04-06 23:58:11" itemprop="dateCreated datePublished" datetime="2022-04-06T23:58:11+00:00">2022-04-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-14 08:57:43" itemprop="dateModified" datetime="2023-11-14T08:57:43+00:00">2023-11-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/dsp/" itemprop="url" rel="index"><span itemprop="name">dsp</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="butterworth-filter">Butterworth filter</h2>
<blockquote>
<p>function varargout = butter(n, Wn, varargin)</p>
<p>% BUTTER Butterworth digital and analog filter design.</p>
<p>% [B,A] = BUTTER(N,Wn) designs an Nth order lowpass digital</p>
<p>% Butterworth filter and returns the filter coefficients in
length</p>
<p>% N+1 vectors B (numerator) and A (denominator). The coefficients</p>
<p>% are listed in descending powers of z. The cutoff frequency</p>
<p>% Wn must be <strong>0.0 &lt; Wn &lt; 1.0</strong>, with 1.0
corresponding to</p>
<p>% half the sample rate.</p>
</blockquote>
<p><span class="math display">\[
w_n = \frac{f_c}{0.5f_s}
\]</span></p>
<p>where <span class="math inline">\(f_c\)</span> is cutoff frequency,
<span class="math inline">\(f_s\)</span> is sampling frequency</p>
<p><span class="math display">\[
\Phi = \omega T_s \text { ,}\Phi \in [0,2\pi]
\]</span></p>
<p>Find the relationship between <span
class="math inline">\(\omega_n\)</span> and </p>
<p><span class="math display">\[\begin{align}
\Phi &amp;= 2\pi f_c \frac{1}{f_s}  \\
&amp;=\pi \frac{f_c}{0.5f_s} \\
&amp;= \pi \omega _n
\end{align}\]</span></p>
<p>Given <span class="math inline">\(f_c\)</span> is 300 Hz and <span
class="math inline">\(f_s\)</span> is 1000 Hz, we get <span
class="math display">\[
\omega_n = \frac{f_c}{0.5*f_s} = 0.6
\]</span> and in <code>rad/sample</code> unit, cutoff frequency is <span
class="math display">\[
\Phi = \pi * \omega_n = 0.6 \pi \text {, unit: rad/sample}
\]</span></p>
<h3 id="z-transform">Z-transform</h3>
<p><span class="math display">\[
z= e^{-j\Phi}
\]</span></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fc = <span class="number">300</span>;</span><br><span class="line">fs = <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">[b,a] = butter(<span class="number">6</span>,fc/(fs/<span class="number">2</span>));</span><br><span class="line">fprintf(<span class="string">&#x27;The numerator b is:\n &#x27;</span>);</span><br><span class="line">fprintf(<span class="string">&#x27;%g &#x27;</span>, b);</span><br><span class="line">fprintf(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">fprintf(<span class="string">&#x27;The denominator a is:\n &#x27;</span>);</span><br><span class="line">fprintf(<span class="string">&#x27;%g &#x27;</span>, a);</span><br><span class="line">fprintf(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line">freqz(b, a);</span><br><span class="line">ylim([<span class="number">-400</span>, <span class="number">100</span>])</span><br></pre></td></tr></table></figure>
<blockquote>
<p>The numerator (<code>b</code>) and denominator (<code>a</code>)
depend on the cutoff frequency and the order; the cutoff frequency is
denominated with <span class="math inline">\(\omega_n\)</span> . Just
multiply the <span class="math inline">\(\pi\)</span>, we get the
Z-transform <span class="math inline">\(\Phi\)</span> rad/sample, which
is the plot of <code>freqz(b, a)</code></p>
</blockquote>
<p><img src="/2022/04/06/butter-filter/image-20220407100948965.png"
alt="image-20220407100948965" /></p>
<h3 id="transfer-function-with-sample-information">Transfer function
with sample information</h3>
<p><span class="math display">\[
z = e^{-j\omega T_s}
\]</span></p>
<p><img src="/2022/04/06/butter-filter/image-20220407103451265.png"
alt="image-20220407103451265" /></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">figure(<span class="number">2</span>)</span><br><span class="line">ylim([-<span class="number">400</span>, <span class="number">100</span>])</span><br><span class="line">[h,f] = freqz(b,a,[],fs);</span><br><span class="line">hdb20 = <span class="number">20</span>*log10(abs(h));</span><br><span class="line">subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">plot(f, hdb20, &#x27;b&#x27;)</span><br><span class="line">ylim([-<span class="number">400</span>, <span class="number">100</span>])</span><br><span class="line">title(&#x27;DTFT <span class="keyword">with</span> freqz <span class="keyword">and</span> sample rate&#x27;)</span><br><span class="line">xlabel(&#x27;Frequency (Hz)&#x27;)</span><br><span class="line">ylabel(&#x27;Mag (dB)&#x27;)</span><br><span class="line">grid on;</span><br><span class="line"></span><br><span class="line">subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">sys = tf(b, a, <span class="number">1</span>/fs);</span><br><span class="line">[mag, phs, wout] = bode(sys);</span><br><span class="line">wout = wout(:);</span><br><span class="line">whz = wout/<span class="number">2</span>/pi;</span><br><span class="line">hdb = <span class="number">20</span>*log10(mag(:));</span><br><span class="line">plot(whz, hdb, &#x27;r-o&#x27;);</span><br><span class="line">ylim([-<span class="number">400</span>, <span class="number">100</span>])</span><br><span class="line">title(&#x27;DTFT <span class="keyword">with</span> bode <span class="keyword">and</span> sample period&#x27;)</span><br><span class="line">xlabel(&#x27;Frequency (Hz)&#x27;)</span><br><span class="line">ylabel(&#x27;Mag (dB)&#x27;)</span><br><span class="line">grid on;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">3</span>,<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line">plot(f, hdb20,&#x27;b&#x27;, whz, hdb, &#x27;ro&#x27;);</span><br><span class="line">legend(&#x27;freqz&#x27;, &#x27;bode&#x27;)</span><br><span class="line">ylim([-<span class="number">400</span>, <span class="number">100</span>])</span><br><span class="line">title(&#x27;overlay <span class="keyword">and</span> comparision&#x27;)</span><br><span class="line">xlabel(&#x27;Frequency (Hz)&#x27;)</span><br><span class="line">ylabel(&#x27;Mag (dB)&#x27;)</span><br><span class="line">grid on;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="time-domain-from-frequency-domain">Time Domain from Frequency
Domain</h2>
<p>Assume input is <strong>sampled by</strong> <span
class="math inline">\(f_s\)</span></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">figure(<span class="number">3</span>)</span><br><span class="line">% <span class="keyword">assume</span> x is sampled by fs</span><br><span class="line">x = <span class="keyword">rand</span>(<span class="number">1</span>, <span class="number">50</span>);</span><br><span class="line">y = filter(b, a, x);</span><br><span class="line">xt = (<span class="number">1</span>:<span class="number">50</span>);</span><br><span class="line">plot(xt, x, &#x27;-s&#x27;, xt, y, &#x27;-o&#x27;)</span><br><span class="line">legend(&#x27;<span class="keyword">input</span>&#x27;, &#x27;<span class="keyword">output</span>&#x27;)</span><br><span class="line">xlabel(&#x27;Sample&#x27;)</span><br><span class="line">ylabel(&#x27;mag&#x27;)</span><br><span class="line">title(&#x27;filter in Time domain&#x27;)</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure>
<p><img src="/2022/04/06/butter-filter/image-20220407113330972.png"
alt="image-20220407113330972" /></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/04/reg-verifier/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/04/reg-verifier/" class="post-title-link" itemprop="url">Cadence's reg_verifier</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-04-04 12:51:18" itemprop="dateCreated datePublished" datetime="2022-04-04T12:51:18+00:00">2022-04-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-14 08:57:43" itemprop="dateModified" datetime="2023-11-14T08:57:43+00:00">2023-11-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/digital/" itemprop="url" rel="index"><span itemprop="name">digital</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="generation">Generation</h2>
<p><img src="/2022/04/04/reg-verifier/image-20220404125201390.png"
alt="image-20220404125201390" /></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reg_verifier -domain uvmreg -top yapp_router_regs<span class="variable">.xml</span> -dut_name yapp_router_regs -out_file yapp_router_regs -cov -quicktest -pkg yapp_router_reg_pkg</span><br></pre></td></tr></table></figure>
<p><img src="/2022/04/04/reg-verifier/image-20220404125541442.png"
alt="image-20220404125541442" /></p>
<p><img src="/2022/04/04/reg-verifier/image-20220404125421201.png"
alt="image-20220404125421201" /></p>
<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="header">
<th>generated file</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>yapp_router_regs_config.dat</td>
<td>Configuration information</td>
</tr>
<tr class="even">
<td>yapp_router_regs_hdlpaths.dat</td>
<td>Path information for backddoor access</td>
</tr>
<tr class="odd">
<td>yapp_router_regs_rdb.sv</td>
<td>Register Model</td>
</tr>
<tr class="even">
<td>cdns_uvmreg_utils_pkg.sv</td>
<td>Cadence utility package</td>
</tr>
<tr class="odd">
<td>quicktest.sv</td>
<td>UVM test to verify model</td>
</tr>
</tbody>
</table>
<h2 id="sanity-check">Sanity Check</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make run_test</span><br></pre></td></tr></table></figure>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> yapp_router_regs_t <span class="keyword">extends</span> cdns_uvm_reg_block;</span><br><span class="line">    uvm_reg_map default_map;</span><br><span class="line">    uvm_reg_map router;</span><br><span class="line">    <span class="keyword">rand</span> yapp_regs_c router_yapp_regs;</span><br><span class="line">    <span class="keyword">rand</span> yapp_mem_c router_yapp_mem;</span><br><span class="line">    <span class="keyword">rand</span> yapp_pkt_mem_c router_yapp_pkt_mem;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">function</span> <span class="keyword">void</span> build();</span><br><span class="line">        router = create_map(<span class="string">&quot;router&quot;</span>, `UVM_REG_ADDR_WIDTH&#x27;h0, <span class="number">1</span>, UVM_LITTLE_ENDIAN, <span class="number">1</span>);</span><br><span class="line">        default_map = router;</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">//Mapping router map</span></span><br><span class="line">        router<span class="variable">.add_submap</span>(router_yapp_regs<span class="variable">.default_map</span>, `UVM_REG_ADDR_WIDTH&#x27;h1000)</span><br><span class="line">        router<span class="variable">.add_mem</span>(router_yapp_mem, `UVM_REG_ADDR_WIDTH&#x27;h1100);</span><br><span class="line">        router<span class="variable">.add_mem</span>(router_yapp_pkt_mem, `UVM_REG_ADDR_WIDTH&#x27;h1010);</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> qt_test <span class="keyword">extends</span> uvm_test;</span><br><span class="line">    yapp_router_regs_t model;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">task</span> run_phase(uvm_phase phase);</span><br><span class="line">        ...</span><br><span class="line">        model<span class="variable">.print</span>();</span><br><span class="line">        model<span class="variable">.default_map</span><span class="variable">.print</span>();</span><br><span class="line">        model<span class="variable">.router_yapp_regs</span><span class="variable">.default_map</span><span class="variable">.print</span>();</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">endclass</span></span><br></pre></td></tr></table></figure>
<p><strong>yapp_mem_c</strong> <figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> yapp_mem_c <span class="keyword">extends</span> uvm_mem;                                                                                                                                                                                                                                </span><br><span class="line">  `uvm_object_utils(yapp_mem_c)                                                                                                       </span><br><span class="line">                                                                                                                               </span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">input</span> <span class="keyword">string</span> name=<span class="string">&quot;router_yapp_mem&quot;</span>);                                                                                 </span><br><span class="line">    <span class="keyword">super</span><span class="variable">.new</span>(name, <span class="number">&#x27;h100</span>, <span class="number">8</span>, <span class="string">&quot;RW&quot;</span>, UVM_NO_COVERAGE);                                                                                 </span><br><span class="line">  <span class="keyword">endfunction</span>                                                                                                                            </span><br><span class="line"><span class="keyword">endclass</span></span><br></pre></td></tr></table></figure></p>
<p><strong>yapp_pkt_mem_c</strong></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> yapp_pkt_mem_c <span class="keyword">extends</span> uvm_mem;                                                                                                                                                                                                                                      </span><br><span class="line">  `uvm_object_utils(yapp_pkt_mem_c)                                                                                                                                                                                            </span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">input</span> <span class="keyword">string</span> name=<span class="string">&quot;router_yapp_pkt_mem&quot;</span>);                                                                             </span><br><span class="line">    <span class="keyword">super</span><span class="variable">.new</span>(name, <span class="number">&#x27;h40</span>, <span class="number">8</span>, <span class="string">&quot;RO&quot;</span>, UVM_NO_COVERAGE);                                                                                 </span><br><span class="line">  <span class="keyword">endfunction</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">endclass</span></span><br></pre></td></tr></table></figure>
<p><strong>yapp_regs_c</strong></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> yapp_regs_c <span class="keyword">extends</span> cdns_uvm_reg_block;</span><br><span class="line">  `uvm_object_utils(yapp_regs_c)</span><br><span class="line">  <span class="keyword">rand</span> addr0_cnt_reg_c addr0_cnt_reg;</span><br><span class="line">  <span class="keyword">rand</span> addr1_cnt_reg_c addr1_cnt_reg;</span><br><span class="line">  <span class="keyword">rand</span> addr2_cnt_reg_c addr2_cnt_reg;</span><br><span class="line">  <span class="keyword">rand</span> illegal_addr_cnt_reg_c addr3_cnt_reg;</span><br><span class="line">  <span class="keyword">rand</span> ctrl_reg_c ctrl_reg;</span><br><span class="line">  <span class="keyword">rand</span> en_reg_c en_reg;</span><br><span class="line">  <span class="keyword">rand</span> mem_size_reg_c mem_size_reg;</span><br><span class="line">  <span class="keyword">rand</span> oversized_pkt_cnt_reg_c oversized_pkt_cnt_reg;</span><br><span class="line">  <span class="keyword">rand</span> parity_err_cnt_reg_c parity_err_cnt_reg; </span><br><span class="line">  <span class="keyword">virtual</span> <span class="keyword">function</span> <span class="keyword">void</span> build();</span><br><span class="line">    uvm_reg  reg_set[$];</span><br><span class="line">    default_map = create_map(get_name(), `UVM_REG_ADDR_WIDTH&#x27;h1000, <span class="number">1</span>, UVM_LITTLE_ENDIAN, <span class="number">1</span>);                                         </span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">       uvm_reg_config_ta ta = get_reg_config(<span class="string">&quot;yapp_router_regs.router_yapp_regs&quot;</span>);</span><br><span class="line">       build_uvm_regs(default_map, <span class="keyword">this</span>, <span class="literal">null</span>, ta, reg_se);</span><br><span class="line">    <span class="keyword">end</span>                                                                                                                               </span><br><span class="line">    <span class="keyword">if</span>(! <span class="built_in">$cast</span>(addr0_cnt_reg, reg_set[<span class="number">0</span>]))</span><br><span class="line">      `uvm_error(<span class="string">&quot;UVM_REG&quot;</span>, <span class="string">&quot;addr0_cnt_reg register casting error&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(! <span class="built_in">$cast</span>(addr1_cnt_reg, reg_set[<span class="number">1</span>]))</span><br><span class="line">      `uvm_error(<span class="string">&quot;UVM_REG&quot;</span>, <span class="string">&quot;addr1_cnt_reg register casting error&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(! <span class="built_in">$cast</span>(addr2_cnt_reg, reg_set[<span class="number">2</span>]))</span><br><span class="line">      `uvm_error(<span class="string">&quot;UVM_REG&quot;</span>, <span class="string">&quot;addr2_cnt_reg register casting error&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(! <span class="built_in">$cast</span>(addr3_cnt_reg, reg_set[<span class="number">3</span>]))</span><br><span class="line">      `uvm_error(<span class="string">&quot;UVM_REG&quot;</span>, <span class="string">&quot;addr3_cnt_reg register casting error&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(! <span class="built_in">$cast</span>(ctrl_reg, reg_set[<span class="number">4</span>]))</span><br><span class="line">      `uvm_error(<span class="string">&quot;UVM_REG&quot;</span>, <span class="string">&quot;ctrl_reg register casting error&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(! <span class="built_in">$cast</span>(en_reg, reg_set[<span class="number">5</span>]))</span><br><span class="line">      `uvm_error(<span class="string">&quot;UVM_REG&quot;</span>, <span class="string">&quot;en_reg register casting error&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(! <span class="built_in">$cast</span>(mem_size_reg, reg_set[<span class="number">6</span>]))</span><br><span class="line">      `uvm_error(<span class="string">&quot;UVM_REG&quot;</span>, <span class="string">&quot;mem_size_reg register casting error&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(! <span class="built_in">$cast</span>(oversized_pkt_cnt_reg, reg_set[<span class="number">7</span>]))</span><br><span class="line">      `uvm_error(<span class="string">&quot;UVM_REG&quot;</span>, <span class="string">&quot;oversized_pkt_cnt_reg register casting error&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(! <span class="built_in">$cast</span>(parity_err_cnt_reg, reg_set[<span class="number">8</span>]))</span><br><span class="line">      `uvm_error(<span class="string">&quot;UVM_REG&quot;</span>, <span class="string">&quot;parity_err_cnt_reg register casting error&quot;</span>)</span><br><span class="line">  <span class="keyword">endfunction</span>   </span><br><span class="line">                                                 </span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">input</span> <span class="keyword">string</span> name=<span class="string">&quot;router_yapp_regs&quot;</span>);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.new</span>(name, UVM_NO_COVERAGE);</span><br><span class="line">  <span class="keyword">endfunction</span>  </span><br><span class="line"><span class="keyword">endclass</span> </span><br></pre></td></tr></table></figure>
<blockquote>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> uvm_reg_map <span class="keyword">extends</span> uvm_object;</span><br><span class="line"><span class="comment">// Function: add_submap</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Add an address map</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Add the specified address map instance to this address map.</span></span><br><span class="line"><span class="comment">// The address map is located at the specified base address.</span></span><br><span class="line"><span class="comment">// The number of consecutive physical addresses occupied by the submap</span></span><br><span class="line"><span class="comment">// depends on the number of bytes in the physical interface</span></span><br><span class="line"><span class="comment">// that corresponds to the submap,</span></span><br><span class="line"><span class="comment">// the number of addresses used in the submap and</span></span><br><span class="line"><span class="comment">// the number of bytes in the</span></span><br><span class="line"><span class="comment">// physical interface corresponding to this address map.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// An address map may be added to multiple address maps</span></span><br><span class="line"><span class="comment">// if it is accessible from multiple physical interfaces.</span></span><br><span class="line"><span class="comment">// An address map may only be added to an address map</span></span><br><span class="line"><span class="comment">// in the grand-parent block of the address submap.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">virtual</span> <span class="keyword">function</span> <span class="keyword">void</span> add_submap (uvm_reg_map    child_map,</span><br><span class="line">                                       uvm_reg_addr_t offset);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Function: add_mem</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Add a memory</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Add the specified memory instance to this address map.</span></span><br><span class="line"><span class="comment">// The memory is located at the specified base address and has the</span></span><br><span class="line"><span class="comment">// specified access rights (&quot;RW&quot;, &quot;RO&quot; or &quot;WO&quot;).</span></span><br><span class="line"><span class="comment">// The number of consecutive physical addresses occupied by the memory</span></span><br><span class="line"><span class="comment">// depends on the width and size of the memory and the number of bytes in the</span></span><br><span class="line"><span class="comment">// physical interface corresponding to this address map.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// If ~unmapped~ is TRUE, the memory does not occupy any</span></span><br><span class="line"><span class="comment">// physical addresses and the base address is ignored.</span></span><br><span class="line"><span class="comment">// Unmapped memories require a user-defined ~frontdoor~ to be specified.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// A memory may be added to multiple address maps</span></span><br><span class="line"><span class="comment">// if it is accessible from multiple physical interfaces.</span></span><br><span class="line"><span class="comment">// A memory may only be added to an address map whose parent block</span></span><br><span class="line"><span class="comment">// is the same as the memory&#x27;s parent block.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">virtual</span> <span class="keyword">function</span> <span class="keyword">void</span> add_mem (uvm_mem        mem,</span><br><span class="line">                                    uvm_reg_addr_t offset,</span><br><span class="line">                                    <span class="keyword">string</span>         rights = <span class="string">&quot;RW&quot;</span>,</span><br><span class="line">                                    <span class="keyword">bit</span>            unmapped=<span class="number">0</span>,</span><br><span class="line">                                    uvm_reg_frontdoor frontdoor=<span class="literal">null</span>);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="keyword">endclass</span>: uvm_reg_map    </span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="register-model-print">register model print</h3>
<blockquote>
<p>// test run_phase</p>
<p><code>model.default_map.print();</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">----------------------------------------------------------------------------------------------------------------------------            </span><br><span class="line">Name                             Type                     Size  Value                                                                   </span><br><span class="line">----------------------------------------------------------------------------------------------------------------------------            </span><br><span class="line">model                            yapp_router_regs_t       -     @3724                                                                   </span><br><span class="line">  router_yapp_regs               yapp_regs_c              -     @3792                                                                   </span><br><span class="line">    addr0_cnt_reg                addr0_cnt_reg_c          -     @3827                                                                   </span><br><span class="line">      addr0_cnt_reg_fld          uvm_reg_field            ...    RO addr0_cnt_reg[7:0]=8&#x27;h00                                            </span><br><span class="line">    addr1_cnt_reg                addr1_cnt_reg_c          -     @3839                                                                   </span><br><span class="line">      addr1_cnt_reg_fld          uvm_reg_field            ...    RO addr1_cnt_reg[7:0]=8&#x27;h00                                            </span><br><span class="line">    addr2_cnt_reg                addr2_cnt_reg_c          -     @3857                                                                   </span><br><span class="line">      addr2_cnt_reg_fld          uvm_reg_field            ...    RO addr2_cnt_reg[7:0]=8&#x27;h00                                            </span><br><span class="line">    addr3_cnt_reg                illegal_addr_cnt_reg_c   -     @3874                                                                   </span><br><span class="line">      addr3_cnt_reg_fld          uvm_reg_field            ...    RO addr3_cnt_reg[7:0]=8&#x27;h00                                            </span><br><span class="line">    ctrl_reg                     ctrl_reg_c               -     @3891                                                                   </span><br><span class="line">      plen                       uvm_reg_field            ...    RW ctrl_reg[5:0]=6&#x27;h3f                                                 </span><br><span class="line">      rsvd_0                     uvm_reg_field            ...    RW ctrl_reg[7:6]=2&#x27;h0                                                  </span><br><span class="line">    en_reg                       en_reg_c                 -     @3908                                                                   </span><br><span class="line">      router_en                  uvm_reg_field            ...    RW en_reg[0:0]=1&#x27;h1                                                    </span><br><span class="line">      parity_err_cnt_en          uvm_reg_field            ...    RW en_reg[1:1]=1&#x27;h0                                                    </span><br><span class="line">      oversized_pkt_cnt_en       uvm_reg_field            ...    RW en_reg[2:2]=1&#x27;h0                                                    </span><br><span class="line">      rsvd_0                     uvm_reg_field            ...    RW en_reg[3:3]=1&#x27;h0                                                    </span><br><span class="line">      addr0_cnt_en               uvm_reg_field            ...    RW en_reg[4:4]=1&#x27;h0                                                    </span><br><span class="line">      addr1_cnt_en               uvm_reg_field            ...    RW en_reg[5:5]=1&#x27;h0                                                    </span><br><span class="line">      addr2_cnt_en               uvm_reg_field            ...    RW en_reg[6:6]=1&#x27;h0                                                    </span><br><span class="line">      addr3_cnt_en               uvm_reg_field            ...    RW en_reg[7:7]=1&#x27;h0                                                    </span><br><span class="line">    mem_size_reg                 mem_size_reg_c           -     @3928                                                                   </span><br><span class="line">      mem_size_reg_fld           uvm_reg_field            ...    RO mem_size_reg[7:0]=8&#x27;h00                                             </span><br><span class="line">    oversized_pkt_cnt_reg        oversized_pkt_cnt_reg_c  -     @3966                                                                   </span><br><span class="line">      oversized_pkt_cnt_reg_fld  uvm_reg_field            ...    RO oversized_pkt_cnt_reg[7:0]=8&#x27;h00                                    </span><br><span class="line">    parity_err_cnt_reg           parity_err_cnt_reg_c     -     @3983                                                                   </span><br><span class="line">      parity_err_cnt_reg_fld     uvm_reg_field            ...    RO parity_err_cnt_reg[7:0]=8&#x27;h00                                       </span><br><span class="line">  router_yapp_mem                yapp_mem_c               -     @3757                                                                   </span><br><span class="line">    n_bits                       integral                 32    &#x27;d8                                                                     </span><br><span class="line">    size                         integral                 32    &#x27;d256                                                                   </span><br><span class="line">  router_yapp_pkt_mem            yapp_pkt_mem_c           -     @3779                                                                   </span><br><span class="line">    n_bits                       integral                 32    &#x27;d8                                                                     </span><br><span class="line">    size                         integral                 32    &#x27;d64</span><br><span class="line">    router                       uvm_reg_map              0     id=@3737 seqr=HI0.sqr offset=0x0 size=0x1200 baseaddr=0x0               </span><br><span class="line">      router_yapp_regs           uvm_reg_map              0     id=@3816 seqr=HI0.sqr offset=0x1000 size=0x5 baseaddr=0x1000            </span><br><span class="line">----------------------------------------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<h3 id="address-map-print">address map print</h3>
<blockquote>
<p>// test run_phase</p>
<p><code>model.router_yapp_regs.default_map.print();</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line">Name                       Type                     Size  Value</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">router                     uvm_reg_map              -     @3737</span><br><span class="line">  endian                                            ...   UVM_LITTLE_ENDIAN</span><br><span class="line">  effective sequencer      uvm_sequencer            ...   HI0.sqr</span><br><span class="line">  router_yapp_mem          yapp_mem_c               ...   @3757 +&#x27;h1100</span><br><span class="line">  router_yapp_pkt_mem      yapp_pkt_mem_c           ...   @3779 +&#x27;h1010</span><br><span class="line">  router_yapp_regs         uvm_reg_map              -     @3816</span><br><span class="line">    endian                                          ...   UVM_LITTLE_ENDIAN</span><br><span class="line">    effective sequencer    uvm_sequencer            ...   HI0.sqr</span><br><span class="line">    addr0_cnt_reg          addr0_cnt_reg_c          ...   @3827 +&#x27;h1009</span><br><span class="line">    addr1_cnt_reg          addr1_cnt_reg_c          ...   @3839 +&#x27;h100a</span><br><span class="line">    addr2_cnt_reg          addr2_cnt_reg_c          ...   @3857 +&#x27;h100b</span><br><span class="line">    addr3_cnt_reg          illegal_addr_cnt_reg_c   ...   @3874 +&#x27;h1006</span><br><span class="line">    ctrl_reg               ctrl_reg_c               ...   @3891 +&#x27;h1000</span><br><span class="line">    en_reg                 en_reg_c                 ...   @3908 +&#x27;h1001</span><br><span class="line">    mem_size_reg           mem_size_reg_c           ...   @3928 +&#x27;h100d</span><br><span class="line">    oversized_pkt_cnt_reg  oversized_pkt_cnt_reg_c  ...   @3966 +&#x27;h1005</span><br><span class="line">    parity_err_cnt_reg     parity_err_cnt_reg_c     ...   @3983 +&#x27;h1004</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="submap-print">submap print</h3>
<blockquote>
<p>// test run_phase</p>
<p><code>model.router_yapp_regs.default_map.print();</code></p>
</blockquote>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------------------------------------------------</span><br><span class="line">Name                     Type                     Size  Value</span><br><span class="line">-------------------------------------------------------------------------</span><br><span class="line">router_yapp_regs         uvm_reg_map              -     @<span class="number">3814</span></span><br><span class="line">  endian                                          ...   UVM_LITTLE_ENDIAN</span><br><span class="line">  effective sequencer    uvm_sequencer            ...   HI0<span class="variable">.sqr</span></span><br><span class="line">  addr0_cnt_reg          addr0_cnt_reg_c          ...   @<span class="number">3825</span> +<span class="number">&#x27;h1009</span></span><br><span class="line">  addr1_cnt_reg          addr1_cnt_reg_c          ...   @<span class="number">3837</span> +<span class="number">&#x27;h100a</span></span><br><span class="line">  addr2_cnt_reg          addr2_cnt_reg_c          ...   @<span class="number">3855</span> +<span class="number">&#x27;h100b</span></span><br><span class="line">  addr3_cnt_reg          illegal_addr_cnt_reg_c   ...   @<span class="number">3872</span> +<span class="number">&#x27;h1006</span></span><br><span class="line">  ctrl_reg               ctrl_reg_c               ...   @<span class="number">3889</span> +<span class="number">&#x27;h1000</span></span><br><span class="line">  en_reg                 en_reg_c                 ...   @<span class="number">3906</span> +<span class="number">&#x27;h1001</span></span><br><span class="line">  mem_size_reg           mem_size_reg_c           ...   @<span class="number">3926</span> +<span class="number">&#x27;h100d</span></span><br><span class="line">  oversized_pkt_cnt_reg  oversized_pkt_cnt_reg_c  ...   @<span class="number">3964</span> +<span class="number">&#x27;h1005</span></span><br><span class="line">  parity_err_cnt_reg     parity_err_cnt_reg_c     ...   @<span class="number">3981</span> +<span class="number">&#x27;h1004</span></span><br><span class="line">-------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<h2 id="cdns_uvmreg_utils_pkg">cdns_uvmreg_utils_pkg</h2>
<h3 id="uvm_reg_field_config_t">uvm_reg_field_config_t</h3>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span>  &#123;                                                                         </span><br><span class="line">     <span class="keyword">string</span>         name; </span><br><span class="line">     <span class="keyword">int</span> <span class="keyword">unsigned</span>   size; </span><br><span class="line">     <span class="keyword">int</span> <span class="keyword">unsigned</span>   lsb_pos;</span><br><span class="line">     <span class="keyword">string</span>         access;</span><br><span class="line">     <span class="keyword">bit</span>            volatile;</span><br><span class="line">     uvm_reg_data_t reset;</span><br><span class="line">     <span class="keyword">bit</span>            has_reset;</span><br><span class="line">     <span class="keyword">bit</span>            is_rand; </span><br><span class="line">     <span class="keyword">bit</span>            individually_accessible;</span><br><span class="line">   &#125; uvm_reg_field_config_t; </span><br></pre></td></tr></table></figure>
<h3 id="uvm_reg_config_t">uvm_reg_config_t</h3>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span>  &#123;</span><br><span class="line">     <span class="keyword">string</span>          reg_type_name;</span><br><span class="line">     <span class="keyword">string</span>          configUID;</span><br><span class="line">     <span class="keyword">string</span>          name;</span><br><span class="line">     uvm_reg_addr_t  offset;</span><br><span class="line">     <span class="keyword">int</span> <span class="keyword">unsigned</span>    size_bytes;</span><br><span class="line">     <span class="keyword">int</span> <span class="keyword">unsigned</span>    addr_bits;</span><br><span class="line">     <span class="keyword">string</span>          access;</span><br><span class="line">     <span class="keyword">int</span>             is_array;</span><br><span class="line">     <span class="keyword">string</span>          range;</span><br><span class="line">   &#125; uvm_reg_config_t; </span><br></pre></td></tr></table></figure>
<h3 id="uvm_blk_config_t">uvm_blk_config_t</h3>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;                             </span><br><span class="line">     uvm_reg_addr_t   base_addr;</span><br><span class="line">     <span class="keyword">int</span>              n_bytes;</span><br><span class="line">     uvm_endianness_e endianess;</span><br><span class="line">     <span class="keyword">bit</span>              byte_addr_t;</span><br><span class="line">       &#125; uvm_blk_config_t; </span><br></pre></td></tr></table></figure>
<h3 id="uvm_reg_field_config_ta">uvm_reg_field_config_ta</h3>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> uvm_reg_field_config_t uvm_reg_field_config_ta[];</span><br></pre></td></tr></table></figure>
<h3 id="uvm_reg_field_config_tq">uvm_reg_field_config_tq</h3>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> uvm_reg_field_config_ta uvm_reg_field_config_tq[<span class="keyword">string</span>];</span><br></pre></td></tr></table></figure>
<h3 id="build_uvm_regs">build_uvm_regs</h3>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="keyword">automatic</span> <span class="keyword">void</span> build_uvm_regs(uvm_reg_map map, uvm_reg_block pblock, uvm_reg_file pfile, <span class="keyword">ref</span> uvm_reg_config_t f_props[], <span class="keyword">output</span> uvm_reg out[$]);</span><br><span class="line">   <span class="keyword">foreach</span>(f_props[idx]) <span class="keyword">begin</span>        </span><br><span class="line">      uvm_reg_config_t f= f_props[idx];</span><br><span class="line">      <span class="keyword">if</span>(f<span class="variable">.is_array</span> == <span class="number">0</span>) <span class="keyword">begin</span>                  </span><br><span class="line">         cdns_uvm_reg reg_t;</span><br><span class="line">         uvm_object obj = factory<span class="variable">.create</span>(f<span class="variable">.reg_type_name</span>, pfile!=<span class="literal">null</span> ? pfile<span class="variable">.get_full_name</span>(): <span class="string">&quot;&quot;</span>,f<span class="variable">.name</span>);</span><br><span class="line">         <span class="keyword">assert</span>(<span class="built_in">$cast</span>(reg_t,obj));            </span><br><span class="line">         reg_t<span class="variable">.configure</span>(pblock, pfile, <span class="string">&quot;&quot;</span>);</span><br><span class="line">         reg_t<span class="variable">.setconfigUID</span>(f<span class="variable">.configUID</span>);       </span><br><span class="line">         reg_t<span class="variable">.build</span>();</span><br><span class="line">         <span class="comment">// !!! f.offset !!!</span></span><br><span class="line">         map<span class="variable">.add_reg</span>(reg_t, f<span class="variable">.offset</span>, f<span class="variable">.access</span>);            </span><br><span class="line">         out<span class="variable">.push_back</span>(reg_t);</span><br><span class="line">         <span class="comment">// !!! print the offset</span></span><br><span class="line">          `uvm_info(<span class="string">&quot;[build_uvm_regs]&quot;</span>, <span class="built_in">$sformatf</span>(<span class="string">&quot;### %s offset: %0x&quot;</span>, f<span class="variable">.reg_type_name</span>, f<span class="variable">.offset</span>), UVM_LOW)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">       </span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (f<span class="variable">.is_array</span> == <span class="number">1</span>) <span class="keyword">begin</span>             </span><br><span class="line">         <span class="keyword">int</span> <span class="keyword">unsigned</span> array_offset;               </span><br><span class="line">         <span class="keyword">string</span> range_str = f<span class="variable">.range</span>;        </span><br><span class="line">         <span class="keyword">int</span> indx, arr_idx = <span class="number">0</span>;                 </span><br><span class="line">         <span class="keyword">int</span> range_arr [];                               </span><br><span class="line">         <span class="keyword">int</span> arr_size = <span class="number">1</span>;                        </span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>dynamic array
<ul>
<li>need <code>new[size]</code></li>
</ul></li>
<li>queue
<ul>
<li>DONT need <code>new</code></li>
</ul></li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">UVM_INFO ./cdns_uvmreg_utils_pkg.sv(322) @ 0: reporter [[build_uvm_regs]] ### addr0_cnt_reg_c offset: 9                                 </span><br><span class="line">UVM_INFO ./cdns_uvmreg_utils_pkg.sv(322) @ 0: reporter [[build_uvm_regs]] ### addr1_cnt_reg_c offset: a                                 </span><br><span class="line">UVM_INFO ./cdns_uvmreg_utils_pkg.sv(322) @ 0: reporter [[build_uvm_regs]] ### addr2_cnt_reg_c offset: b                                 </span><br><span class="line">UVM_INFO ./cdns_uvmreg_utils_pkg.sv(322) @ 0: reporter [[build_uvm_regs]] ### illegal_addr_cnt_reg_c offset: 6                          </span><br><span class="line">UVM_INFO ./cdns_uvmreg_utils_pkg.sv(322) @ 0: reporter [[build_uvm_regs]] ### ctrl_reg_c offset: 0                                      </span><br><span class="line">UVM_INFO ./cdns_uvmreg_utils_pkg.sv(322) @ 0: reporter [[build_uvm_regs]] ### en_reg_c offset: 1                                        </span><br><span class="line">UVM_INFO ./cdns_uvmreg_utils_pkg.sv(322) @ 0: reporter [[build_uvm_regs]] ### mem_size_reg_c offset: d                                  </span><br><span class="line">UVM_INFO ./cdns_uvmreg_utils_pkg.sv(322) @ 0: reporter [[build_uvm_regs]] ### oversized_pkt_cnt_reg_c offset: 5                         </span><br><span class="line">UVM_INFO ./cdns_uvmreg_utils_pkg.sv(322) @ 0: reporter [[build_uvm_regs]] ### parity_err_cnt_reg_c offset: 4</span><br></pre></td></tr></table></figure>
<blockquote>
<p>In submap, offset is <strong>0-based</strong>,
<code>router.add_submap(router_yapp_regs.default_map, ``UVM_REG_ADDR_WIDTH'h1000)</code>
configure base addr for submap</p>
</blockquote>
<h2 id="ip-xact-xml-yapp_router_regs.xml">IP-XACT XML :
yapp_router_regs.xml</h2>
<p><img src="/2022/04/04/reg-verifier/image-20220404194550165.png"
alt="image-20220404194550165" /></p>
<h3 id="memory">memory</h3>
<h4 id="yapp_pkt_mem">yapp_pkt_mem</h4>
<p><img src="/2022/04/04/reg-verifier/image-20220404194628354.png"
alt="image-20220404194628354" /></p>
<h4 id="yapp_mem">yapp_mem</h4>
<p><img src="/2022/04/04/reg-verifier/image-20220404194721416.png"
alt="image-20220404194721416" /></p>
<h3 id="register">register</h3>
<p><img src="/2022/04/04/reg-verifier/image-20220404194941613.png"
alt="image-20220404194941613" /></p>
<h3 id="yapp_regs">yapp_regs</h3>
<h4 id="ctrl_reg">ctrl_reg</h4>
<p><img src="/2022/04/04/reg-verifier/image-20220404195052310.png"
alt="image-20220404195052310" /></p>
<h4 id="en_reg">en_reg</h4>
<p><img src="/2022/04/04/reg-verifier/image-20220404195156776.png"
alt="image-20220404195156776" /></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/03/functional-coverage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/03/functional-coverage/" class="post-title-link" itemprop="url">Functional Coverage Modeling</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-04-03 20:19:08" itemprop="dateCreated datePublished" datetime="2022-04-03T20:19:08+00:00">2022-04-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-14 08:57:43" itemprop="dateModified" datetime="2023-11-14T08:57:43+00:00">2023-11-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/digital/" itemprop="url" rel="index"><span itemprop="name">digital</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="coverage-options">Coverage Options</h2>
<ul>
<li>Explicit (user defined)
<ul>
<li>Fully and clearly expressed within sources
<ul>
<li>Sequence and temporal coverage using assertions</li>
<li>Data-oriented coverage using <code>covergroup</code></li>
</ul></li>
<li>Planned and defined by the verification team</li>
</ul></li>
<li>Implicit
<ul>
<li>Derived or computed from source
<ul>
<li>Code coverage measured by the simulator</li>
</ul></li>
<li>May be defined outside the verification team</li>
<li>May be implied by the verification interface
<ul>
<li>e.g., an industry standard protocol</li>
</ul></li>
</ul></li>
</ul>
<h2 id="explicit-coverage-in-systemverilog">Explicit Coverage in
Systemverilog</h2>
<h3 id="assertions-for-control-oriented-coverage">Assertions for
control-oriented coverage</h3>
<ul>
<li>Defined as procedural statements</li>
<li><strong>CANNOT</strong> be defined in a class</li>
</ul>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">property</span> req_gnt (cyc);</span><br><span class="line">    @(<span class="keyword">posedge</span> clk)</span><br><span class="line">    	<span class="built_in">$rose</span>(req) ##<span class="number">0</span> (req &amp;&amp; !gnt)[cyc] ##<span class="number">1</span> gnt;</span><br><span class="line"><span class="keyword">endproperty</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">cover</span> <span class="keyword">property</span> (req_gnt(<span class="number">3</span>));</span><br><span class="line"><span class="keyword">cover</span> <span class="keyword">property</span> (req_gnt(<span class="number">4</span>));</span><br><span class="line"><span class="keyword">cover</span> <span class="keyword">property</span> (req_gnt(<span class="number">5</span>));</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Control-oriented coverage uses SystemVerilog Assertion (SVA) syntax
and the cover directive. It is used to cover sequences of signal values
over time. Assertions cannot be declared or "covered" in a class
declaration, so their use in an UVM verification environment is
restricted to <strong>interface only</strong></p>
</blockquote>
<h3 id="covergroup-for-data-oriented-coverage">Covergroup for
data-oriented coverage</h3>
<ul>
<li>CAN be declared as a class member and created in class
constructor</li>
<li>Used in <strong>interface</strong> and module UVCs</li>
</ul>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">covergroup</span> cg @(<span class="keyword">posedge</span> clk);</span><br><span class="line">    len: <span class="keyword">coverpoint</span> pkt<span class="variable">.lenght</span> &#123;</span><br><span class="line">        <span class="keyword">illegal_bins</span> zero = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">bins</span> sml = &#123;[<span class="number">1</span>:<span class="number">10</span>]&#125;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    addrxlen : <span class="keyword">cross</span> pkt<span class="variable">.addr</span>, len;</span><br><span class="line"><span class="keyword">endgroup</span></span><br><span class="line"></span><br><span class="line">cg cg1 = <span class="keyword">new</span>();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Data-oriented coverage uses the <code>covergroup</code> construct.
Covergroups can be declared and created in classes, therefore they are
essential for explicit coverage in a UVM verification environment.</p>
</blockquote>
<h4 id="interface-monitor-coverage">Interface Monitor Coverage</h4>
<p><code>covergroup new</code> constructor is called
<strong>directly</strong> off the declaration of the covergroup, it does
not have a separate instance name</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">collected_pkts_cq = <span class="keyword">new</span>();</span><br></pre></td></tr></table></figure>
<p>The <code>covergroup</code> instance must be created in the class
constructor, not a UVM <code>build_phase</code> or other phase
method</p>
<p><img
src="/2022/04/03/functional-coverage/image-20220403210225837.png"
alt="image-20220403210225837" /></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> yapp_tx_monitor <span class="keyword">extends</span> uvm_monitor;</span><br><span class="line">    <span class="comment">// constructor</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">covergroup</span> collected_pkts_cg;</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">endgroup</span></span><br><span class="line">    </span><br><span class="line">    yapp_packet packet_collected;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">task</span> run_phase(uvm_phase phase);</span><br><span class="line">        collect_packet();</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">task</span> collect_packet();</span><br><span class="line">        <span class="comment">// read RTL signals via interface</span></span><br><span class="line">        <span class="comment">// reconstruct packet</span></span><br><span class="line">        collected_pkts_cg<span class="variable">.sample</span>();</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">endtask</span></span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">endclass</span></span><br></pre></td></tr></table></figure>
<h4 id="module-uvc-coverage">Module UVC Coverage</h4>
<p>Typical module UVC coverage:</p>
<ul>
<li>Routing - packets flow from input ports to all legal outputs</li>
<li>latency - all packets received within speicied delay</li>
</ul>
<blockquote>
<p>The module UVC monitor receives data from the interface monitors via
analysis ports, so the implementation of the analysis write function is
a convenient place to put coverage code</p>
</blockquote>
<p><img
src="/2022/04/03/functional-coverage/image-20220403212529981.png"
alt="image-20220403212529981" /></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/03/tlm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/03/tlm/" class="post-title-link" itemprop="url">TLM</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-04-03 09:42:36" itemprop="dateCreated datePublished" datetime="2022-04-03T09:42:36+00:00">2022-04-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-14 08:57:43" itemprop="dateModified" datetime="2023-11-14T08:57:43+00:00">2023-11-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/digital/" itemprop="url" rel="index"><span itemprop="name">digital</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img src="/2022/04/03/tlm/image-20220403094350570.png"
alt="image-20220403094350570" /></p>
<p><img src="/2022/04/03/tlm/image-20220403094404891.png"
alt="image-20220403094404891" /></p>
<ul>
<li><strong>Blocking methods</strong> are defined with
<code>get()</code> or <code>put()</code> <strong>tasks</strong> to allow
them to consume time</li>
<li><strong>Non-blocking methods</strong> are defined with
<code>try_get()</code> or <code>try_put()</code>
<strong>functions</strong> as they execute in zero time</li>
</ul>
<h2 id="uni-directional-tlm-methods-reference">Uni-Directional TLM
Methods Reference</h2>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 51%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Method</strong></th>
<th><strong>Description</strong></th>
<th><strong>Syntax</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>put()</code></td>
<td>Blocking put</td>
<td><code>virtual task put(iput TR t);</code></td>
</tr>
<tr class="even">
<td><code>try_put()</code></td>
<td>Nonblocking put<br />-return 1 if successful<br />-return 0 if
not</td>
<td><code>virtual function bit try_put(input TR t);</code></td>
</tr>
<tr class="odd">
<td><code>can_put()</code></td>
<td>Nonblocking test put<br />-return 1 if put would be
successful<br />-return 0 if not</td>
<td><code>virtual function bit can_put();</code></td>
</tr>
<tr class="even">
<td><code>get()</code></td>
<td>Blocking get</td>
<td><code>virtual task get(output TR t);</code></td>
</tr>
<tr class="odd">
<td><code>try_get()</code></td>
<td>Nonblocking get<br />-return 1 if successful<br />-return 0 if
not</td>
<td><code>virtual function bit try_get(output TR t);</code></td>
</tr>
<tr class="even">
<td><code>can_get()</code></td>
<td>Nonblocking test get<br />-return 1 if get would be
successful<br />-return 0 if not</td>
<td><code>virtual function bit can_get();</code></td>
</tr>
<tr class="odd">
<td><code>peek()</code></td>
<td>Blocking peek</td>
<td><code>virtual task peek(output TR t);</code></td>
</tr>
<tr class="even">
<td><code>try_peek()</code></td>
<td>Nonblocking peek<br />-return 1 if successful<br />-return 0 if
not</td>
<td><code>virtual function bit try_peek(output TR t);</code></td>
</tr>
<tr class="odd">
<td><code>can_peek</code></td>
<td>Nonblocking test peek<br />-return 1 if peek would be
successful<br />-return 0 if not</td>
<td><code>virtual function bit can_peek();</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>The <code>peek()</code> methods are similarly to the
<code>get()</code> methods, but <strong>copy</strong> the transaction
instead of <strong>removing</strong> it. The transaction is not
consumed, and a subsequent <code>get</code> or <code>peek</code>
operation will return the <em>same</em> transaction</p>
</blockquote>
<h2 id="selected-connector-and-method-options">Selected Connector and
Method Options</h2>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 6%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 6%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 6%" />
<col style="width: 9%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><code>put</code></th>
<th><code>try_put</code></th>
<th><code>can_put</code></th>
<th><code>get</code></th>
<th><code>try_get</code></th>
<th><code>can_get</code></th>
<th><code>peek</code></th>
<th><code>try_peed</code></th>
<th><code>can_peek</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>uvm_put_*</code></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><code>uvm_blocking_put_*</code></td>
<td>✓</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><code>uvm_nonblocking_put_*</code></td>
<td></td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><code>uvm_get_*</code></td>
<td></td>
<td></td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><code>uvm_blocking_get_*</code></td>
<td></td>
<td></td>
<td></td>
<td>✓</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><code>uvm_nonblocking_get_*</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>✓</td>
<td>✓</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><code>uvm_get_peek_*</code></td>
<td></td>
<td></td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr class="even">
<td><code>uvm_blocking_get_peek_*</code></td>
<td></td>
<td></td>
<td></td>
<td>✓</td>
<td></td>
<td></td>
<td>✓</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><code>uvm_nonblocking_get_peek_*</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>✓</td>
<td>✓</td>
<td></td>
<td>✓</td>
<td>✓</td>
</tr>
</tbody>
</table>
<blockquote>
<p>in the connectors above, <code>*</code> can be replaced by
<code>port</code>, <code>imp</code>, or <code>export</code></p>
<p>All the methods for a specific connector type <strong>MUST</strong>
be implemented. If you define an <code>uvm_put</code> connection between
two compoents, then the component with the <code>uvm_put_imp</code>
object must provide implementations of <strong>ALL</strong> three put
methods, <code>put</code>, <code>try_put</code> and
<code>can_put</code>, even if these methods are not explicitly
called</p>
</blockquote>
<h2 id="tlm-fifo">TLM FIFO</h2>
<p>The TLM FIFO is a FIFO component wrapped in <code>get</code> and
<code>put</code> <code>imp</code> connectors. This has the benefit of
data storage as well as providing implementations of the communication
methods. Components connected to the TLM FIFO are in control of data
transfer and can simply defined port connectors to initiate read and
write operations on the FIFO</p>
<h3 id="uvm_tlm_fifo">uvm_tlm_fifo</h3>
<p><img src="/2022/04/03/tlm/image-20220403141222126.png"
alt="image-20220403141222126" /></p>
<p>The TLM FIFO object is effectively a FIFO component instantiated
between and connected to two components. The FIFO contains
<code>imp</code> connectors for the standard TLM <code>put</code> and
<code>get</code>/<code>peek</code> interfaces, therefore the user does
not have to define<code>imp</code> ports or communication methods and
the FIRO takes care of data storage</p>
<p>The advantages are:</p>
<ul>
<li>The user does not need to define communication methods or
<code>imp</code> connectors</li>
<li>The FIFO provides data storage between the <code>write</code>
(<code>put</code>) and <code>read</code>
(<code>get</code>/<code>peek</code>) components</li>
<li>There are a number of built-in methods for checking FIFO status</li>
</ul>
<p>The disadvantages are:</p>
<ul>
<li>The user must now initiate both sides of the transfer (both
<code>get</code>/<code>peek</code> and <code>put</code>) to complete the
transaction</li>
<li>Two connections must be made (both sides of the FIFO) rather than
one</li>
</ul>
<p>The <code>put_export</code> and <code>get_peek_export</code>
connection objects have alternatives which provide subsets of the full
connector. For example, <code>blocking_put_export</code> and
<code>nonblocking_put_export</code> can replace <code>put_export</code>.
<code>blocking_get_export</code>, <code>nonblocking_get_export</code>
and <code>get_export</code> (as well as others) can replace
<code>get_peek_export</code>.</p>
<h4 id="built-in-methods">built-in methods</h4>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 46%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Description</th>
<th>Syntax</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>new</code></td>
<td>Standard component constructor with an additional third argument,
<code>size</code>, which sets the maximum FIFO size. Default size is 1.
A size of <strong>0</strong> is an unbounded FIFO</td>
<td><code>function new(string name, uvm_component parent=null, int size=1);</code></td>
</tr>
<tr class="even">
<td><code>size</code></td>
<td>Return size of FIFO. <strong>0</strong> indicates unbounded
FIFO</td>
<td><code>virtual function int size()</code></td>
</tr>
<tr class="odd">
<td><code>used</code></td>
<td>Return number of entries written to the FIFO</td>
<td><code>virtual function int used();</code></td>
</tr>
<tr class="even">
<td><code>is_empty</code></td>
<td>Return <strong>1</strong> if <code>used()</code> is 0, otherwise
<strong>0</strong></td>
<td><code>virtual function bit is empty();</code></td>
</tr>
<tr class="odd">
<td><code>is_full</code></td>
<td>Return 1 if <code>used()</code> is equal to <code>size</code>,
otherwise <strong>0</strong></td>
<td><code>virtual function bit is_full()</code></td>
</tr>
<tr class="even">
<td><code>flush</code></td>
<td>Delete all entries from the FIFO, upon which <code>used()</code> is
<strong>0</strong> and <code>is_empty()</code> is
<strong>1</strong></td>
<td><code>virtual funciton void flush();</code></td>
</tr>
</tbody>
</table>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> uvm_tlm_fifo <span class="variable">#(type T=int) extends uvm_tlm_fifo_base #(T)</span>;</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">endclass</span>    </span><br></pre></td></tr></table></figure>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">virtual</span> <span class="keyword">class</span> uvm_tlm_fifo_base <span class="variable">#(type T=int)</span> <span class="keyword">extends</span> uvm_component;</span><br><span class="line">    uvm_put_imp <span class="variable">#(T, this_type)</span> put_export;</span><br><span class="line">    </span><br><span class="line">    uvm_get_peek_imp <span class="variable">#(T, this_type)</span> get_peek_export;</span><br><span class="line">    </span><br><span class="line">    uvm_analysis_port <span class="variable">#(T)</span> put_ap;</span><br><span class="line">    </span><br><span class="line">    uvm_analysis_port <span class="variable">#(T)</span> get_ap;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// The following are aliases to the above put_export</span></span><br><span class="line">    uvm_put_imp      <span class="variable">#(T, this_type)</span> blocking_put_export;</span><br><span class="line">    uvm_put_imp      <span class="variable">#(T, this_type)</span> nonblocking_put_export;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// The following are all aliased to the above get_peek_export, which provides</span></span><br><span class="line">    <span class="comment">// the superset of these interfaces.</span></span><br><span class="line">    uvm_get_peek_imp <span class="variable">#(T, this_type)</span> blocking_get_export;</span><br><span class="line">    uvm_get_peek_imp <span class="variable">#(T, this_type)</span> nonblocking_get_export;</span><br><span class="line">    uvm_get_peek_imp <span class="variable">#(T, this_type)</span> get_export;</span><br><span class="line">    </span><br><span class="line">    uvm_get_peek_imp <span class="variable">#(T, this_type)</span> blocking_peek_export;</span><br><span class="line">    uvm_get_peek_imp <span class="variable">#(T, this_type)</span> nonblocking_peek_export;</span><br><span class="line">    uvm_get_peek_imp <span class="variable">#(T, this_type)</span> peek_export;</span><br><span class="line">    </span><br><span class="line">    uvm_get_peek_imp <span class="variable">#(T, this_type)</span> blocking_get_peek_export;</span><br><span class="line">    uvm_get_peek_imp <span class="variable">#(T, this_type)</span> nonblocking_get_peek_export;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name, uvm_component parent = <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">super</span><span class="variable">.new</span>(name, parent);</span><br><span class="line">        </span><br><span class="line">        put_export = <span class="keyword">new</span>(<span class="string">&quot;put_export&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">        blocking_put_export     = put_export;</span><br><span class="line">        nonblocking_put_export  = put_export;</span><br><span class="line">        </span><br><span class="line">        get_peek_export = <span class="keyword">new</span>(<span class="string">&quot;get_peek_export&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">        blocking_get_peek_export    = get_peek_export;</span><br><span class="line">        nonblocking_get_peek_export = get_peek_export;</span><br><span class="line">        blocking_get_export         = get_peek_export;</span><br><span class="line">        nonblocking_get_export      = get_peek_export;</span><br><span class="line">        get_export                  = get_peek_export;</span><br><span class="line">        blocking_peek_export        = get_peek_export;</span><br><span class="line">        nonblocking_peek_export     = get_peek_export;</span><br><span class="line">        peek_export                 = get_peek_export;</span><br><span class="line">        </span><br><span class="line">        put_ap = <span class="keyword">new</span>(<span class="string">&quot;put_ap&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">        get_ap = <span class="keyword">new</span>(<span class="string">&quot;get_ap&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">endfunction</span></span><br></pre></td></tr></table></figure>
<h2 id="analysis-fifo">Analysis FIFO</h2>
<h3 id="uvm_tlm_analysis_fifo">uvm_tlm_analysis_fifo</h3>
<p><img src="/2022/04/03/tlm/image-20220403144951278.png"
alt="image-20220403144951278" /></p>
<p><code>uvm_tlm_analysis_fifo</code> is a specialization of
<code>uvm_tlm_fifo</code></p>
<ul>
<li>Intended to buffer write transactions between the UVC monitor
analysis port and scoreboard</li>
</ul>
<p>It has the following characteristics:</p>
<ul>
<li>Unbounded (size=0)</li>
<li><code>analysis_export</code> connector replaces
<code>put_export</code>
<ul>
<li>Support the analysis <code>write</code> method</li>
</ul></li>
</ul>
<p><img src="/2022/04/03/tlm/image-20220403150326750.png"
alt="image-20220403150326750" /></p>
<blockquote>
<p>By declaring the FIFO in the scoreboard, we can <code>get</code>
directly from the FIFO output.</p>
<p>However the write side connection of the FIFO to the interface UVC
monitor analysis port must be made (usually) in the testbench which has
visibility of both UVC and scoreboard components. The connection is made
using a connect method call inside the connect phase method</p>
</blockquote>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> uvm_tlm_analysis_fifo <span class="variable">#(type T = int) extends uvm_tlm_fifo #(T)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Port: analysis_export #(T)</span></span><br><span class="line">  <span class="comment">//  </span></span><br><span class="line">  <span class="comment">// The analysis_export provides the write method to all connected analysis</span></span><br><span class="line">  <span class="comment">// ports and parent exports:</span></span><br><span class="line">  <span class="comment">//  </span></span><br><span class="line">  <span class="comment">//|  function void write (T t)</span></span><br><span class="line">  <span class="comment">//  </span></span><br><span class="line">  <span class="comment">// Access via ports bound to this export is the normal mechanism for writing</span></span><br><span class="line">  <span class="comment">// to an analysis FIFO. </span></span><br><span class="line">  <span class="comment">// See write method of &lt;uvm_tlm_if_base #(T1,T2)&gt; for more information.</span></span><br><span class="line"></span><br><span class="line">  uvm_analysis_imp <span class="variable">#(T, uvm_tlm_analysis_fifo #(T))</span> analysis_export;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Function: new</span></span><br><span class="line">  <span class="comment">//  </span></span><br><span class="line">  <span class="comment">// This is the standard uvm_component constructor. ~name~ is the local name</span></span><br><span class="line">  <span class="comment">// of this component. The ~parent~ should be left unspecified when this</span></span><br><span class="line">  <span class="comment">// component is instantiated in statically elaborated constructs and must be</span></span><br><span class="line">  <span class="comment">// specified when this component is a child of another UVM component.</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name ,  uvm_component parent = <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.new</span>(name, parent, <span class="number">0</span>); <span class="comment">// analysis fifo must be unbounded</span></span><br><span class="line">    analysis_export = <span class="keyword">new</span>(<span class="string">&quot;analysis_export&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">static</span> <span class="keyword">string</span> type_name = <span class="string">&quot;uvm_tlm_analysis_fifo #(T)&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">virtual</span> <span class="keyword">function</span> <span class="keyword">string</span> get_type_name();</span><br><span class="line">    <span class="keyword">return</span> type_name;</span><br><span class="line">  <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">void</span> write(<span class="keyword">input</span> T t); </span><br><span class="line">    <span class="keyword">void</span>&#x27;(<span class="keyword">this</span><span class="variable">.try_put</span>(t)); <span class="comment">// unbounded =&gt; must succeed</span></span><br><span class="line">  <span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">endclass</span></span><br></pre></td></tr></table></figure>
<h2 id="analysis-port-broadcast">Analysis Port Broadcast</h2>
<p><img src="/2022/04/03/tlm/image-20220403152922101.png"
alt="image-20220403152922101" /></p>
<p>Analysis ports can (uniquely) be connected to any number of
<code>imp</code> connectors, including zero</p>
<p><img src="/2022/04/03/tlm/image-20220403153148158.png"
alt="image-20220403153148158" /></p>
<p>The analysis port in component <em>yapp_monitor</em> will be
connected to both <em>monitor_one</em> and <em>monitor_two</em>
components. Each of the receiving components has an <em>analysis imp
object</em> and a write communication method declared. The write method
must have the same signature - i.e., they must be void functions called
write with a single input argument of type <em>yapp_packet</em>, but
their implementations can be completely different.</p>
<p>When the <code>send_yapp</code> prot is connected to both
<em>mone_in</em> and <em>mtwo_in</em> imps, then a single write call
from <em>yapp_monitor</em> executes both write implementations in
<em>monitor_one</em> and <em>monitor_two</em></p>
<p><img src="/2022/04/03/tlm/image-20220403153742706.png"
alt="image-20220403153742706" /></p>
<p>For non-analysis connections</p>
<ul>
<li>the TLM object must be connected to a single destination only, i.e.,
each non-analysis object has exactly <strong>one</strong> connect call.
An object may be used multiple times as the <em>argument</em> to a
connect, but exactly once as the caller. This is called
<strong>many-to-one</strong> connection. For example, many prots can be
connected to a one imp connector</li>
</ul>
<p>For analysis connections</p>
<ul>
<li>a TLM object can be connected to any number of destinations i.e.,
one analysis object can call connect many times. This is called
<strong>one-to-many</strong> connection. For example, one port can be
connected to many imp connectors. <strong>one-to-many</strong> is only
allowed for analysis connections. An analysis connection can also
<em>NOT</em> call connect. An unconnected TLM object is also only
allowed for analysis connections</li>
</ul>
<h2 id="bi-directional-tlm-transport-connection">Bi-Directional TLM
Transport Connection</h2>
<p><img src="/2022/04/03/tlm/image-20220403160248099.png"
alt="image-20220403160248099" /></p>
<p>Connector syntax</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uvm_blocking_transport_XXX <span class="variable">#(type REA, type RSP)</span></span><br><span class="line">uvm_nonblocking_transport_XXX <span class="variable">#(type REQ, type RSP)</span></span><br><span class="line">uvm_transport_XXX <span class="variable">#(type REQ, type RSP)</span></span><br></pre></td></tr></table></figure>
<p>Communication methods</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">task</span> transport(REQ request, <span class="keyword">output</span> RSP response)</span><br><span class="line">    <span class="keyword">function</span> <span class="keyword">bit</span> nb_transport(REQ request, <span class="keyword">output</span> RSP response)</span><br></pre></td></tr></table></figure>
<h2 id="gotchas">Gotchas</h2>
<p>FIFO/analysis FIFOs do not perform any cloning on input transactions.
Therefore, you will need to check that the UVC monitors collect every
transaction into a different instance to avoid overwriting data in the
FIFOs</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/02/hier-conn-export-uvm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/02/hier-conn-export-uvm/" class="post-title-link" itemprop="url">Hierarchical Connections and Exports UVM</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-04-02 11:24:09" itemprop="dateCreated datePublished" datetime="2022-04-02T11:24:09+00:00">2022-04-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-14 08:57:43" itemprop="dateModified" datetime="2023-11-14T08:57:43+00:00">2023-11-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/digital/" itemprop="url" rel="index"><span itemprop="name">digital</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>imp</code> and <code>port</code> connectors are sufficient for
modeling most connections, but there is third connector,
<code>export</code>, which is used exclusively in hierarchical
connections.</p>
<p>Normally hierarchical routing is not required. A <code>port</code> on
an UVC monitor can be connected directly to an <code>imp</code> in a
scoreboard by specifying full hierarchical pathname (e.g.,
env.agent.monitor.analysis_port). The structure of an UVC is fixed and
so the user knows to look in the monitor component for the analysis
ports.</p>
<p>However the internal hierarchy of a module UVC is more arbitrary, and
it may be convenient to route all the module UVC connectors to the top
level to allow use without knowledge of the internal structure.</p>
<p>On the initiator side</p>
<ul>
<li>ports are routed up the hierarchy via other port instances</li>
</ul>
<p>On the target side</p>
<ul>
<li>only the component which defines the communication method is allowed
to have an <code>imp</code> instance. So we need a third object to route
connections up the target side hierarchy - <code>export</code></li>
</ul>
<p>The hierarchical route must be connected at each level in the
direction of control flow:</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">initiator<span class="variable">.connect</span>(target)</span><br></pre></td></tr></table></figure>
<p>Connection rules are as follows:</p>
<ul>
<li><code>port</code> initiators can be connected to <code>port</code>,
<code>export</code> or <code>imp</code> targets</li>
<li><code>export</code> initiators can be connected to
<code>export</code> or <code>imp</code> targets</li>
<li><code>imp</code> cannot be connection initiator. <code>imp</code> is
target only and is always the last connection object on a route</li>
</ul>
<p><strong>uvm_analysis_port</strong></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> uvm_analysis_port # (</span><br><span class="line">   	<span class="keyword">type</span> 	T	 = 	<span class="keyword">int</span></span><br><span class="line">) <span class="keyword">extends</span> uvm_port_base # (uvm_tlm_if_base <span class="variable">#(T,T))</span></span><br></pre></td></tr></table></figure>
<p><strong>uvm_analysis_port</strong></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> uvm_analysis_port # (</span><br><span class="line">   	<span class="keyword">type</span> 	T	 = 	<span class="keyword">int</span></span><br><span class="line">) <span class="keyword">extends</span> uvm_port_base # (uvm_tlm_if_base <span class="variable">#(T,T))</span></span><br></pre></td></tr></table></figure>
<p><strong>uvm_analysis_imp</strong></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> uvm_analysis_imp #(</span><br><span class="line">   	<span class="keyword">type</span> 	T	 = 	<span class="keyword">int</span>,</span><br><span class="line">   	<span class="keyword">type</span> 	IMP	 = 	<span class="keyword">int</span></span><br><span class="line">) <span class="keyword">extends</span> uvm_port_base <span class="variable">#(uvm_tlm_if_base #(T,T))</span></span><br></pre></td></tr></table></figure>
<p><strong>QA</strong></p>
<ol type="1">
<li><p>What are the three distinct functions of a scoreboard?</p>
<p>Reference model, expected data storage and comparison</p></li>
<li><p>To how many consumer components can an analysis port be
connected?</p>
<p>Any number, including zero</p></li>
<li><p>What are the names of the two declarations made available by the
following macro:</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`uvm_analysis_imp_decl(_possible)</span><br></pre></td></tr></table></figure>
<p>Subclass <code>uvm_analysis_imp_possible</code></p>
<p>Method <code>write_possible</code></p></li>
<li><p>Why should a scoreboard clone the data received by a
<code>write</code> method?</p>
<p>The <code>write</code> method only sends a reference, therefore if
the sending component uses the same reference for every data item,
overwriting of data in the storage function of the scoreboard is
possible without cloning.</p></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/01/rocky-nmcli-network/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/01/rocky-nmcli-network/" class="post-title-link" itemprop="url">network connection using nmcli</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-04-01 01:05:40" itemprop="dateCreated datePublished" datetime="2022-04-01T01:05:40+00:00">2022-04-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-14 08:57:43" itemprop="dateModified" datetime="2023-11-14T08:57:43+00:00">2023-11-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="problem">Problem</h4>
<p>There is no network connection and device is not managed</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ nmcli device status </span><br><span class="line">DEVICE  TYPE      STATE      CONNECTION            </span><br><span class="line">eth0    ethernet  unmanaged  --  </span><br><span class="line">lo      loopback  unmanaged  --  </span><br></pre></td></tr></table></figure>
<p><img
src="/2022/04/01/rocky-nmcli-network/image-20220401011509900.png"
alt="image-20220401011509900" /></p>
<h4 id="solution">solution</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nmcli networking on</span><br></pre></td></tr></table></figure>
<p>Then, <strong>eth0</strong> is connected</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ nmcli device status </span><br><span class="line">DEVICE  TYPE      STATE      CONNECTION            </span><br><span class="line">eth0    ethernet  connected  Ethernet connection 1 </span><br><span class="line">lo      loopback  unmanaged  --  </span><br></pre></td></tr></table></figure>
<p><img
src="/2022/04/01/rocky-nmcli-network/image-20220401011543866.png"
alt="image-20220401011543866" /></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/28/complex-uvm-topo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/28/complex-uvm-topo/" class="post-title-link" itemprop="url">complex uvm project topology</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-03-28 20:33:44" itemprop="dateCreated datePublished" datetime="2022-03-28T20:33:44+00:00">2022-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-14 08:57:43" itemprop="dateModified" datetime="2023-11-14T08:57:43+00:00">2023-11-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/digital/" itemprop="url" rel="index"><span itemprop="name">digital</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img src="/2022/03/28/complex-uvm-topo/topo.drawio.svg"
alt="topo.drawio" /></p>
<h2 id="compile">compile</h2>
<ul>
<li><code>-incdir</code> for all UVC's `<code>include</code></li>
<li>all pkg.sv</li>
<li>all if.sv</li>
<li>all RTL DUT</li>
<li>uvm top module</li>
</ul>
<h2 id="uvm-top.sv">uvm top.sv</h2>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> tb_top;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// import the UVM library</span></span><br><span class="line">  <span class="keyword">import</span> uvm_pkg::*;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// include the UVM macros</span></span><br><span class="line">  <span class="meta">`<span class="keyword">include</span> &quot;uvm_macros.svh&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// import the yapp UVC</span></span><br><span class="line">  <span class="keyword">import</span> yapp_pkg::*;</span><br><span class="line">  <span class="keyword">import</span> hbus_pkg::*;</span><br><span class="line">  <span class="keyword">import</span> channel_pkg::*;</span><br><span class="line">  <span class="keyword">import</span> clock_and_reset_pkg::*;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// include the test library file</span></span><br><span class="line">  <span class="meta">`<span class="keyword">include</span> &quot;router_tb.sv&quot;</span></span><br><span class="line">  <span class="meta">`<span class="keyword">include</span> &quot;router_test_lib.sv&quot;</span></span><br><span class="line">    </span><br><span class="line">  <span class="keyword">initial</span> <span class="keyword">begin</span> </span><br><span class="line">    yapp_vif_config::set(<span class="literal">null</span>, <span class="string">&quot;uvm_test_top.tb.yapp.tx_agent.*&quot;</span>, <span class="string">&quot;vif&quot;</span>, hw_top<span class="variable">.in0</span>);</span><br><span class="line">    hbus_vif_config::set(<span class="literal">null</span>, <span class="string">&quot;uvm_test_top.tb.hbus.*&quot;</span>, <span class="string">&quot;vif&quot;</span>, hw_top<span class="variable">.hif</span> ); </span><br><span class="line">    channel_vif_config::set(<span class="literal">null</span>, <span class="string">&quot;uvm_test_top.tb.chan0.*&quot;</span>, <span class="string">&quot;vif&quot;</span>, hw_top<span class="variable">.ch0</span>);</span><br><span class="line">    channel_vif_config::set(<span class="literal">null</span>, <span class="string">&quot;uvm_test_top.tb.chan1.*&quot;</span>, <span class="string">&quot;vif&quot;</span>, hw_top<span class="variable">.ch1</span>);</span><br><span class="line">    channel_vif_config::set(<span class="literal">null</span>, <span class="string">&quot;uvm_test_top.tb.chan2.*&quot;</span>, <span class="string">&quot;vif&quot;</span>, hw_top<span class="variable">.ch2</span>);</span><br><span class="line">    clock_and_reset_vif_config::set(<span class="literal">null</span>, <span class="string">&quot;uvm_test_top.tb.clock_and_reset.*&quot;</span>, <span class="string">&quot;vif&quot;</span>, hw_top<span class="variable">.clk_rst_if</span>);</span><br><span class="line">    run_test();</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span> : tb_top</span><br></pre></td></tr></table></figure>
<h2 id="rtl-top">RTL top</h2>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> hw_top;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Clock and reset signals</span></span><br><span class="line">  <span class="keyword">logic</span> [<span class="number">31</span>:<span class="number">0</span>]  clock_period;</span><br><span class="line">  <span class="keyword">logic</span>         run_clock;</span><br><span class="line">  <span class="keyword">logic</span>         clock;</span><br><span class="line">  <span class="keyword">logic</span>         reset;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// YAPP Interface to the DUT</span></span><br><span class="line">  yapp_if in0(clock, reset);</span><br><span class="line">  <span class="comment">// reset will now be generated by the Clock and Reset UVC</span></span><br><span class="line">  <span class="comment">// input: clock; output: reset, run_clock, clock_period</span></span><br><span class="line">  clock_and_reset_if clk_rst_if(<span class="variable">.clock</span>(clock), <span class="variable">.reset</span>(reset), <span class="variable">.run_clock</span>(run_clock), <span class="variable">.clock_period</span>(clock_period));</span><br><span class="line">  hbus_if hif(<span class="variable">.clock</span>(clock), <span class="variable">.reset</span>(reset));</span><br><span class="line"></span><br><span class="line">  channel_if ch0(<span class="variable">.clock</span>(clock), <span class="variable">.reset</span>(reset));</span><br><span class="line">  channel_if ch1(<span class="variable">.clock</span>(clock), <span class="variable">.reset</span>(reset));</span><br><span class="line">  channel_if ch2(<span class="variable">.clock</span>(clock), <span class="variable">.reset</span>(reset));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// CLKGEN module generates clock</span></span><br><span class="line">  clkgen clkgen (</span><br><span class="line">    <span class="variable">.clock</span>(clock),</span><br><span class="line">    <span class="variable">.run_clock</span>(run_clock),</span><br><span class="line">    <span class="variable">.clock_period</span>(clock_period)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  yapp_router dut(</span><br><span class="line">      ...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>
<h2 id="pkg.sv">pkg.sv</h2>
<p>`<code>include</code> all related uvm class in
<strong>pgk.sv</strong></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> yapp_pkg;</span><br><span class="line"><span class="keyword">import</span> uvm_pkg::*;</span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;uvm_macros.svh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> uvm_config_db<span class="variable">#(virtual yapp_if)</span> yapp_vif_config;</span><br><span class="line"></span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;yapp_packet.sv&quot;</span></span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;yapp_tx_monitor.sv&quot;</span></span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;yapp_tx_sequencer.sv&quot;</span></span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;yapp_tx_seqs.sv&quot;</span></span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;yapp_tx_driver.sv&quot;</span></span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;yapp_tx_agent.sv&quot;</span></span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;yapp_env.sv&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">endpackage</span></span><br></pre></td></tr></table></figure>
<h2 id="if.sv">if.sv</h2>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> yapp_if (<span class="keyword">input</span> clock, <span class="keyword">input</span> reset );</span><br><span class="line"><span class="keyword">timeunit</span> <span class="number">1</span>ns;</span><br><span class="line"><span class="keyword">timeprecision</span> <span class="number">100</span>ps;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> uvm_pkg::*;</span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;uvm_macros.svh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> yapp_pkg::*;</span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line"><span class="keyword">endinterface</span> : yapp_if</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/24/pkg-import-compile-sv/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/24/pkg-import-compile-sv/" class="post-title-link" itemprop="url">import package in SystemVerilog compilation</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-03-24 21:06:54" itemprop="dateCreated datePublished" datetime="2022-03-24T21:06:54+00:00">2022-03-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-14 08:57:43" itemprop="dateModified" datetime="2023-11-14T08:57:43+00:00">2023-11-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/digital/" itemprop="url" rel="index"><span itemprop="name">digital</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="import-and-compile-order">import and compile order</h3>
<h4 id="project">project</h4>
<p><strong>yapp_pkg.sv</strong></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> yapp_pkg;</span><br><span class="line"><span class="keyword">import</span> uvm_pkg::*;</span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;uvm_macros.svh&quot;</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">typedef</span> uvm_config_db<span class="variable">#(virtual yapp_if)</span> yapp_vif_config;</span><br><span class="line"></span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;yapp_packet.sv&quot;</span></span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;yapp_tx_monitor.sv&quot;</span></span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;yapp_tx_sequencer.sv&quot;</span></span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;yapp_tx_seqs.sv&quot;</span></span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;yapp_tx_driver.sv&quot;</span></span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;yapp_tx_agent.sv&quot;</span></span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;yapp_env.sv&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">endpackage</span></span><br></pre></td></tr></table></figure>
<p><strong>yapp_tx_monitor.sv</strong></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> yapp_tx_monitor <span class="keyword">extends</span> uvm_monitor;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Collected Data handle</span></span><br><span class="line">  yapp_packet pkt;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Count packets collected</span></span><br><span class="line">  <span class="keyword">int</span> num_pkt_col;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// component macro</span></span><br><span class="line">  `uvm_component_utils_begin(yapp_tx_monitor)</span><br><span class="line">    `uvm_field_int(num_pkt_col, UVM_ALL_ON + UVM_NOCOMPARE)</span><br><span class="line">  `uvm_component_utils_end</span><br><span class="line"><span class="comment">/////////////////// virtual interface ////////////////////</span></span><br><span class="line">  <span class="keyword">virtual</span> <span class="keyword">interface</span> yapp_if vif;</span><br><span class="line"><span class="comment">/////////////////////////////////////////////////////////</span></span><br><span class="line">      </span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">new</span> (<span class="keyword">string</span> name, uvm_component parent);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.new</span>(name, parent);</span><br><span class="line">  <span class="keyword">endfunction</span> : <span class="keyword">new</span></span><br><span class="line">      ...</span><br><span class="line">     </span><br><span class="line"><span class="keyword">endclass</span> : yapp_tx_monitor</span><br></pre></td></tr></table></figure>
<p><strong>yapp_tx_driver.sv</strong></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> yapp_tx_driver <span class="keyword">extends</span> uvm_driver <span class="variable">#(yapp_packet)</span>;</span><br><span class="line"></span><br><span class="line"> <span class="comment">////////////////// virtual interface ////////////////////</span></span><br><span class="line">  <span class="keyword">virtual</span> <span class="keyword">interface</span> yapp_if vif;</span><br><span class="line"> <span class="comment">/////////////////////////////////////////////////////</span></span><br><span class="line">      </span><br><span class="line">  <span class="keyword">int</span> num_sent;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// component macro</span></span><br><span class="line">  `uvm_component_utils_begin(yapp_tx_driver)</span><br><span class="line">    `uvm_field_int(num_sent, UVM_ALL_ON + UVM_NOCOMPARE)</span><br><span class="line">  `uvm_component_utils_end</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Constructor - required syntax for UVM automation and utilities</span></span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">new</span> (<span class="keyword">string</span> name, uvm_component parent);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.new</span>(name, parent);</span><br><span class="line">  <span class="keyword">endfunction</span> : <span class="keyword">new</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">void</span> start_of_simulation_phase(uvm_phase phase);</span><br><span class="line">    `uvm_info(get_type_name(), &#123;<span class="string">&quot;start of simulation for &quot;</span>, get_full_name()&#125;, UVM_HIGH)</span><br><span class="line">  <span class="keyword">endfunction</span> : start_of_simulation_phase</span><br><span class="line">      ...</span><br><span class="line">     </span><br><span class="line"><span class="keyword">endclass</span> : yapp_tx_driver </span><br></pre></td></tr></table></figure>
<p><strong>yapp_if.sv</strong></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> yapp_if (<span class="keyword">input</span> clock, <span class="keyword">input</span> reset );</span><br><span class="line"><span class="keyword">timeunit</span> <span class="number">1</span>ns;</span><br><span class="line"><span class="keyword">timeprecision</span> <span class="number">100</span>ps;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> uvm_pkg::*;</span><br><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;uvm_macros.svh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">////////////////// import package //////////////////////</span></span><br><span class="line"><span class="keyword">import</span> yapp_pkg::*;</span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////    </span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Actual Signals</span></span><br><span class="line">  <span class="keyword">logic</span>              in_data_vld;</span><br><span class="line">  <span class="keyword">logic</span>              in_suspend;</span><br><span class="line">  <span class="keyword">logic</span>       [<span class="number">7</span>:<span class="number">0</span>]  in_data;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// signal for transaction recording</span></span><br><span class="line">  <span class="keyword">bit</span> monstart, drvstart;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// local storage for payload</span></span><br><span class="line">  <span class="keyword">logic</span> [<span class="number">7</span>:<span class="number">0</span>] payload_mem [<span class="number">0</span>:<span class="number">63</span>];</span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line"><span class="keyword">endinterface</span> : yapp_if</span><br></pre></td></tr></table></figure>
<blockquote>
<p>virtual interface is in package;</p>
<p><code>yapp_pkg</code> is imported into interface</p>
</blockquote>
<blockquote>
<p>!!!
<code>typedef uvm_config_db#(virtual yapp_if) yapp_vif_config;</code> is
<strong>forward declaration</strong></p>
<p><em>A forward <code>typedef</code> declares an identifier as a type
in advance of the full definition of that type</em></p>
</blockquote>
<h4 id="vcs-compile">VCS compile</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vcs -full64 -R -sverilog  -ntb_opts uvm-1.2 +UVM_TESTNAME=short_yapp_012_test  -f vcs.f  </span><br></pre></td></tr></table></figure>
<p><strong>vcs.f</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-timescale=1ns/1ns</span><br><span class="line"></span><br><span class="line">+incdir+../sv</span><br><span class="line"></span><br><span class="line">../sv/yapp_if.sv</span><br><span class="line">../sv/yapp_pkg.sv</span><br><span class="line">./clkgen.sv</span><br><span class="line">./hw_top.sv</span><br><span class="line">./tb_top.sv</span><br></pre></td></tr></table></figure>
<p><em>output ERROR</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Error-[SV-LCM-PND] Package not defined</span><br><span class="line">../sv/yapp_if.sv, 18</span><br><span class="line">yapp_if, &quot;yapp_pkg::&quot;</span><br><span class="line">  Package scope resolution failed. Token &#x27;yapp_pkg&#x27; is not a package. </span><br><span class="line">  Originating module &#x27;yapp_if&#x27;.</span><br><span class="line">  Move package definition before the use of the package.</span><br></pre></td></tr></table></figure>
<h4 id="xrun-compile">xrun compile</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xrun -f xrun.f</span><br></pre></td></tr></table></figure>
<p><strong>xrun.f</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-64</span><br><span class="line"></span><br><span class="line">-uvmhome  CDNS-1.2</span><br><span class="line"></span><br><span class="line">// incdir for include files</span><br><span class="line">-incdir ../sv</span><br><span class="line"></span><br><span class="line">+UVM_TESTNAME=short_yapp_012_test</span><br><span class="line"></span><br><span class="line">-timescale 1ns/1ns</span><br><span class="line"></span><br><span class="line">// compile files</span><br><span class="line">../sv/yapp_if.sv</span><br><span class="line">../sv/yapp_pkg.sv</span><br><span class="line">./clkgen.sv</span><br><span class="line">./hw_top.sv</span><br><span class="line">./tb_top.sv</span><br></pre></td></tr></table></figure>
<p><em>output Error</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">file: ../sv/yapp_if.sv</span><br><span class="line">import yapp_pkg::*;</span><br><span class="line">              |</span><br><span class="line">xmvlog: *E,NOPBIND (../sv/yapp_if.sv,18|14): Package yapp_pkg could not be bound.</span><br><span class="line">        interface worklib.yapp_if:sv</span><br><span class="line">                errors: 1, warnings: 0</span><br></pre></td></tr></table></figure>
<h4 id="solution">solution</h4>
<p>place <code>../sv/yapp_pkg.sv</code> before
<code>../sv/yapp_if.sv</code>.</p>
<blockquote>
<p>In this particular example, <code>yapp_pkg</code> is NOT needed in
interface. just delete <code>import yapp_pkg::*</code> is enough in
<code>../sv/yapp_if.sv</code></p>
</blockquote>
<h3 id="plain-example">plain example</h3>
<p>The order of compilation unit DON'T matter</p>
<h4 id="project-1">project</h4>
<p><strong>hw_top.sv</strong></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> hw_top;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Clock and reset signals</span></span><br><span class="line">  <span class="keyword">logic</span> [<span class="number">31</span>:<span class="number">0</span>]  clock_period;</span><br><span class="line">  <span class="keyword">logic</span>         run_clock;</span><br><span class="line">  <span class="keyword">logic</span>         clock;</span><br><span class="line">  <span class="keyword">logic</span>         reset;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// YAPP Interface to the DUT</span></span><br><span class="line">  yapp_if in0(clock, reset);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// CLKGEN module generates clock</span></span><br><span class="line">  clkgen clkgen (</span><br><span class="line">    <span class="variable">.clock</span>(clock),</span><br><span class="line">    <span class="variable">.run_clock</span>(<span class="number">1&#x27;b1</span>),</span><br><span class="line">    <span class="variable">.clock_period</span>(<span class="number">32&#x27;d10</span>)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  yapp_router dut(</span><br><span class="line">    <span class="variable">.reset</span>(reset),</span><br><span class="line">    <span class="variable">.clock</span>(clock),</span><br><span class="line">    <span class="variable">.error</span>(),</span><br><span class="line">    <span class="comment">// YAPP interface signals connection</span></span><br><span class="line">    <span class="variable">.in_data</span>(in0<span class="variable">.in_data</span>),</span><br><span class="line">    <span class="variable">.in_data_vld</span>(in0<span class="variable">.in_data_vld</span>),</span><br><span class="line">    <span class="variable">.in_suspend</span>(in0<span class="variable">.in_suspend</span>),</span><br><span class="line">    <span class="comment">// Output Channels</span></span><br><span class="line">    <span class="comment">//Channel 0   </span></span><br><span class="line">    <span class="variable">.data_0</span>(),</span><br><span class="line">    <span class="variable">.data_vld_0</span>(),</span><br><span class="line">    <span class="variable">.suspend_0</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="comment">//Channel 1   </span></span><br><span class="line">    <span class="variable">.data_1</span>(),</span><br><span class="line">    <span class="variable">.data_vld_1</span>(),</span><br><span class="line">    <span class="variable">.suspend_1</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="comment">//Channel 2   </span></span><br><span class="line">    <span class="variable">.data_2</span>(),  </span><br><span class="line">    <span class="variable">.data_vld_2</span>(),</span><br><span class="line">    <span class="variable">.suspend_2</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="comment">// Host Interface Signals</span></span><br><span class="line">    <span class="variable">.haddr</span>(),</span><br><span class="line">    <span class="variable">.hdata</span>(),</span><br><span class="line">    <span class="variable">.hen</span>(),</span><br><span class="line">    <span class="variable">.hwr_rd</span>());</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">        </span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>
<p><strong>yapp_router.sv</strong></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> yapp_router (<span class="keyword">input</span> clock,                              </span><br><span class="line">                    <span class="keyword">input</span> reset,                            </span><br><span class="line">                    <span class="keyword">output</span> error,</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// Input channel</span></span><br><span class="line">                    <span class="keyword">input</span> [<span class="number">7</span>:<span class="number">0</span>] in_data,                           </span><br><span class="line">                    <span class="keyword">input</span> in_data_vld,                     </span><br><span class="line">                    <span class="keyword">output</span> in_suspend,</span><br><span class="line">                    <span class="comment">// Output Channels</span></span><br><span class="line">                    <span class="keyword">output</span> [<span class="number">7</span>:<span class="number">0</span>] data_0,  <span class="comment">//Channel 0</span></span><br><span class="line">                    <span class="keyword">output</span> <span class="keyword">reg</span> data_vld_0, </span><br><span class="line">                    <span class="keyword">input</span> suspend_0, </span><br><span class="line">                    <span class="keyword">output</span> [<span class="number">7</span>:<span class="number">0</span>] data_1,  <span class="comment">//Channel 1</span></span><br><span class="line">                    <span class="keyword">output</span> <span class="keyword">reg</span> data_vld_1, </span><br><span class="line">                    <span class="keyword">input</span> suspend_1, </span><br><span class="line">                    <span class="keyword">output</span> [<span class="number">7</span>:<span class="number">0</span>] data_2,  <span class="comment">//Channel 2</span></span><br><span class="line">                    <span class="keyword">output</span> <span class="keyword">reg</span> data_vld_2,</span><br><span class="line">                    <span class="keyword">input</span> suspend_2,</span><br><span class="line">     </span><br><span class="line">                    <span class="comment">// Host Interface Signals</span></span><br><span class="line">                    <span class="keyword">input</span> [<span class="number">15</span>:<span class="number">0</span>] haddr,</span><br><span class="line">                    <span class="keyword">inout</span> [<span class="number">7</span>:<span class="number">0</span>] hdata,</span><br><span class="line">                    <span class="keyword">input</span> hen,</span><br><span class="line">                    <span class="keyword">input</span> hwr_rd);                            </span><br><span class="line">...</span><br><span class="line"><span class="keyword">endmodule</span>    </span><br></pre></td></tr></table></figure>
<h4 id="compile">compile</h4>
<p>place <strong>hw_top.sv</strong> <em>before or after</em>
<strong>yapp_router.sv</strong> doesn't matter, the compiler (xrun, vcs)
can compile them successfully.</p>
<h3 id="conclusion">Conclusion</h3>
<p>Always place package before DUT is preferred choice during
compiling.</p>
<h3 id="refernce">refernce</h3>
<p><a
target="_blank" rel="noopener" href="https://verificationacademy.com/forums/systemverilog/class-forward-declaration#answer-41383">class
forward declaration</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/23/Precedence-Rule-uvm-config-db/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/23/Precedence-Rule-uvm-config-db/" class="post-title-link" itemprop="url">Precedence Rule of UVM uvm_config_db::set</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-03-23 18:48:41" itemprop="dateCreated datePublished" datetime="2022-03-23T18:48:41+00:00">2022-03-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-14 08:57:43" itemprop="dateModified" datetime="2023-11-14T08:57:43+00:00">2023-11-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/digital/" itemprop="url" rel="index"><span itemprop="name">digital</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a
target="_blank" rel="noopener" href="https://vlsiverify.com/uvm/uvm_config_db-in-uvm#Precedence_Rule">https://vlsiverify.com/uvm/uvm_config_db-in-uvm#Precedence_Rule</a></p>
<h4 id="two-precedence-rules">Two Precedence rules</h4>
<p>There are two precedence rules applicable to
<code>uvm_config_db</code>. In the <code>build_phase</code>,</p>
<ol type="1">
<li>A <code>set()</code> call in <strong>a context higher up the
component hierarchy</strong> takes precedence over a <code>set()</code>
call that occurs lower in the hierarchical path.</li>
<li>On having <strong>same context field</strong>, <strong>the
last</strong> <code>set()</code> call takes precedence over the earlier
<code>set()</code> call.</li>
</ol>
<h4 id="example-for-rule---1">Example for rule - 1</h4>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">`<span class="keyword">include</span> &quot;uvm_macros.svh&quot;</span></span><br><span class="line"><span class="keyword">import</span> uvm_pkg::*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> component_A <span class="keyword">extends</span> uvm_component;</span><br><span class="line">  <span class="keyword">int</span> id;</span><br><span class="line">  `uvm_component_utils(component_A)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name = <span class="string">&quot;component_A&quot;</span>, uvm_component parent = <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.new</span>(name, parent);</span><br><span class="line">    id = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">endfunction</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> display();</span><br><span class="line">    `uvm_info(get_type_name(), <span class="built_in">$sformatf</span>(<span class="string">&quot;inside component_A: id = %0d&quot;</span>, id), UVM_LOW);</span><br><span class="line">  <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> component_B <span class="keyword">extends</span> component_A;</span><br><span class="line">  <span class="keyword">int</span> receive_value;</span><br><span class="line">  <span class="keyword">int</span> id;</span><br><span class="line">  </span><br><span class="line">  `uvm_component_utils(component_B)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name = <span class="string">&quot;component_B&quot;</span>, uvm_component parent = <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.new</span>(name, parent);</span><br><span class="line">    id = <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">endfunction</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">void</span> build_phase(uvm_phase phase);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.build_phase</span>(phase);</span><br><span class="line">    <span class="keyword">if</span>(!uvm_config_db <span class="variable">#(int)::get(this, &quot;*&quot;, &quot;value&quot;, receive_value))</span></span><br><span class="line">      `uvm_fatal(get_type_name(), <span class="string">&quot;get failed for resource in this scope&quot;</span>);    </span><br><span class="line">  <span class="keyword">endfunction</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> display();</span><br><span class="line">    `uvm_info(get_type_name(), <span class="built_in">$sformatf</span>(<span class="string">&quot;inside component_B: id = %0d, receive_value = %0d&quot;</span>, id, receive_value), UVM_LOW);</span><br><span class="line">  <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> env <span class="keyword">extends</span> uvm_env;</span><br><span class="line">  `uvm_component_utils(env)</span><br><span class="line">  component_A comp_A;</span><br><span class="line">  component_B comp_B;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name = <span class="string">&quot;env&quot;</span>, uvm_component parent = <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.new</span>(name, parent);</span><br><span class="line">  <span class="keyword">endfunction</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">void</span> build_phase(uvm_phase phase);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.build_phase</span>(phase);</span><br><span class="line">    comp_A = component_A ::type_id::create(<span class="string">&quot;comp_A&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">    comp_B = component_B ::type_id::create(<span class="string">&quot;comp_B&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">    </span><br><span class="line">    uvm_config_db <span class="variable">#(int)::set(this, &quot;*&quot;, &quot;value&quot;, 200)</span>;</span><br><span class="line">  <span class="keyword">endfunction</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">task</span> run_phase(uvm_phase phase);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.run_phase</span>(phase);</span><br><span class="line">    <span class="keyword">void</span>&#x27;(comp_A<span class="variable">.display</span>());</span><br><span class="line">    <span class="keyword">void</span>&#x27;(comp_B<span class="variable">.display</span>());</span><br><span class="line">  <span class="keyword">endtask</span></span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> my_test <span class="keyword">extends</span> uvm_test;</span><br><span class="line">  <span class="keyword">bit</span> control;</span><br><span class="line">  `uvm_component_utils(my_test)</span><br><span class="line">  env env_o;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name = <span class="string">&quot;my_test&quot;</span>, uvm_component parent = <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.new</span>(name, parent);</span><br><span class="line">  <span class="keyword">endfunction</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">void</span> build_phase(uvm_phase phase);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.build_phase</span>(phase);</span><br><span class="line">    <span class="comment">////////////////////////////////////////////////////</span></span><br><span class="line">      env_o = env::type_id::create(<span class="string">&quot;env_o&quot;</span>, <span class="keyword">this</span>);				<span class="comment">// line 99</span></span><br><span class="line">    </span><br><span class="line">      uvm_config_db <span class="variable">#(int)::set(null, &quot;*&quot;, &quot;value&quot;, 100)</span>;		<span class="comment">// line 101</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////</span></span><br><span class="line">  <span class="keyword">endfunction</span></span><br><span class="line">   </span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">void</span> end_of_elaboration_phase(uvm_phase phase);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.end_of_elaboration_phase</span>(phase);</span><br><span class="line">    uvm_top<span class="variable">.print_topology</span>();</span><br><span class="line">  <span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">endclass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">module</span> tb_top;</span><br><span class="line">  <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">    run_test(<span class="string">&quot;my_test&quot;</span>);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">UVM_INFO /xcelium20.09/tools//methodology/UVM/CDNS-1.2/sv/src/base/uvm_root.svh(605) @ 0: reporter [UVMTOP] UVM testbench topology:</span><br><span class="line">--------------------------------------</span><br><span class="line">Name          Type         Size  Value</span><br><span class="line">--------------------------------------</span><br><span class="line">uvm_test_top  my_test      -     @1810</span><br><span class="line">  env_o       env          -     @1877</span><br><span class="line">    comp_A    component_A  -     @1922</span><br><span class="line">    comp_B    component_B  -     @1953</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">UVM_INFO testbench.sv(14) @ 0: uvm_test_top.env_o.comp_A [component_A] inside component_A: id = 1</span><br><span class="line">UVM_INFO testbench.sv(36) @ 0: uvm_test_top.env_o.comp_B [component_B] inside component_B: id = 2, receive_value = 100</span><br></pre></td></tr></table></figure>
<blockquote>
<p>As you can see , the <code>uvm_config_db::set</code> is after the
factory <code>type_id::create</code>, but <strong>receive_value</strong>
is still <strong>100</strong>, I believe that <code>build_phase</code>
of upper hierarchy finish first before create lower components.</p>
<p>But the recommendation in literature and many web is place
<code>uvm_config_db::set</code> before <code>create</code></p>
</blockquote>
<h4 id="simple-example-for-rule---2">Simple Example for rule - 2</h4>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uvm_config_db <span class="variable">#(int)::set(null, &quot;*&quot;, &quot;value&quot;, 100)</span>;</span><br><span class="line">uvm_config_db <span class="variable">#(int)::set(null, &quot;*&quot;, &quot;value&quot;, 200)</span>;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.edaplayground.com/x/jgvh">[complete
code]</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">UVM_INFO /xcelium20.09/tools//methodology/UVM/CDNS-1.2/sv/src/base/uvm_root.svh(605) @ 0: reporter [UVMTOP] UVM testbench topology:</span><br><span class="line">--------------------------------------</span><br><span class="line">Name          Type         Size  Value</span><br><span class="line">--------------------------------------</span><br><span class="line">uvm_test_top  my_test      -     @1810</span><br><span class="line">  env_o       env          -     @1877</span><br><span class="line">    comp_A    component_A  -     @1924</span><br><span class="line">    comp_B    component_B  -     @1955</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">UVM_INFO testbench.sv(14) @ 0: uvm_test_top.env_o.comp_A [component_A] inside component_A: id = 1</span><br><span class="line">UVM_INFO testbench.sv(36) @ 0: uvm_test_top.env_o.comp_B [component_B] inside component_B: id = 2, receive_value = 200</span><br></pre></td></tr></table></figure>
<h3 id="another-example-for-rule---2">Another Example for rule - 2</h3>
<p>The <code>set</code> in <code>super.build_phase</code> and
<code>set</code> in current <code>build_phase</code> are at the
<strong>same hierarchy</strong>, so <strong>rule-2</strong> apply</p>
<p>base_test</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> base_test <span class="keyword">extends</span> uvm_test;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// component macro</span></span><br><span class="line">  `uvm_component_utils(base_test)</span><br><span class="line"></span><br><span class="line">  router_tb tb;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// component constructor</span></span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name, uvm_component parent);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.new</span>(name, parent);</span><br><span class="line">  <span class="keyword">endfunction</span> : <span class="keyword">new</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// UVM build_phase()</span></span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">void</span> build_phase(uvm_phase phase);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.build_phase</span>(phase);</span><br><span class="line">    uvm_config_int::set(<span class="keyword">this</span>, <span class="string">&quot;*&quot;</span>, <span class="string">&quot;recording_detail&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    uvm_config_wrapper::set(<span class="keyword">this</span>, <span class="string">&quot;tb.yapp.tx_agent.sequencer.run_phase&quot;</span>, </span><br><span class="line">                                                      <span class="string">&quot;default_sequence&quot;</span>,</span><br><span class="line">                                                      yapp_5_packets::get_type());</span><br><span class="line">    tb = router_tb::type_id::create(<span class="string">&quot;tb&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">endfunction</span> : build_phase</span><br><span class="line"></span><br><span class="line"><span class="keyword">endclass</span> : base_test</span><br></pre></td></tr></table></figure>
<h4 id="test2---one">test2 - One</h4>
<blockquote>
<p><code>yapp_incr_payload_seq</code> override the
<code>yapp_5_packets</code> in <code>super.build_phase(phase)</code>,
<strong>yapp_incr_payload_seq</strong> is used.</p>
</blockquote>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> test2 <span class="keyword">extends</span> base_test;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// component macro</span></span><br><span class="line">  `uvm_component_utils(test2)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// component constructor</span></span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name, uvm_component parent);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.new</span>(name, parent);</span><br><span class="line">  <span class="keyword">endfunction</span> : <span class="keyword">new</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">void</span> build_phase(uvm_phase phase);</span><br><span class="line">    yapp_packet::type_id::set_type_override(short_yapp_packet::get_type());</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.build_phase</span>(phase);</span><br><span class="line">    uvm_config_wrapper::set(<span class="keyword">this</span>, <span class="string">&quot;tb.yapp.tx_agent.sequencer.run_phase&quot;</span>, </span><br><span class="line">                                                      <span class="string">&quot;default_sequence&quot;</span>,</span><br><span class="line">                                                      yapp_incr_payload_seq::get_type());</span><br><span class="line">  <span class="keyword">endfunction</span> : build_phase</span><br><span class="line"></span><br><span class="line"><span class="keyword">endclass</span> : test2</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">---------------------------------------------------------------------------------------------------------------------                   </span><br><span class="line">Name                           Type               Size  Value</span><br><span class="line">---------------------------------------------------------------------------------------------------------------------                   </span><br><span class="line">req                            short_yapp_packet  -     @3045</span><br><span class="line">  length                       integral           6     &#x27;h5</span><br><span class="line">  addr                         integral           2     &#x27;h1</span><br><span class="line">  payload                      da(integral)       5     -</span><br><span class="line">    [0]                        integral           8     &#x27;h0</span><br><span class="line">    [1]                        integral           8     &#x27;h1</span><br><span class="line">    [2]                        integral           8     &#x27;h2</span><br><span class="line">    [3]                        integral           8     &#x27;h3</span><br><span class="line">    [4]                        integral           8     &#x27;h4</span><br><span class="line">  parity                       integral           8     &#x27;h11</span><br><span class="line">  parity_type                  parity_t           1     GOOD_PARITY</span><br><span class="line">  packet_delay                 integral           32    &#x27;d19</span><br><span class="line">  begin_time                   time               64    0</span><br><span class="line">  depth                        int                32    &#x27;d2</span><br><span class="line">  parent sequence (name)       string             21    yapp_incr_payload_seq                                                           </span><br><span class="line">  parent sequence (full name)  string             61    uvm_test_top.tb.yapp.tx_agent.sequencer.yapp_incr_payload_seq                   </span><br><span class="line">  sequencer                    string             39    uvm_test_top.tb.yapp.tx_agent.sequencer                                         </span><br><span class="line">---------------------------------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<h4 id="test2---two">test2 - Two</h4>
<blockquote>
<p>the <code>yapp_5_packets</code> in
<code>super.build_phase(phase)</code> overide
<code>yapp_incr_payload_seq</code> in test2's <code>build_phase</code>,
<strong>yapp_5_packets</strong> is used</p>
</blockquote>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> test2 <span class="keyword">extends</span> base_test;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// component macro</span></span><br><span class="line">  `uvm_component_utils(test2)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// component constructor</span></span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">new</span>(<span class="keyword">string</span> name, uvm_component parent);</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.new</span>(name, parent);</span><br><span class="line">  <span class="keyword">endfunction</span> : <span class="keyword">new</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="keyword">void</span> build_phase(uvm_phase phase);</span><br><span class="line">    yapp_packet::type_id::set_type_override(short_yapp_packet::get_type());</span><br><span class="line">    uvm_config_wrapper::set(<span class="keyword">this</span>, <span class="string">&quot;tb.yapp.tx_agent.sequencer.run_phase&quot;</span>, </span><br><span class="line">                                                      <span class="string">&quot;default_sequence&quot;</span>,</span><br><span class="line">                                                      yapp_incr_payload_seq::get_type());</span><br><span class="line">    <span class="keyword">super</span><span class="variable">.build_phase</span>(phase);</span><br><span class="line">  <span class="keyword">endfunction</span> : build_phase</span><br><span class="line"></span><br><span class="line"><span class="keyword">endclass</span> : test2</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">--------------------------------------------------------------------------------------------------------------                          </span><br><span class="line">Name                           Type               Size  Value</span><br><span class="line">--------------------------------------------------------------------------------------------------------------                          </span><br><span class="line">req                            short_yapp_packet  -     @3176</span><br><span class="line">  length                       integral           6     &#x27;h6</span><br><span class="line">  addr                         integral           2     &#x27;h1</span><br><span class="line">  payload                      da(integral)       6     -</span><br><span class="line">    [0]                        integral           8     &#x27;h4f</span><br><span class="line">    [1]                        integral           8     &#x27;hbe</span><br><span class="line">    [2]                        integral           8     &#x27;hb</span><br><span class="line">    [3]                        integral           8     &#x27;h1d</span><br><span class="line">    [4]                        integral           8     &#x27;h72</span><br><span class="line">    [5]                        integral           8     &#x27;hc5</span><br><span class="line">  parity                       integral           8     &#x27;h49</span><br><span class="line">  parity_type                  parity_t           1     GOOD_PARITY</span><br><span class="line">  packet_delay                 integral           32    &#x27;d0</span><br><span class="line">  begin_time                   time               64    40</span><br><span class="line">  depth                        int                32    &#x27;d2</span><br><span class="line">  parent sequence (name)       string             14    yapp_5_packets                                                                  </span><br><span class="line">  parent sequence (full name)  string             54    uvm_test_top.tb.yapp.tx_agent.sequencer.yapp_5_packets                          </span><br><span class="line">  sequencer                    string             39    uvm_test_top.tb.yapp.tx_agent.sequencer                                         </span><br><span class="line">-------------------------------------------------------------------------------------------------------------- </span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/22/z-Transform/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/22/z-Transform/" class="post-title-link" itemprop="url">The z-Transform and Its Application</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-03-22 09:31:24" itemprop="dateCreated datePublished" datetime="2022-03-22T09:31:24+00:00">2022-03-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-14 08:57:43" itemprop="dateModified" datetime="2023-11-14T08:57:43+00:00">2023-11-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/dsp/" itemprop="url" rel="index"><span itemprop="name">dsp</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="fir-equalization">FIR Equalization</h2>
<h3 id="frequency-response">Frequency Response</h3>
<p><img src="/2022/03/22/z-Transform/image-20220322093428287.png"
alt="image-20220322093428287" /> <span class="math display">\[
z = e^{j\omega T_s}
\]</span></p>
<h3 id="unit-impulse">Unit impulse</h3>
<p>filter coefficients are <strong>[-0.131, 0.595, -0.274]</strong> and
sampling period is <strong>100ps</strong></p>
<p><img src="/2022/03/22/z-Transform/image-20220428125454912.png"
alt="image-20220428125454912" /></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%% Frequency response</span></span><br><span class="line">w = [<span class="number">-0.131</span>, <span class="number">0.595</span>, <span class="number">-0.274</span>];</span><br><span class="line">Ts = <span class="number">100e-12</span>;</span><br><span class="line">[mag, w] = freqz(w, <span class="number">1</span>, [], <span class="number">1</span>/Ts);</span><br><span class="line">subplot(<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">plot</span>(w/<span class="number">1e9</span>, <span class="number">20</span>*<span class="built_in">log10</span>(<span class="built_in">abs</span>(mag)));</span><br><span class="line">xlabel(<span class="string">&#x27;Freq(GHz)&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;dB&#x27;</span>);</span><br><span class="line">grid on;</span><br><span class="line">title(<span class="string">&#x27;frequency response&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">%% unit impulse response from transfer function</span></span><br><span class="line">subplot(<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">z = tf(<span class="string">&#x27;z&#x27;</span>, Ts);</span><br><span class="line">h = <span class="number">-0.131</span> + <span class="number">0.595</span>*z^(<span class="number">-1</span>) <span class="number">-0.274</span>*z^(<span class="number">-2</span>);</span><br><span class="line">[y, t] = impulse(h);</span><br><span class="line">stem(t*<span class="number">1e10</span>, y*Ts);  <span class="comment">% !!! y*Ts is essential</span></span><br><span class="line">grid on;</span><br><span class="line">title(<span class="string">&quot;unit impulse response&quot;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;Time(\times 100ps)&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;mag&#x27;</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>impulse</code>:</p>
<p>For discrete-time systems, the impulse response is the response to a
unit area pulse of length <code>Ts</code> and height <code>1/Ts</code>,
where <code>Ts</code> is the sample time of the system. (This pulse
approaches <span class="math inline">\(\delta(t)\)</span> as
<code>Ts</code> approaches zero.)</p>
<p>Scale output:</p>
<p>Multiply <code>impulse</code> output with sample period
<code>Ts</code> in order to correct <code>1/Ts</code> height of
<code>impulse</code> function.</p>
</blockquote>
<h3 id="psd-transformation">PSD transformation</h3>
<p>If we have power spectrum or power spectrum density of <strong>both
edge's absolute jitter</strong> (<span
class="math inline">\(x(n)\)</span>) , <span
class="math inline">\(P_{\text{xx}}\)</span></p>
<p>Then <strong>1UI</strong> jitter is <span
class="math inline">\(x_{\text{1UI}}(n)=x(n)-x(n-1)\)</span>, and
<strong>Period</strong> jitter is <span
class="math inline">\(x_{\text{Period}}(n)=x(n)-x(n-2)\)</span>, which
can be modeled as FIR filter, <span class="math inline">\(H(\omega) =
1-z^{-k}\)</span>, i.e. <span class="math inline">\(k=1\)</span> for
<strong>1UI</strong> jitter and <span class="math inline">\(k=2\)</span>
<strong>Period</strong> jitter <span
class="math display">\[\begin{align}
P_{\text{xx}}&#39;(\omega) &amp;= P_{\text{xx}}(\omega) \cdot \left|
1-z^{-k}  \right|^2 \\
&amp;= P_{\text{xx}}(\omega) \cdot \left| 1-(e^{j\omega
T_s})^{-k}  \right|^2 \\
&amp;= P_{\text{xx}}(\omega) \cdot \left| 1-e^{-j\omega T_s
k}  \right|^2
\end{align}\]</span></p>
<p><img src="/2022/03/22/z-Transform/image-20220519172239916.png"
alt="image-20220519172239916" /></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">clear all</span><br><span class="line">close all</span><br><span class="line">clc</span><br><span class="line"></span><br><span class="line">xf_fs = <span class="number">0</span>:<span class="number">0.01</span>:<span class="number">0.5</span>;</span><br><span class="line">k = <span class="number">1</span>;</span><br><span class="line">H_1UI = <span class="number">1</span> - <span class="built_in">exp</span>(<span class="number">-1</span><span class="built_in">i</span>*<span class="number">2</span>*<span class="built_in">pi</span>*xf_fs);</span><br><span class="line">HH_1UI = <span class="built_in">abs</span>(H_1UI).^<span class="number">2</span>;</span><br><span class="line">subplot(<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">plot</span>(xf_fs, HH_1UI);</span><br><span class="line">grid on;</span><br><span class="line">xlabel(<span class="string">&#x27;Freq&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;|H|^2&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;Weight for 1UI jitter&#x27;</span>);</span><br><span class="line"></span><br><span class="line">k = <span class="number">2</span>;</span><br><span class="line">H_period = <span class="number">1</span> - <span class="built_in">exp</span>(<span class="number">-1</span><span class="built_in">i</span>*<span class="number">2</span>*<span class="built_in">pi</span>*xf_fs);</span><br><span class="line">HH_period = <span class="built_in">abs</span>(H_period).^<span class="number">2</span>;</span><br><span class="line">subplot(<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">plot</span>(xf_fs, HH_period);</span><br><span class="line">grid on;</span><br><span class="line">xlabel(<span class="string">&#x27;Freq&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;|H|^2&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;Weight for Period jitter&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2022/03/22/z-Transform/image-20220709104127384.png"
alt="image-20220709104127384" /> <span class="math display">\[
x(t-\Delta T)\overset{FT}{\longrightarrow} X(s)e^{-\Delta T \cdot s}
\]</span></p>
<h2 id="reference">reference</h2>
<p><a
target="_blank" rel="noopener" href="https://people.engr.tamu.edu/spalermo/ecen689/lecture7_ee720_eq_intro_txeq.pdf">Sam
Palermo, ECEN720, Lecture 7: Equalization Introduction &amp; TX FIR
Eq</a></p>
<p><a
target="_blank" rel="noopener" href="https://people.engr.tamu.edu/spalermo/ecen689/ECEN720_lab5_2021.pdf">Sam
Palermo, ECEN720, Lab5 –Equalization Circuits</a></p>
<p>B. Razavi, "The z-Transform for Analog Designers [The Analog Mind],"
IEEE Solid-State Circuits Magazine, Volume. 12, Issue. 3, pp. 8-14,
Summer 2020.</p>
<p>Jhwan Kim, CICC 2022, ES4-4: Transmitter Design for High-speed Serial
Data Communications</p>
<p>Mathuranathan. Digital filter design – Introduction <a
target="_blank" rel="noopener" href="https://www.gaussianwaves.com/2020/02/introduction-to-digital-filter-design/">https://www.gaussianwaves.com/2020/02/introduction-to-digital-filter-design/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/11/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/13/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Guo</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.1/dist/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.2.12/pdfobject.min.js","integrity":"sha256-g2xji1rlE3KsGVClvuxTbcR0Kn2+wtQADSff2Tbb4zA="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>






  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
