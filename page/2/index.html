<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="KNOW-HOW">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="KNOW-HOW">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Guo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>KNOW-HOW</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">KNOW-HOW</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Guo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">167</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/raytroop" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;raytroop" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:raytroop@gmail.com" title="E-Mail → mailto:raytroop@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/01/06/2nd-sys/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/01/06/2nd-sys/" class="post-title-link" itemprop="url">Second-Order System</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-01-06 10:43:42" itemprop="dateCreated datePublished" datetime="2024-01-06T10:43:42+00:00">2024-01-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-07-25 09:22:30" itemprop="dateModified" datetime="2024-07-25T09:22:30+00:00">2024-07-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/dsp/" itemprop="url" rel="index"><span itemprop="name">dsp</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="standard-form-of-the-second-order-system">standard form of the
second-order system</h2>
<p><img src="/2024/01/06/2nd-sys/image-20240721172721884.png"
alt="image-20240721172721884" /></p>
<p><img src="/2024/01/06/2nd-sys/image-20240629140001275.png"
alt="image-20240629140001275" /></p>
<blockquote>
<p><span class="math inline">\(\omega_d\)</span> called <em>damped
natural frequency</em></p>
</blockquote>
<hr />
<h2 id="closed-loop">closed loop</h2>
<p><img src="/2024/01/06/2nd-sys/image-20240629134127219.png"
alt="image-20240629134127219" /> <span
class="math display">\[\begin{align}
A &amp;= \frac{\frac{A_0}{(1+s/\omega_1)(1+s/\omega_2)}}{1+\beta
\frac{A_0} {(1+s/\omega_1)(1+s/\omega_2)}} \\
&amp;= \frac{A_0}{1+A_0
\beta}\frac{1}{\frac{s^2}{\omega_1\omega_2(1+A_0\beta)}+\frac{1/\omega_1+1/\omega_2}{1+A_0\beta}s+1}
\\
&amp;\simeq \frac{A_0}{1+A_0
\beta}\frac{1}{\frac{s^2}{\omega_u\omega_2}+\frac{1}{\omega_u}s+1} \\
&amp;= \frac{A_0}{1+A_0
\beta}\frac{\omega_u\omega_2}{s^2+\omega_2s+\omega_u\omega_2}
\end{align}\]</span></p>
<p>That is <span class="math inline">\(\omega_n =
\sqrt{\omega_u\omega_2}\)</span> and <span class="math inline">\(\zeta =
\frac{1}{2}\sqrt{\frac{\omega_2}{\omega_u}}\)</span></p>
<p>where <span class="math inline">\(\omega_u\)</span> is the unity gain
bandwidth</p>
<p><img src="/2024/01/06/2nd-sys/image-20240629112429803.png"
alt="image-20240629112429803" /></p>
<p>where <span class="math inline">\(f_r\)</span> is <em>resonant
frequency</em>, <span class="math inline">\(\zeta\)</span> is
<em>damping ratio</em>, <span class="math inline">\(P_f\)</span>
<em>maximum peaking</em>, <span class="math inline">\(P_t\)</span> is
the peak of the first overshoot (step response)</p>
<p><img src="/2024/01/06/2nd-sys/image-20240629142324982.png"
alt="image-20240629142324982" /></p>
<h2 id="damping-factor-phase-margin">damping factor &amp; phase
margin</h2>
<ul>
<li><p>phase margin is defined for <em>open loop</em> system</p></li>
<li><p>damping factor (<span class="math inline">\(\zeta\)</span>) is
defined for <em>close loop</em> system</p></li>
</ul>
<p>The roughly 90 to 100 times of damping factor (<span
class="math inline">\(\zeta\)</span>​) is phase margin <span
class="math display">\[
\mathrm{PM} = 90\zeta \sim 100\zeta
\]</span> In order to have a good stable system, we want <span
class="math inline">\(\zeta &gt; 0.5\)</span> or phase margin more than
<span class="math inline">\(45^o\)</span></p>
<p>We can analyze open loop system in a better perspective because it is
simpler. So, we always use the loop gain analysis to find the phase
margin and see whether the system is stable or not.</p>
<h2 id="rise-time-settling-time">Rise Time &amp; Settling Time</h2>
<p><strong>Rise Time:</strong></p>
<p><img src="/2024/01/06/2nd-sys/image-20240721180718116.png"
alt="image-20240721180718116" /></p>
<blockquote>
<p>For <em>underdamped</em> second order systems, the <em>0% to 100%
rise time</em> is normally used</p>
</blockquote>
<p>For <span class="math inline">\(\text{PM}=70^o\)</span></p>
<ul>
<li><span class="math inline">\(\omega_2=3\omega_u\)</span>, that is
<span class="math inline">\(\omega_n = 1.7\omega_u\)</span>.</li>
<li><span class="math inline">\(\zeta = 0.87\)</span></li>
</ul>
<p>Then <span class="math display">\[
t_r = \frac{3.1}{\omega_u}
\]</span></p>
<hr />
<p><strong>Settling Time:</strong></p>
<p><img src="/2024/01/06/2nd-sys/image-20240721181956221.png"
alt="image-20240721181956221" /></p>
<p><img src="/2024/01/06/2nd-sys/image-20240721182025547.png"
alt="image-20240721182025547" /></p>
<p>As we know <span class="math display">\[
\zeta \omega_n=\frac{1}{2}\sqrt{\frac{\omega_2}{\omega_u}}\cdot
\sqrt{\omega_u\omega_2}=\frac{1}{2}\omega_2
\]</span></p>
<p>Then <span class="math display">\[
t_s = \frac{9.2}{\omega_2}
\]</span></p>
<p>For <span class="math inline">\(\text{PM}=70^o\)</span>, <span
class="math inline">\(\omega_2 = 3\omega_u\)</span>, that is <span
class="math display">\[
t_s \simeq \frac{3}{\omega_u} \space\space \text{, for PM}=70^o
\]</span></p>
<p>For <span class="math inline">\(\text{PM}=45^o\)</span>, <span
class="math inline">\(\omega_2 = \omega_u\)</span>, that is <span
class="math display">\[
t_s \simeq \frac{9.2}{\omega_u} \space\space \text{, for PM}=45^o
\]</span></p>
<blockquote>
<p>Above equation is valid only for <strong>underdamped</strong>, <span
class="math inline">\(\zeta=\frac{1}{2}\sqrt{\frac{\omega_2}{\omega_u}}\lt
1\)</span>, that is <span class="math inline">\(\omega_2\lt
4\omega_u\)</span></p>
</blockquote>
<h2 id="closed-loop-poles-versus-open-loop-gain">Closed Loop Poles
Versus Open Loop Gain</h2>
<p><img src="/2024/01/06/2nd-sys/image-20240712203230295.png"
alt="image-20240712203230295" /></p>
<p><img src="/2024/01/06/2nd-sys/image-20240712203241638.png"
alt="image-20240712203241638" /></p>
<blockquote>
<p>[<a
target="_blank" rel="noopener" href="https://www.cppsim.com/CommCircuitLectures/lec15.pdf">Michael H.
Perrott, High Speed Communication Circuits and Systems, Lecture 15
Integer-N Frequency Synthesizers</a>]</p>
</blockquote>
<h2 id="additional-zero">additional Zero</h2>
<p><span class="math display">\[\begin{align}
TF &amp;= \frac{s +\omega_z}{s^2+2\zeta \omega_ns+\omega_n^2} \\
&amp;= \frac{\omega _z}{\omega _n^2}\cdot \frac{1+s/\omega
_z}{1+s^2/\omega_n^2+2\zeta s/\omega_n}
\end{align}\]</span></p>
<p>Let <span class="math inline">\(s=j\omega\)</span> and omit factor,
<span class="math display">\[
A_\text{dB}(\omega) = 10\log[1+(\frac{\omega}{\omega _z})^2] -
10\log[1+\frac{\omega^4}{\omega_n^4}+\frac{2\omega^2(2\zeta ^2
-1)}{\omega_n^2}]
\]</span> peaking frequency <span
class="math inline">\(\omega_\text{peak}\)</span> can be obtained via
<span class="math inline">\(\frac{d A_\text{dB}(\omega)}{d\omega} =
0\)</span> <span class="math display">\[
\omega_\text{peak} = \omega_z \sqrt{\sqrt{(\frac{\omega_n}{\omega_z})^4
- 2(\frac{\omega_n}{\omega_z})^2(2\zeta ^2-1)+1} - 1}
\]</span></p>
<h2 id="step-response-of-higher-order-system">Step Response of higher
order system</h2>
<p><img src="/2024/01/06/2nd-sys/image-20240112002314153.png"
alt="image-20240112002314153" /></p>
<p>Since <span class="math inline">\(1/sC_1+R_1 \gg R_0\)</span> <span
class="math display">\[
\frac{V_m}{V_i}(s) \simeq \frac{R_0}{R_0 + 1/sC_0} =
\frac{sR_0C_0}{1+sR_0C_0}
\]</span> <em>step response</em> of <span
class="math inline">\(V_m\)</span> <span class="math display">\[
V_m(t) = e^{-t/R_0C_0}
\]</span> where <span class="math inline">\(\tau = R_0C_0\)</span></p>
<p>And <span class="math inline">\(V_o(s)\)</span> can be expressed as
<span class="math display">\[\begin{align}
\frac{V_o}{V_i}(s)  &amp; \simeq \frac{sR_0C_0}{1+sR_0C_0} \cdot
\frac{sR_1C_1}{1+sR_1C_1} \\
&amp;= \frac{sR_0C_0R_1C_1}{R_0C_0-R_1C_1}\left(\frac{1}{1+sR_1C_1} -
\frac{1}{1+sR_0C_0}\right)
\end{align}\]</span></p>
<p>Then <em>step response</em> of <span
class="math inline">\(Vo\)</span> <span
class="math display">\[\begin{align}
Vo(t) &amp;= \frac{R_0C_0R_1C_1}{R_0C_0-R_1C_1}
\left(\frac{1}{R_1C_1}e^{-t/R_1C_1} -
\frac{1}{R_0C_0}e^{-t/R_0C_0}\right) \\
&amp;= \frac{1}{R_0C_0-R_1C_1}\left(R_0C_0e^{-t/R_1C_1} -
R_1C_1e^{-t/R_0C_0}\right) \\
&amp;\simeq = \frac{1}{R_0C_0-R_1C_1}\left(R_0C_0e^{-t/R_1C_1} -
R_1C_1\right)
\end{align}\]</span></p>
<p>where <span class="math inline">\(\tau=R_1C_1\)</span></p>
<h3 id="partial-fraction-expansion">Partial-fraction Expansion</h3>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">syms C0</span><br><span class="line">syms R0</span><br><span class="line">syms C1</span><br><span class="line">syms R1</span><br><span class="line">syms s</span><br><span class="line"></span><br><span class="line">Z0 = <span class="number">1</span>/s/C1 + R1;</span><br><span class="line">Z1 = R0*Z0/(R0+Z0);</span><br><span class="line">vm = Z1 / (Z1 + <span class="number">1</span>/s/C0);</span><br><span class="line">vo = R1/Z0 * vm;</span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; partfrac(vm, s)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"> </span><br><span class="line"><span class="number">1</span> - (s*(C1*R0 + C1*R1) + <span class="number">1</span>)/(C0*C1*R0*R1*s^<span class="number">2</span> + (C0*R0 + C1*R0 + C1*R1)*s + <span class="number">1</span>)</span><br><span class="line"> </span><br><span class="line">&gt;&gt; partfrac(vo, s)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"> </span><br><span class="line"><span class="number">1</span> - (s*(C0*R0 + C1*R0 + C1*R1) + <span class="number">1</span>)/(C0*C1*R0*R1*s^<span class="number">2</span> + (C0*R0 + C1*R0 + C1*R1)*s + <span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p><span class="math display">\[\begin{align}
V_m(s) &amp;= 1 -
\frac{s(C_1R_0+C_1R_1)+1}{C_0C_1R_0R_1s^2+(C_0R_0+C_1R_0+C_1R_1)s+1} \\
V_o(s) &amp;= 1 -
\frac{s(C_0R_0+C_1R_0+C_1R_1)+1}{C_0C_1R_0R_1s^2+(C_0R_0+C_1R_0+C_1R_1)s+1}
\end{align}\]</span></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">C0 = <span class="number">200e-9</span>;</span><br><span class="line">R0 = <span class="number">50</span>;</span><br><span class="line">C1 = <span class="number">400e-15</span>;</span><br><span class="line">R1 = <span class="number">200e3</span>;</span><br><span class="line"></span><br><span class="line">s = tf(<span class="string">&quot;s&quot;</span>);</span><br><span class="line"></span><br><span class="line">Z0 = <span class="number">1</span>/s/C1 + R1;</span><br><span class="line">Z1 = R0*Z0/(R0+Z0);</span><br><span class="line">vm = Z1 / (Z1 + <span class="number">1</span>/s/C0);</span><br><span class="line">vo = R1/Z0 * vm;</span><br><span class="line"></span><br><span class="line">vm_exp = <span class="number">1</span> - (s*(C1*R0 + C1*R1) + <span class="number">1</span>)/(C0*C1*R0*R1*s^<span class="number">2</span> + (C0*R0 + C1*R0 + C1*R1)*s + <span class="number">1</span>);</span><br><span class="line">vo_exp = <span class="number">1</span> - (s*(C0*R0 + C1*R0 + C1*R1) + <span class="number">1</span>)/(C0*C1*R0*R1*s^<span class="number">2</span> + (C0*R0 + C1*R0 + C1*R1)*s + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">step(vm, <span class="number">500e-9</span>, <span class="string">&#x27;k-o&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">step(vm_exp, <span class="number">500e-9</span>, <span class="string">&#x27;r-^&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;vm step response&#x27;</span>)</span><br><span class="line">grid on;</span><br><span class="line"><span class="built_in">legend</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">step(vo, <span class="number">500e-9</span>, <span class="string">&#x27;k-o&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">step(vo_exp, <span class="number">500e-9</span>, <span class="string">&#x27;r-^&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;vo step response&#x27;</span>)</span><br><span class="line">grid on;</span><br><span class="line"><span class="built_in">legend</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">% with approximation</span></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>)</span><br><span class="line">vm_exp2 = s*R0*C0/(<span class="number">1</span>+s*R0*C0);</span><br><span class="line">vo_exp2 = s*R0*C0/(<span class="number">1</span>+s*R0*C0) * s*R1*C1/(<span class="number">1</span>+s*R1*C1);</span><br><span class="line"></span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">step(vm, <span class="number">500e-9</span>, <span class="string">&#x27;k-o&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">step(vm_exp2, <span class="number">500e-9</span>, <span class="string">&#x27;r-^&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;vm step response&#x27;</span>)</span><br><span class="line">grid on;</span><br><span class="line"><span class="built_in">legend</span>()</span><br><span class="line"></span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">step(vo, <span class="number">500e-9</span>, <span class="string">&#x27;k-o&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">step(vo_exp2, <span class="number">500e-9</span>, <span class="string">&#x27;r-^&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;vo step response&#x27;</span>)</span><br><span class="line">grid on;</span><br><span class="line"><span class="built_in">legend</span>()</span><br></pre></td></tr></table></figure>
<p><img src="/2024/01/06/2nd-sys/image-20240113181003272.png"
alt="image-20240113181003272" /></p>
<p><img src="/2024/01/06/2nd-sys/image-20240113181032379.png"
alt="image-20240113181032379" /></p>
<hr />
<p>spectre simulation vs matlab</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">C0 = <span class="number">200e-9</span>;</span><br><span class="line">R0 = <span class="number">50</span>;</span><br><span class="line">C1 = <span class="number">400e-15</span>;</span><br><span class="line">R1 = <span class="number">200e3</span>;</span><br><span class="line"></span><br><span class="line">s = tf(<span class="string">&quot;s&quot;</span>);</span><br><span class="line"></span><br><span class="line">Z0 = <span class="number">1</span>/s/C1 + R1;</span><br><span class="line">Z1 = R0*Z0/(R0+Z0);</span><br><span class="line">vm = Z1 / (Z1 + <span class="number">1</span>/s/C0);</span><br><span class="line">vo = R1/Z0 * vm;</span><br><span class="line"></span><br><span class="line">step(vm, <span class="number">500e-9</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">step(vo, <span class="number">500e-9</span>);</span><br><span class="line"></span><br><span class="line">grid on</span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; vm</span><br><span class="line"></span><br><span class="line">vm =</span><br><span class="line"> </span><br><span class="line">          <span class="number">1.024e-44</span> s^<span class="number">5</span> + <span class="number">2.56e-37</span> s^<span class="number">4</span> + <span class="number">1.6e-30</span> s^<span class="number">3</span></span><br><span class="line">  -----------------------------------------------------------</span><br><span class="line">  <span class="number">1.024e-44</span> s^<span class="number">5</span> + <span class="number">2.571e-37</span> s^<span class="number">4</span> + <span class="number">1.626e-30</span> s^<span class="number">3</span> + <span class="number">1.6e-25</span> s^<span class="number">2</span></span><br><span class="line"> </span><br><span class="line">Continuous-time transfer <span class="keyword">function</span>.</span><br><span class="line"></span><br><span class="line">&gt;&gt; vo</span><br><span class="line"></span><br><span class="line">vo =</span><br><span class="line"> </span><br><span class="line">                 <span class="number">8.194e-52</span> s^<span class="number">6</span> + <span class="number">2.048e-44</span> s^<span class="number">5</span> + <span class="number">1.28e-37</span> s^<span class="number">4</span></span><br><span class="line">  ---------------------------------------------------------------------------</span><br><span class="line">  <span class="number">8.194e-52</span> s^<span class="number">6</span> + <span class="number">3.081e-44</span> s^<span class="number">5</span> + <span class="number">3.871e-37</span> s^<span class="number">4</span> + <span class="number">1.638e-30</span> s^<span class="number">3</span> + <span class="number">1.6e-25</span> s^<span class="number">2</span></span><br><span class="line"> </span><br><span class="line">Continuous-time transfer <span class="keyword">function</span>.</span><br></pre></td></tr></table></figure>
<p><img src="/2024/01/06/2nd-sys/image-20240112002155622.png"
alt="image-20240112002155622" /></p>
<h2 id="reference">reference</h2>
<p><em>Gene F. Franklin, J. David Powell, and Abbas Emami-Naeini. 2018.
Feedback Control of Dynamic Systems (8th Edition) (8th. ed.).
Pearson.</em></p>
<p>Katsuhiko Ogata, Modern Control Engineering, 5th edition</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/12/24/nonideal-LC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/12/24/nonideal-LC/" class="post-title-link" itemprop="url">Non ideal capacitor and inductor</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-12-24 16:35:23" itemprop="dateCreated datePublished" datetime="2023-12-24T16:35:23+00:00">2023-12-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-07-25 09:22:30" itemprop="dateModified" datetime="2024-07-25T09:22:30+00:00">2024-07-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="conversion-relationships">Conversion Relationships</h2>
<h3 id="capacitor">Capacitor</h3>
<p><img src="/2023/12/24/nonideal-LC/image-20231224163730529.png"
alt="image-20231224163730529" /></p>
<hr />
<p><img src="/2023/12/24/nonideal-LC/image-20240119000951498.png"
alt="image-20240119000951498" /></p>
<p><img src="/2023/12/24/nonideal-LC/image-20240119001025892.png"
alt="image-20240119001025892" /></p>
<p><img src="/2023/12/24/nonideal-LC/image-20240119001309410.png"
alt="image-20240119001309410" /></p>
<h3 id="inductor">Inductor</h3>
<p><img src="/2023/12/24/nonideal-LC/image-20231224163740411.png"
alt="image-20231224163740411" /></p>
<h3 id="derivation">Derivation</h3>
<p><img src="/2023/12/24/nonideal-LC/image-20231224163905233.png"
alt="image-20231224163905233" /></p>
<p><img src="/2023/12/24/nonideal-LC/image-20231224163916109.png"
alt="image-20231224163916109" /></p>
<hr />
<p><img src="/2023/12/24/nonideal-LC/image-20231224212914366.png"
alt="image-20231224212914366" /></p>
<p><img src="/2023/12/24/nonideal-LC/image-20231224212625409.png"
alt="image-20231224212625409" /></p>
<p><img src="/2023/12/24/nonideal-LC/image-20231224212541383.png"
alt="image-20231224212541383" /></p>
<p><span class="math inline">\(V_o = V_i |A|e^{j\theta}\)</span>, and
<span class="math inline">\(A_r = |A|\cos\theta\)</span>, <span
class="math inline">\(A_i = |A|\sin\theta\)</span></p>
<p>Then <span class="math inline">\(I_i = (V_i - V_o)sC_f=
V_i(1-|A|e^{j\theta})sC_f\)</span>, impedance is shown as below</p>
<p><span class="math display">\[\begin{align}
Z &amp;= \frac{V_i}{I_i} \\
&amp;= \frac{1}{(1-|A|e^{j\theta})j\omega C_f} \\
&amp;= -\frac{j}{\omega
C_f\frac{1+|A|^2-2|A|\cos\theta}{1-|A|\cos\theta}} +
\frac{|A|\sin\theta}{\omega C_f (1+|A|^2-2|A|\cos\theta)} \\
\end{align}\]</span></p>
<p><span class="math inline">\(C_\text{eq}\)</span> and <span
class="math inline">\(R_\text{eq}\)</span> are obtained <span
class="math display">\[\begin{align}
C_\text{eq} &amp;= \frac{1+|A|^2-2A_r}{1-A_r}\cdot C_f \\
R_\text{eq} &amp;= \frac{A_i}{1+|A|^2-2A_r}\cdot \frac{1}{\omega C_f}
\end{align}\]</span></p>
<h2 id="series-or-parallel-representation">series or parallel
representation</h2>
<h2 id="reference">reference</h2>
<p>Tank Circuits/Impedances [<a
target="_blank" rel="noopener" href="https://stanford.edu/class/ee133/handouts/lecturenotes/lecture5_tank.pdf">https://stanford.edu/class/ee133/handouts/lecturenotes/lecture5_tank.pdf</a>]</p>
<p>Resonant Circuits [<a
target="_blank" rel="noopener" href="https://web.ece.ucsb.edu/~long/ece145b/Resonators.pdf">https://web.ece.ucsb.edu/~long/ece145b/Resonators.pdf</a>]</p>
<p>Series &amp; Parallel Impedance Parameters and Equivalent Circuits
[<a
target="_blank" rel="noopener" href="https://assets.testequity.com/te1/Documents/pdf/series-parallel-impedance-parameters-an.pdf">https://assets.testequity.com/te1/Documents/pdf/series-parallel-impedance-parameters-an.pdf</a>]</p>
<p>ES Lecture 35: Non ideal capacitor, Capacitor Q and series RC to
parallel RC conversion [<a
target="_blank" rel="noopener" href="https://youtu.be/CJ_2U5pEB4o?si=4j4CWsLSapeu-hBo">https://youtu.be/CJ_2U5pEB4o?si=4j4CWsLSapeu-hBo</a>]</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/12/23/tf-freqresp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/12/23/tf-freqresp/" class="post-title-link" itemprop="url">Linear Circuits Analysis - Transfer Function & Frequency Response</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-12-23 14:58:39" itemprop="dateCreated datePublished" datetime="2023-12-23T14:58:39+00:00">2023-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-07-25 09:22:30" itemprop="dateModified" datetime="2024-07-25T09:22:30+00:00">2024-07-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/dsp/" itemprop="url" rel="index"><span itemprop="name">dsp</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="are-ac-driven-circuits-linear">Are AC-Driven Circuits
Linear?</h2>
<p><span class="math display">\[
f(x_1 + x_2)= f(x_1)+ f(x_2)
\]</span></p>
<p>Often, AC-driven circuits can be mistaken as non-linear as the basis
that determines the linearity of a circuit is the relationship between
the voltage and current.</p>
<p>While an AC signal varies with time, it still exhibits a linear
relationship across elements like resistors, capacitors, and inductors.
Therefore, AC driven circuits are linear.</p>
<h2 id="phasor">Phasor</h2>
<p><em>Phasor concept has no real physical significance. It is just a
convenient mathematical tool.</em></p>
<blockquote>
<p>Phasor analysis determines the steady-state response to a linear
circuit driven by sinusoidal sources with frequency <span
class="math inline">\(f\)</span></p>
<p>If your circuit includes transistors or other nonlinear components,
all is not lost. There is an extension of phasor analysis to nonlinear
circuits called small-signal analysis in which you linearize the
components before performing phasor analysis - AC analyses of SPICE</p>
</blockquote>
<p>A sinusoid is characterized by 3 numbers, its amplitude, its phase,
and its frequency. For example <span class="math display">\[
v(t) = A\cos(\omega t + \phi) \tag{1}
\]</span> In a circuit there will be many signals but in the case of
phasor analysis they will all have the same frequency. For this reason,
the signals are characterized using only their <strong>amplitude and
phase</strong>.</p>
<p>The combination of an <strong>amplitude</strong> and
<strong>phase</strong> to describe a signal is the
<strong>phasor</strong> for that signal.</p>
<p>Thus, the phasor for the signal in <span
class="math inline">\((1)\)</span> is <span
class="math inline">\(A\angle \phi\)</span></p>
<blockquote>
<p>In general, phasors are functions of frequency</p>
</blockquote>
<p>Often it is preferable to represent a phasor using <strong>complex
numbers</strong> rather than using amplitude and phase. In this case we
represent the signal as: <span class="math display">\[
v(t) = \Re\{Ve^{j\omega t} \} \tag{2}
\]</span> where <span class="math inline">\(V=Ae^{j\phi}\)</span> is the
<strong>phasor</strong>.</p>
<blockquote>
<p><span class="math inline">\((1)\)</span> and <span
class="math inline">\((2)\)</span> are the same</p>
</blockquote>
<h3 id="phasor-model-of-a-resistor">Phasor Model of a Resistor</h3>
<p>A linear resistor is defined by the equation <span
class="math inline">\(v = Ri\)</span></p>
<p>Now, assume that the resistor current is described with the
<em>phasor</em> <span class="math inline">\(I\)</span>. Then <span
class="math display">\[
i(t) = \Re\{Ie^{j\omega t}\}
\]</span> <span class="math inline">\(R\)</span> is a real constant, and
so the voltage can be computed to be <span class="math display">\[
v(t) = R\Re\{Ie^{j\omega t}\} = \Re\{RIe^{j\omega t}\} =
\Re\{Ve^{j\omega t}\}
\]</span> where <span class="math inline">\(V\)</span> is the phasor
representation for <span class="math inline">\(v\)</span>, i.e. <span
class="math display">\[
V = RI
\]</span></p>
<ol type="1">
<li><p>Thus, given the <em>phasor</em> for the current we can directly
compute the <em>phasor</em> for the voltage across the
resistor.</p></li>
<li><p>Similarly, given the <em>phasor</em> for the voltage across a
resistor we can compute the <em>phasor</em> for the current through the
resistor using <span class="math inline">\(I =
\frac{V}{R}\)</span></p></li>
</ol>
<h3 id="phasor-model-of-a-capacitor">Phasor Model of a Capacitor</h3>
<p>A linear capacitor is defined by the equation <span
class="math inline">\(i=C\frac{dv}{dt}\)</span></p>
<p>Now, assume that the voltage across the capacitor is described with
the <em>phasor</em> <span class="math inline">\(V\)</span>. Then <span
class="math display">\[
v(t) = \Re\{ V e^{j\omega t}\}
\]</span> <span class="math inline">\(C\)</span> is a real constant
<span class="math display">\[
i(t) = C\Re\{\frac{d}{dt}V e^{j\omega t}\} = \Re\{j\omega C V e^{j\omega
t}\}
\]</span> The <em>phasor</em> representation for <span
class="math inline">\(i\)</span> is <span class="math inline">\(i(t) =
\Re\{Ie^{j\omega t}\}\)</span>, that is <span class="math inline">\(I =
j\omega C V\)</span></p>
<ol type="1">
<li><p>Thus, given the <em>phasor</em> for the voltage across a
capacitor we can directly compute the <em>phasor</em> for the current
through the capacitor.</p></li>
<li><p>Similarly, given the <em>phasor</em> for the current through a
capacitor we can compute the <em>phasor</em> for the voltage across the
capacitor using <span class="math inline">\(V=\frac{I}{j\omega
C}\)</span></p></li>
</ol>
<h3 id="phasor-model-of-an-inductor">Phasor Model of an Inductor</h3>
<p>A linear inductor is defined by the equation <span
class="math inline">\(v=L\frac{di}{dt}\)</span></p>
<p>Now, assume that the inductor current is described with the
<em>phasor</em> <span class="math inline">\(I\)</span>. Then <span
class="math display">\[
i(t) = \Re\{ I e^{j\omega t}\}
\]</span> <span class="math inline">\(L\)</span> is a real constant, and
so the voltage can be computed to be <span class="math display">\[
v(t) = L\Re\{\frac{d}{dt}I e^{j\omega t}\} = \Re\{j\omega L I e^{j\omega
t}\}
\]</span> The <em>phasor</em> representation for <span
class="math inline">\(v\)</span> is <span class="math inline">\(v(t) =
\Re\{Ve^{j\omega t}\}\)</span>, that is <span class="math inline">\(V =
j\omega L I\)</span></p>
<ol type="1">
<li><p>Thus, given the <em>phasor</em> for the current we can directly
compute the <em>phasor</em> for the voltage across the
inductor.</p></li>
<li><p>Similarly, given the phasor for the voltage across an inductor we
can compute the phasor for the current through the inductor using <span
class="math inline">\(I=\frac{V}{j\omega L}\)</span></p></li>
</ol>
<h3 id="impedance-and-admittance">Impedance and Admittance</h3>
<blockquote>
<p>Impedance and admittance are generalizations of resistance and
conductance.</p>
<p>They differ from resistance and conductance in that they are complex
and they vary with frequency.</p>
</blockquote>
<p>Impedance is defined to be the ratio of the <em>phasor</em> for the
voltage across the component and the current through the component:
<span class="math display">\[
Z = \frac{V}{I}
\]</span></p>
<blockquote>
<p>Impedance is a complex value. The real part of the impedance is
referred to as the resistance and the imaginary part is referred to as
the reactance</p>
</blockquote>
<p>For a linear component, admittance is defined to be the ratio of the
<em>phasor</em> for the current through the component and the voltage
across the component: <span class="math display">\[
Y = \frac{I}{V}
\]</span></p>
<blockquote>
<p>Admittance is a complex value. The real part of the admittance is
referred to as the conductance and the imaginary part is referred to as
the susceptance.</p>
</blockquote>
<h2 id="response-to-complex-exponentials">Response to Complex
Exponentials</h2>
<p>The response of an LTI system to a <strong>complex
exponential</strong> input is the same <strong>complex
exponential</strong> with only a change in <em>amplitude</em></p>
<p><span class="math display">\[\begin{align}
y(t) &amp;= H(s)e^{st} \\
H(s) &amp;= \int_{-\infty}^{+\infty}h(\tau)e^{-s\tau}d\tau
\end{align}\]</span></p>
<p>where <span class="math inline">\(h(t)\)</span> is the impulse
response of a continuous-time LTI system</p>
<blockquote>
<p><strong>convolution integral</strong> is used here</p>
</blockquote>
<p><span class="math display">\[\begin{align}
y[n] &amp;= H(z)z^n \\
H(z) &amp;= \sum_{k=-\infty}^{+\infty}h[k]z^{-k}
\end{align}\]</span></p>
<p>where <span class="math inline">\(h(n)\)</span> is the impulse
response of a discrete-time LTI system</p>
<blockquote>
<p><strong>convolution sum</strong> is used here</p>
</blockquote>
<p>The signals of the form <span class="math inline">\(e^{st}\)</span>
in continuous time and <span class="math inline">\(z^{n}\)</span> in
discrete time, where <span class="math inline">\(s\)</span> and <span
class="math inline">\(z\)</span> are <em>complex numbers</em> are
referred to as an <strong>eigenfunction</strong> of the system, and the
<em>amplitude factor</em> <span class="math inline">\(H(s)\)</span>,
<span class="math inline">\(H(z)\)</span> is referred to as the system's
<strong>eigenvalue</strong></p>
<h2 id="laplace-transform">Laplace transform</h2>
<p>One of the important applications of the Laplace transform is in the
<strong>analysis and characterization of LTI systems</strong>, which
stems directly from the <em>convolution property</em> <span
class="math display">\[
Y(s) = H(s)X(s)
\]</span> where <span class="math inline">\(X(s)\)</span>, <span
class="math inline">\(Y(s)\)</span>, and <span
class="math inline">\(H(s)\)</span> are the <em>Laplace transforms</em>
of the input, output, and impulse response of the system,
respectively</p>
<blockquote>
<p>From the response of LTI systems to complex exponentials, if the
input to an LTI system is <span class="math inline">\(x(t) =
e^{st}\)</span>, with <span class="math inline">\(s\)</span> the ROC of
<span class="math inline">\(H(s)\)</span>, then the output will be <span
class="math inline">\(y(t)=H(s)e^{st}\)</span>; i.e., <span
class="math inline">\(e^{st}\)</span> is an <em>eigenfunction</em> of
the system with <strong>eigenvalue</strong> equal to the <strong>Laplace
transform of the impulse response</strong>.</p>
</blockquote>
<h3 id="s-domain-element-models">s-Domain Element Models</h3>
<p><img src="/2023/12/23/tf-freqresp/image-20231223225541693.png"
alt="image-20231223225541693" /></p>
<p><img src="/2023/12/23/tf-freqresp/image-20231223225609893.png"
alt="image-20231223225609893" /></p>
<h2 id="sinusoidal-steady-state-analysis">Sinusoidal Steady-State
Analysis</h2>
<blockquote>
<p>Here <strong>Sinusoidal</strong> means that source excitations have
the form <span class="math inline">\(V_s\cos(\omega t +\theta)\)</span>
or <span class="math inline">\(V_s\sin(\omega t+\theta)\)</span></p>
<p><strong>Steady state</strong> mean that all transient behavior of the
stable circuit has died out, i.e., decayed to zero</p>
</blockquote>
<p><img src="/2023/12/23/tf-freqresp/image-20231223212820547.png"
alt="image-20231223212820547" /></p>
<p><img src="/2023/12/23/tf-freqresp/image-20231223212846596.png"
alt="image-20231223212846596" /></p>
<p><img src="/2023/12/23/tf-freqresp/image-20231223213016508.png"
alt="image-20231223213016508" /></p>
<h2 id="s-domain-and-phasor-domain"><span
class="math inline">\(s\)</span>-domain and phasor-domain</h2>
<p>Phasor analysis is a technique to find the steady-state response when
the system input is a sinusoid. That is, phasor analysis is sinusoidal
analysis.</p>
<ul>
<li>Phasor analysis is a powerful technique with which to find the
steady-state portion of the complete response.</li>
<li>Phasor analysis does not find the transient response.</li>
<li>Phasor analysis does not find the complete response.</li>
</ul>
<blockquote>
<p>The beauty of the phasor-domain circuit is that it is described by
algebraic KVL and KCL equations with time-invariant sources, not
differential equations of time</p>
</blockquote>
<p><img src="/2023/12/23/tf-freqresp/image-20231224001422189.png"
alt="image-20231224001422189" /></p>
<p><img src="/2023/12/23/tf-freqresp/image-20231223230739219.png"
alt="image-20231223230739219" /></p>
<blockquote>
<p>The difference here is that <em>Laplace analysis</em> can also give
us the <strong>transient response</strong></p>
</blockquote>
<p><img src="/2023/12/23/tf-freqresp/image-20231224132406755.png"
alt="image-20231224132406755" /></p>
<h3 id="general-response-classifications">General Response
Classifications</h3>
<p><img src="/2023/12/23/tf-freqresp/image_2_2_4.png" alt="img" /></p>
<ul>
<li><p><strong>zero-input response</strong>, <strong>zero-state
response</strong> &amp; <strong>complete response</strong></p>
<p><img src="/2023/12/23/tf-freqresp/image-20231223235252850.png"
alt="image-20231223235252850" /></p>
<blockquote>
<p>The <em>zero-state response</em> is given by <span
class="math inline">\(\mathscr{L^1}[H(s)F(s)]\)</span>, for the
arbitrary <span class="math inline">\(s\)</span>-domain input <span
class="math inline">\(F(s)\)</span></p>
<p>where <span class="math inline">\(Z_L(s) = sL\)</span>, the inductor
with zero initial current <span class="math inline">\(i_L(0)=0\)</span>
and <span class="math inline">\(Z_C(s)=1/sC\)</span> with zero initial
voltage <span class="math inline">\(v_C(0)=0\)</span></p>
</blockquote></li>
<li><p><strong>transient response</strong> &amp; <strong>steady-state
response</strong></p>
<p><img src="/2023/12/23/tf-freqresp/image-20231224000454014.png"
alt="image-20231224000454014" /></p></li>
<li><p><strong>natural response</strong> &amp; <strong>forced
response</strong></p>
<p><img src="/2023/12/23/tf-freqresp/image-20231224000817438.png"
alt="image-20231224000817438" /></p></li>
</ul>
<hr />
<p><img src="/2023/12/23/tf-freqresp/image-20240118212304219.png"
alt="image-20240118212304219" /></p>
<h2 id="transfer-functions-and-frequency-response">Transfer Functions
and Frequency Response</h2>
<h3 id="transfer-function">transfer function</h3>
<p>The <strong>transfer function</strong> <span
class="math inline">\(H(s)\)</span> is the ratio of the <em>Laplace
transform</em> of the output of the system to its input <strong>assuming
all zero initial conditions</strong>.</p>
<p><img src="/2023/12/23/tf-freqresp/image-20240106185523937.png"
alt="image-20240106185523937" /></p>
<p><img src="/2023/12/23/tf-freqresp/image-20240106185937270.png"
alt="image-20240106185937270" /></p>
<h3 id="frequency-response">frequency response</h3>
<p>An immediate consequence of <em>convolution</em> is that an input of
the form <span class="math inline">\(e^{st}\)</span> results in an
output <span class="math display">\[
y(t) = H(s)e^{st}
\]</span> where the specific constant <span
class="math inline">\(s\)</span> may be complex, expressed as <span
class="math inline">\(s = \sigma + j\omega\)</span></p>
<p>A very common way to use the <em>exponential response</em> of LTIs is
in finding the <strong>frequency response</strong> i.e. <strong>response
to a sinusoid</strong></p>
<p>First, we express the <em>sinusoid</em> as a sum of two
<em>exponential expressions</em> (Euler’s relation): <span
class="math display">\[
\cos(\omega t) = \frac{1}{2}(e^{j\omega t}+e^{-j\omega t})
\]</span> If we let <span class="math inline">\(s=j\omega\)</span>, then
<span class="math inline">\(H(-j\omega)=H^*(j\omega)\)</span>, in polar
form <span class="math inline">\(H(j\omega)=Me^{j\phi}\)</span> and
<span class="math inline">\(H(-j\omega)=Me^{-j\phi}\)</span>. <span
class="math display">\[\begin{align}
y_+(t) &amp; = H(s)e^{st}|_{s=j\omega} = H(j\omega)e^{j\omega t} = M
e^{j(\omega t + \phi)} \\
y_-(t) &amp; = H(s)e^{st}|_{s=-j\omega} = H(-j\omega)e^{-j\omega t} = M
e^{-j(\omega t + \phi)}
\end{align}\]</span></p>
<p>By <em>superposition</em>, the response to the sum of these two
exponentials, which make up the cosine signal, is the sum of the
responses <span class="math display">\[\begin{align}
y(t) &amp;= \frac{1}{2}[H(j\omega)e^{j\omega t} + H(-j\omega)e^{-j\omega
t}] \\
&amp;= \frac{M}{2}[e^{j(\omega t + \phi)} + e^{-j(\omega t + \phi)}] \\
&amp;= M\cos(\omega t + \phi)
\end{align}\]</span></p>
<p>where <span class="math inline">\(M = |H(j\omega|\)</span> and <span
class="math inline">\(\phi = \angle H(j\omega)\)</span></p>
<blockquote>
<p>This means if a system represented by the transfer function <span
class="math inline">\(H(s)\)</span> has a <em>sinusoidal input</em>, the
output will be <em>sinusoidal</em> at the same frequency with magnitude
<span class="math inline">\(M\)</span> and will be shifted in phase by
the angle <span class="math inline">\(\phi\)</span></p>
</blockquote>
<h3 id="laplace-transform-fourier-transform">Laplace transform &amp;
Fourier transform</h3>
<ul>
<li>Laplace transforms such as <span
class="math inline">\(Y(s)=H(s)U(s)\)</span> can be used to study the
<strong>complete response characteristics</strong> of systems, including
the <em>transient response</em>—that is, the time response to <em>an
initial condition</em> or <em>suddenly applied signal</em></li>
<li>This is in contrast to the use of <em>Fourier transforms</em>, which
<strong>only take into account the steady-state response</strong></li>
</ul>
<p>Given a general linear system with transfer function <span
class="math inline">\(H(s)\)</span> and an input signal <span
class="math inline">\(u(t)\)</span>, the procedure for determining <span
class="math inline">\(y(t)\)</span> using the <em>Laplace transform</em>
is given by the following steps:</p>
<p><img src="/2023/12/23/tf-freqresp/image-20240106224403401.png"
alt="image-20240106224403401" /></p>
<h2 id="reference">reference</h2>
<p>Ken Kundert. <a
target="_blank" rel="noopener" href="http://www.designers-guide.org/Theory/phasors.pdf">Introduction to
Phasors</a>. <em>Designer’s Guide Community</em>. September 2011.</p>
<p>How to Perform Linearity Circuit Analysis [<a
target="_blank" rel="noopener" href="https://resources.pcb.cadence.com/blog/2021-how-to-perform-linearity-circuit-analysis">https://resources.pcb.cadence.com/blog/2021-how-to-perform-linearity-circuit-analysis</a>]</p>
<p>Stephen P. Boyd. EE102 Lecture 7 Circuit analysis via Laplace
transform <a
target="_blank" rel="noopener" href="https://web.stanford.edu/~boyd/ee102/laplace_ckts.pdf">[https://web.stanford.edu/~boyd/ee102/laplace_ckts.pdf]</a></p>
<p>Cheng-Kok Koh, EE695K VLSI Interconnect, S-Domain Analysis [<a
target="_blank" rel="noopener" href="https://engineering.purdue.edu/~chengkok/ee695K/lec3c.pdf">https://engineering.purdue.edu/~chengkok/ee695K/lec3c.pdf</a>]</p>
<p>Kenneth R. Demarest, Circuit Analysis using Phasors, Laplace
Transforms, and Network Functions [<a
target="_blank" rel="noopener" href="https://people.eecs.ku.edu/~demarest/212/Phasor%20and%20Laplace%20review.pdf">https://people.eecs.ku.edu/~demarest/212/Phasor%20and%20Laplace%20review.pdf</a>]</p>
<p>DeCarlo, R. A., &amp; Lin, P.-M. (2009). <em>Linear circuit
analysis : time domain, phasor, and Laplace transform approaches</em>
(3rd ed).</p>
<p>Davis, Artice M.. "Linear Circuit Analysis." <em>The Electrical
Engineering Handbook - Six Volume Set</em> (1998)</p>
<p>Duane Marcy, Fundamentals of Linear Systems [<a
target="_blank" rel="noopener" href="http://lcs-vc-marcy.syr.edu:8080/Chapter22.html">http://lcs-vc-marcy.syr.edu:8080/Chapter22.html</a>]</p>
<p><em>Gene F. Franklin, J. David Powell, and Abbas Emami-Naeini. 2018.
Feedback Control of Dynamic Systems (8th Edition) (8th. ed.).
Pearson.</em></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/11/28/jtag/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/11/28/jtag/" class="post-title-link" itemprop="url">JTAG and Boundary Scan</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-11-28 22:00:32" itemprop="dateCreated datePublished" datetime="2023-11-28T22:00:32+00:00">2023-11-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-07-25 09:22:30" itemprop="dateModified" datetime="2024-07-25T09:22:30+00:00">2024-07-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Data Register, DR:</p>
<ul>
<li>Bypass Register, BR</li>
<li>Boundary Scan Register, BSR</li>
</ul>
<p>Instruction Register, IR</p>
<h2 id="tap-controller">TAP Controller</h2>
<p><img src="/2023/11/28/jtag/image-20240113191225838.png"
alt="image-20240113191225838" /></p>
<blockquote>
<ul>
<li>FSM and Shift Register of DR and IR works at the
<strong>posedge</strong> of the clock</li>
<li>TMS, TDI, TDO and Hold Register of DR and IR changes value at the
<strong>negedge</strong> of the clock</li>
</ul>
</blockquote>
<p><img src="/2023/11/28/jtag/image-20240113191409296.png"
alt="image-20240113191409296" /></p>
<p><img src="/2023/11/28/jtag/image-20240113191526490.png"
alt="image-20240113191526490" /></p>
<blockquote>
<p>capture IR <code>01</code>, the fixed is for easier fault
detection</p>
</blockquote>
<p><img src="/2023/11/28/jtag/image-20231129232443249.png"
alt="image-20231129232443249" /></p>
<p><img src="/2023/11/28/jtag/image-20231129233218011.png"
alt="image-20231129233218011" /></p>
<blockquote>
<p>After power-up, they may not be in sync, but there is a trick. Look
at the state machine and notice that no matter what state you are, if
<em>TMS stays at "1" for five clocks</em>, a TAP controller goes back to
the state "Test-Logic Reset". That's used to synchronize the TAP
controllers.</p>
</blockquote>
<blockquote>
<p>It is important to note that in a typical Boundary-Scan test, the
time between launching a signal from driver (at the falling edge of test
clock (TCK) in the <code>Update-DR</code> or <code>Update-IR</code> TAP
Controller state) and capturing that signal (at the rising edge of TCK
in the <code>Caputre-DR</code> TAP Controller state) is <strong>no less
tha 2.5 TCK cycles</strong></p>
</blockquote>
<p>Further, the time between successive launches on a driver is governed
- not only by the TCk rate - but by the amount of serial data shifting
needed to load the next pattern data in the concatenated Boundary-Scan
Registers of the Boundary-Scan chain</p>
<blockquote>
<p>Thus the effective test data rate of a driver could be thousands of
the times lower than the TCK rate</p>
<ol type="1">
<li>For DC-coupled interconnect, this time is of no concern</li>
<li>For AC-coupled interconnect, the signal may easily decay partially
or completely before it can be captured</li>
<li>If only partial decay occurs before capture, that decay will very
likely be completed before the driver produces the next edge</li>
</ol>
</blockquote>
<h2 id="ac-coupling">AC-coupling</h2>
<p>In general, AC-coupling can distort a signal transmitted across a
channel depending on its frequency.</p>
<p><code>Figure 5</code></p>
<ul>
<li>The high frequency signal is relatively unaffected by the
coupling</li>
<li>The low frequency signal is severely impacted
<ol type="1">
<li>it decays to <span class="math inline">\(V_T\)</span> after a few
time constants</li>
<li>its amplitude is double the input amplitude &gt; transient response,
before AC-coupling capacitor: <span class="math inline">\(-A_p \to
A_p\)</span>; after AC-coupling capacitor <span
class="math inline">\(V_T \to V_T+2A_p\)</span> &gt; A key item to note
is that the transitions in the original signal are preserved, although
their start and end points are offset &gt; &gt; compared to where they
were in the high frequency</li>
</ol></li>
</ul>
<h2 id="test-signal-implementation">Test signal implementation</h2>
<p>The test data is either the content of the Boundary-Scan Register
Update latch (U) when executing the (DC) EXTEST instruction, or an
<strong>"AC Signal"</strong> when an <em>AC testing instruction</em> is
loaded into the device.</p>
<blockquote>
<p>The AC signal is a test waveform suited for transmission through
AC-coupling</p>
</blockquote>
<p><img src="/2023/11/28/jtag/image-20240113184502597.png"
alt="image-20240113184502597" /></p>
<h2 id="test-signal-reception">Test signal reception</h2>
<ul>
<li>When <em>an AC testing instruction</em> is loaded, a specialized
test receiver detects transitoins of the AC signal seen at the input and
determines if this represents a logic '0' or '1'</li>
<li>When <em>EXTEST</em> is loaded, the input signal level is detected
and sent to the output of the test receiver to the Boundary-Scan
Register cell</li>
</ul>
<p>When testing for a shorted capacitor, the <em>test software</em> must
ensure that enough time has passed for the signal to decay before
entering <em>Capture-DR</em>, either by stopping TCk or by spending
additional TCK cycles in the <em>Run-Test/Idle</em> TAP Controller
state</p>
<h2 id="extest_pulse-extest_train">EXTEST_PULSE &amp; EXTEST_TRAIN</h2>
<blockquote>
<p>The two new AC-test instructions provided by this standard differ
primarily in the number and timing of transitions to provide flexibility
in dealing with the specific dynamic behavior of the channels being
tested</p>
</blockquote>
<p><strong>AC Test Signal</strong> essentially modulates test data so
that it will propagate through AC-coupled channels, for devices that
contatin AC pins</p>
<blockquote>
<p>Tools should use the <strong>EXTEST_PULSE</strong> instruction unless
there is a specific requirement for the <strong>EXTEST_TRAIN</strong>
instruction</p>
</blockquote>
<h3 id="extest_pulse">EXTEST_PULSE</h3>
<blockquote>
<p>Generate <strong>two</strong> additional driver transitions and
allows a tester to vary the <strong>time</strong> between them dependent
on how many TCK cycles the TAP is left in the <em>Run-Test/Idle</em> TAP
Controller state.</p>
<p>This is intended to allow any undesired transient condition to decay
to a <strong>DC steady-state value</strong> when that will make the
final transition more reliably detectable</p>
<p>The duration in the <em>Run-Test/Idle</em> TAP Controller state
should be <strong>at least three times</strong> the high-pass coupling
time constant. This allows the <em>first additional transition</em> to
decay away to the <strong>DC steady-state value</strong> for the
channel, and ensures that the full amplitude of the <em>final
transition</em> is added to or subtracted from that steady-state
value</p>
<p>This establishes a <em>known initial condition</em> for the <em>final
transition</em> and permits reliable specification of the detection
threshold of the test receiver</p>
</blockquote>
<p><img src="/2023/11/28/jtag/image-20240113190314947.png"
alt="image-20240113190314947" /></p>
<h3 id="extest_train">EXTEST_TRAIN</h3>
<blockquote>
<p>Generate <strong>multiple</strong> additional transitions, the
<strong>number</strong> dependent on how long the TAP is left in the
<em>Run-Test/Idle</em> TAP Controller state</p>
<p>This is intended to allow any undesired transient condition to decay
to an <strong>AC steady-state value</strong> when that will make the
final transition more reliably detectable</p>
</blockquote>
<p><img src="/2023/11/28/jtag/image-20240113190345323.png"
alt="image-20240113190345323" /></p>
<h2 id="ieee-std-1149.6-2003">IEEE Std 1149.6-2003</h2>
<p>This standard is built on top of IEEE Std 1149.1 using the same Test
Access Port structure and Boundary-Scan architecture.</p>
<ul>
<li>It adds the concept of a "test receiver" to input pins that are
expected to handle <strong>differential and/or AC-coupling</strong></li>
<li>It adds two new instructions that cause drivers to emit AC waveforms
that are processed by test receivers.</li>
</ul>
<h2 id="jtag-instruction">JTAG Instruction</h2>
<h2 id="implementation">Implementation</h2>
<ul>
<li>AC mode hysteresis, detect transistion</li>
<li>DC mode threshold is determined by jtag initial value</li>
</ul>
<h2 id="reference">reference</h2>
<p>IEEE Std 1149.1-2001, IEEE Standard Test Access Port and
Boundary-Scan Architecture, IEEE, 2001</p>
<p>IEEE Std 1149.6-2003, IEEE Standard for BoundaryScan Testing of
Advanced Digital Networks, IEEE, 2003</p>
<p>IEEE 1149.6 Tutorial | Testing AC-coupled and Differential High-speed
Nets [<a
target="_blank" rel="noopener" href="https://www.asset-intertech.com/resources/eresources/ieee-11496-tutorial-testing-ac-coupled-and-differential-high-speed-nets/">https://www.asset-intertech.com/resources/eresources/ieee-11496-tutorial-testing-ac-coupled-and-differential-high-speed-nets/</a>]</p>
<p>Prof. James Chien-Mo Li, Lab of Dependable Systems, National Taiwan
University. VLSI Testing [<a
target="_blank" rel="noopener" href="http://cc.ee.ntu.edu.tw/~cmli/VLSItesting/">http://cc.ee.ntu.edu.tw/~cmli/VLSItesting/</a>]</p>
<p>K.P. Parker, The Boundary Scan Handbook, 3rd ed., Kluwer Academic,
2003.</p>
<p>B. Eklow, K. P. Parker and C. F. Barnhart, "IEEE 1149.6: a
boundary-scan standard for advanced digital networks," in IEEE Design
&amp; Test of Computers, vol. 20, no. 5, pp. 76-83, Sept.-Oct. 2003,
doi: 10.1109/MDT.2003.1232259.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/11/14/DigitalModels/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/11/14/DigitalModels/" class="post-title-link" itemprop="url">Digital Delay Model</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-11-14 00:14:22" itemprop="dateCreated datePublished" datetime="2023-11-14T00:14:22+00:00">2023-11-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-07-25 09:22:30" itemprop="dateModified" datetime="2024-07-25T09:22:30+00:00">2024-07-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="effective-switching-resistance">Effective Switching
resistance</h2>
<p><img src="/2023/11/14/DigitalModels/image-20231114001209252.png"
alt="image-20231114001209252" /></p>
<blockquote>
<p><a
target="_blank" rel="noopener" href="https://www.eecis.udel.edu/~vsaxena/courses/ece445/s19/Lecture%20Notes/lec15_ece445.pdf">https://www.eecis.udel.edu/~vsaxena/courses/ece445/s19/Lecture%20Notes/lec15_ece445.pdf</a></p>
</blockquote>
<div class="pdf-container" data-target="/pdfs/chapter5_ex_sol.pdf" data-height="500px"></div>
<h2 id="wire-delay">wire delay</h2>
<h3 id="the-elmore-delay">The Elmore Delay</h3>
<p><img src="/2023/11/14/DigitalModels/image-20230624234813719.png"
alt="image-20230624234813719" /></p>
<p><img src="/2023/11/14/DigitalModels/image-20230624234940864.png"
alt="image-20230624234940864" /></p>
<p><img src="/2023/11/14/DigitalModels/image-20230625001756173.png"
alt="image-20230625001756173" /></p>
<blockquote>
<p>Basic idea: use of <strong>mean</strong> of <span
class="math inline">\(v&#39;(t)\)</span> to approximate
<strong>median</strong> of <span
class="math inline">\(v&#39;(t)\)</span></p>
</blockquote>
<p><img src="/2023/11/14/DigitalModels/image-20230624235148246.png"
alt="image-20230624235148246" /></p>
<p><img src="/2023/11/14/DigitalModels/image-20230625002239199.png"
alt="image-20230625002239199" /></p>
<blockquote>
<p>Elmore delay approximates the <strong>median</strong> of <span
class="math inline">\(h(t)\)</span> by the <strong>mean</strong> of
<span class="math inline">\(h(t)\)</span></p>
</blockquote>
<h3 id="distributed-rc-line">Distributed RC-Line</h3>
<p><img src="/2023/11/14/DigitalModels/image-20230624224005736.png"
alt="image-20230624224005736" /></p>
<h3 id="lumped-approximations">Lumped approximations</h3>
<h4 id="rc-models"><span class="math inline">\(rc\)</span>-models</h4>
<p>If your simulator does not support a distributed <span
class="math inline">\(rc\)</span>-model, or if the computational
complexity of these models slows down your simulation too much, you can
construct a simple yet accurate model yourself by approximating the
distributed <span class="math inline">\(rc\)</span> by a lumped RC
network with a limited number of elements</p>
<p><img src="/2023/11/14/DigitalModels/image-20230624230057265.png"
alt="image-20230624230057265" /></p>
<blockquote>
<p>The accuracy of the model is determined by the number of stages. For
instance, the error of the <span class="math inline">\(\Pi -3\)</span>
model is less than 3%, which is generally sufficient.</p>
</blockquote>
<h4 id="why-use-pi-model">Why use "<span
class="math inline">\(\Pi\)</span> Model"</h4>
<p><img src="/2023/11/14/DigitalModels/image-20230624230800255.png"
alt="image-20230624230800255" /></p>
<h4 id="examples">examples</h4>
<p><img src="/2023/11/14/DigitalModels/image-20230624224643487.png"
alt="image-20230624224643487" /></p>
<p><img src="/2023/11/14/DigitalModels/image-20230624224923241.png"
alt="image-20230624224923241" /></p>
<h2 id="wire-inductive-effect">Wire Inductive Effect</h2>
<ul>
<li>RC delay increases quadratically with length</li>
<li>LC delay (speed of light flight time) increases linearly with
length</li>
</ul>
<blockquote>
<p>Inductance will only be important to the delay of low-resistance
signals such as wide clock lines</p>
</blockquote>
<h3 id="wave">wave</h3>
<p>Signal propagates over the wire as a <strong>wave</strong> (rather
than <strong>diffusing</strong> as in <span
class="math inline">\(rc\)</span> only models)</p>
<blockquote>
<p>Signal propagates by alternately transferring energy from capacitive
to inductive modes</p>
</blockquote>
<h2 id="reference">reference</h2>
<p>Akio Kitagawa, Analog layout design <a
target="_blank" rel="noopener" href="https://mixsignal.files.wordpress.com/2013/03/analog-layout.pdf">https://mixsignal.files.wordpress.com/2013/03/analog-layout.pdf</a></p>
<p>THE WIRE <a
target="_blank" rel="noopener" href="http://bwrcs.eecs.berkeley.edu/Classes/icdesign/ee141_f01/Notes/chapter4.pdf">http://bwrcs.eecs.berkeley.edu/Classes/icdesign/ee141_f01/Notes/chapter4.pdf</a></p>
<p>Anoop Veliyath, Design Engineer, Cadence Design Systems. Accurately
Modeling Transmission Line Behavior with an LC Network-based Approach
[<a
target="_blank" rel="noopener" href="https://www.pspice.com/sites/default/files/Transmission_Line_Modeling.pdf">pdf</a>]</p>
<p>Mark Horowitz. Lecture 2: Wires and Wire Models [<a
target="_blank" rel="noopener" href="https://web.stanford.edu/class/archive/ee/ee371/ee371.1066/lectures/Old/lect_02.pdf">pdf</a>]</p>
<p>Neil Weste and David Harris. 2010. CMOS VLSI Design: A Circuits and
Systems Perspective (4th. ed.). Addison-Wesley Publishing Company,
USA.</p>
<p>Cheng-Kok Koh. EE695K Modeling and Optimization of High Performance
Interconnect [<a
target="_blank" rel="noopener" href="https://engineering.purdue.edu/~chengkok/ee695K/lec3a.pdf">lec3a_pdf</a>]</p>
<p>Vishal Saxena. ECE 445 Intro to VLSI Design: Lectures for Spring 2019
<a
target="_blank" rel="noopener" href="https://www.eecis.udel.edu/~vsaxena/courses/ece445/s19/ECE445.htm">https://www.eecis.udel.edu/~vsaxena/courses/ece445/s19/ECE445.htm</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/11/10/random/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/11/10/random/" class="post-title-link" itemprop="url">Random Process</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-11-10 13:26:31" itemprop="dateCreated datePublished" datetime="2023-11-10T13:26:31+00:00">2023-11-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-07-25 09:22:30" itemprop="dateModified" datetime="2024-07-25T09:22:30+00:00">2024-07-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/noise/" itemprop="url" rel="index"><span itemprop="name">noise</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="random-signals-sampling">Random Signals Sampling</h2>
<p><img src="/2023/11/10/random/image-20240428162643394.png"
alt="image-20240428162643394" /></p>
<p><img src="/2023/11/10/random/image-20240428162655969.png"
alt="image-20240428162655969" /></p>
<p><img src="/2023/11/10/random/image-20240428162735492.png"
alt="image-20240428162735492" /></p>
<blockquote>
<p>Alan V Oppenheim, Ronald W. Schafer. Discrete-Time Signal Processing,
3rd edition</p>
</blockquote>
<hr />
<blockquote>
<p><img src="/2023/11/10/random/image-20240428161506523.png"
alt="image-20240428161506523" /></p>
<p>[<a
target="_blank" rel="noopener" href="https://dsp.stackexchange.com/a/17348/59253">https://dsp.stackexchange.com/a/17348/59253</a>]</p>
</blockquote>
<h2 id="lti-systems-on-wss-processes">LTI Systems on WSS Processes</h2>
<p><img src="/2023/11/10/random/image-20240427162827347.png"
alt="image-20240427162827347" /></p>
<p><img src="/2023/11/10/random/image-20240427170024123.png"
alt="image-20240427170024123" /></p>
<blockquote>
<p>Topic 6 Random Processes and Signals [<a
target="_blank" rel="noopener" href="https://www.robots.ox.ac.uk/~dwm/Courses/2TF_2021/N6.pdf">https://www.robots.ox.ac.uk/~dwm/Courses/2TF_2021/N6.pdf</a>]</p>
<p>Alan V. Oppenheim, Introduction To Communication, Control, And Signal
Processing [<a
target="_blank" rel="noopener" href="https://ocw.mit.edu/courses/6-011-introduction-to-communication-control-and-signal-processing-spring-2010/a6bddaee5966f6e73450e6fe79ab0566_MIT6_011S10_notes.pdf">https://ocw.mit.edu/courses/6-011-introduction-to-communication-control-and-signal-processing-spring-2010/a6bddaee5966f6e73450e6fe79ab0566_MIT6_011S10_notes.pdf</a>]</p>
</blockquote>
<h2 id="reference">reference</h2>
<p>Iain Collings. Random Processes [<a
target="_blank" rel="noopener" href="https://youtube.com/playlist?list=PLx7-Q20A1VYKRLHUMSt2YOORrVz8iH-Kq&amp;si=cZjlH7zcHcR0zWg6">https://youtube.com/playlist?list=PLx7-Q20A1VYKRLHUMSt2YOORrVz8iH-Kq&amp;si=cZjlH7zcHcR0zWg6</a>]
Spectral content of NRZ test patterns [<a
target="_blank" rel="noopener" href="https://www.analog.com/media/en/technical-documentation/tech-articles/hfta110-spectral-content-of-nrz-test-patterns.pdf">https://www.analog.com/media/en/technical-documentation/tech-articles/hfta110-spectral-content-of-nrz-test-patterns.pdf</a>]</p>
<p>Lab 2: Spectrum analysis [<a
target="_blank" rel="noopener" href="https://ece.uccs.edu/~mwickert/ece4670/lecture_notes/Lab2.pdf">https://ece.uccs.edu/~mwickert/ece4670/lecture_notes/Lab2.pdf</a>]</p>
<p>PSD (Power spectral density) explanation. [<a
target="_blank" rel="noopener" href="https://dsp.stackexchange.com/a/8151">https://dsp.stackexchange.com/a/8151</a>]</p>
<p>Dennis Sun. STAT 350 2020 Probability and Stochastic Processes for
Electrical Engineers [<a
target="_blank" rel="noopener" href="https://dlsun.github.io/Stat350-S20/">https://dlsun.github.io/Stat350-S20/</a>]</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/11/06/delta-sigma/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/11/06/delta-sigma/" class="post-title-link" itemprop="url">Delta-Sigma Modulator</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-11-06 21:39:25" itemprop="dateCreated datePublished" datetime="2023-11-06T21:39:25+00:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-07-25 09:22:30" itemprop="dateModified" datetime="2024-07-25T09:22:30+00:00">2024-07-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="oversampling">Oversampling</h2>
<p>In the oversampling process, samples per second are more than what is
required, according to Nyquist-Shannon criteria. Allowing more sample
rates does not influence the signal power and total quantization noise
power. Therefore, the SNR remains unchanged.</p>
<p>The advantage of oversampling is that the quantization noises are
spread over a larger frequency range. This reduces the quantization
noise spectral density (the SNR over the frequency of interest is
increased).</p>
<blockquote>
<p>Comparing normal sampling and oversampling, the quantization noise
power is reduced by 3 dB for every doubling of oversampling ratio (OSR),
where OSR is the ratio of sampling frequency to twice the frequency of
the signal.</p>
</blockquote>
<h2 id="the-delta-modulator">The Delta Modulator</h2>
<ol type="a">
<li>A delta modulator and (b) its simple implementation</li>
</ol>
<p><img src="/2023/11/06/delta-sigma/image-20230202224406667.png"
alt="image-20230202224406667" /></p>
<p>The high loop gain ensures that <span class="math inline">\(V_F
\simeq V_{in}\)</span></p>
<p>The principal difficulty with the delta modulator is that the output
digital representation in fact contains only the <strong>derivative of
the input</strong>, as can be seen by noting <span
class="math inline">\(V_F=\int D_{out}dt\)</span>, i.e. <span
class="math display">\[
D_{out} = \frac{dV_F}{dt}
\]</span></p>
<ul>
<li>This differentiation alters the signal spectrum</li>
<li>attenuates the low-frequency content of the signal</li>
<li>and amplifies high-frequency noise</li>
</ul>
<h2 id="delta-sigma-modulators">Delta-Sigma modulators</h2>
<h2 id="charge-balancing">Charge Balancing</h2>
<h2 id="decimation-filters">Decimation Filters</h2>
<p>A simple time-domain analysis shows that a <strong>sinc
filter</strong> is a suitable decimation filter for a first-order
modulator. Such a filter has a rectangular impulse response, and can be
implemented as a <strong>counter</strong>.</p>
<h2 id="reference">reference</h2>
<p>B. Razavi, "The Delta-Sigma Modulator [A Circuit for All Seasons],"
IEEE Solid-State Circuits Magazine, Volume. 8, Issue. 20, pp. 10-15,
Spring 2016.</p>
<p>Pavan, Shanthi, Richard Schreier, and Gabor Temes. (2016) 2016.
Understanding Delta-Sigma Data Converters. 2nd ed. Wiley.</p>
<p>Richard Schreier (2022). Delta Sigma Toolbox
(https://www.mathworks.com/matlabcentral/fileexchange/19-delta-sigma-toolbox),
MATLAB Central File Exchange. Retrieved June 28, 2022.</p>
<p>Micheal, A., P., Pertijs., Johan, H., Huijsing., Pertijs., Johan, H.,
Huijsing. (2006). Precision Temperature Sensors in CMOS Technology.</p>
<p>Manolis Terrovitis and Ken Kundert. <a
target="_blank" rel="noopener" href="https://designers-guide.org/analysis/delta-sigma.pdf">Device noise
simulation of delta-sigma modulators</a> and associated Matlab scripts:
<a
target="_blank" rel="noopener" href="https://designers-guide.org/analysis/scripts.tar.gz">scripts.tar.gz</a>,
<a
target="_blank" rel="noopener" href="https://designers-guide.org/analysis/scripts.zip">scripts.zip</a>.</p>
<p>Oversampling and Noise Shaping in Delta-Sigma Modulation [<a
target="_blank" rel="noopener" href="https://resources.system-analysis.cadence.com/blog/msa2021-oversampling-and-noise-shaping-in-delta-sigma-modulation">https://resources.system-analysis.cadence.com/blog/msa2021-oversampling-and-noise-shaping-in-delta-sigma-modulation</a>]</p>
<p>David A. Johns. ECE1371H - Advanced Analog Circuits - Spring 2014 [<a
target="_blank" rel="noopener" href="https://www.eecg.toronto.edu/~johns/ece1371/ece1371.html">https://www.eecg.toronto.edu/~johns/ece1371/ece1371.html</a>]</p>
<p>R.S. Ashwin Kumar. EE698I: Mixed-signal IC design [<a
target="_blank" rel="noopener" href="https://home.iitk.ac.in/~ashwinrs/2023_EE698I.html">https://home.iitk.ac.in/~ashwinrs/2023_EE698I.html</a>]</p>
<p>R.S. Ashwin Kumar. EE698W: Analog circuits for signal processing [<a
target="_blank" rel="noopener" href="https://home.iitk.ac.in/~ashwinrs/2022_EE698W.html">https://home.iitk.ac.in/~ashwinrs/2022_EE698W.html</a>]</p>
<p>Vishal Saxena. ECE 697 Delta-Sigma Data Converter Design [<a
target="_blank" rel="noopener" href="https://www.eecis.udel.edu/~vsaxena/courses/ece697A/s10/ECE697.htm">https://www.eecis.udel.edu/~vsaxena/courses/ece697A/s10/ECE697.htm</a>]</p>
<p>-, ECE 615 Mixed Signal IC Design Spring 2016, Boise State University
[<a
target="_blank" rel="noopener" href="https://www.eecis.udel.edu/~vsaxena/courses/ece615/s16/ECE615.htm">https://www.eecis.udel.edu/~vsaxena/courses/ece615/s16/ECE615.htm</a>]</p>
<p>Richard E. Schreier, ECE 1371 Advanced Analog Circuits Notes 2015 [<a
target="_blank" rel="noopener" href="http://individual.utoronto.ca/schreier/ece1371-2015.html">http://individual.utoronto.ca/schreier/ece1371-2015.html</a>]</p>
<p>Dai, Getting Started With Delta-Sigma ADC Design [<a
target="_blank" rel="noopener" href="https://everynanocounts.com/2022/06/02/getting-started-with-delta-sigma-adc-design/">https://everynanocounts.com/2022/06/02/getting-started-with-delta-sigma-adc-design/</a>]</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/28/periodic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/10/28/periodic/" class="post-title-link" itemprop="url">Periodic Analysis</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-10-28 16:22:29" itemprop="dateCreated datePublished" datetime="2023-10-28T16:22:29+00:00">2023-10-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-07-25 09:22:30" itemprop="dateModified" datetime="2024-07-25T09:22:30+00:00">2024-07-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/noise/" itemprop="url" rel="index"><span itemprop="name">noise</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="pss-and-hb-overview">PSS and HB Overview</h1>
<p>The steady-state response is the response that results after any
transient effects have dissipated.</p>
<p><strong>The large signal solution is the starting point for
small-signal analyses</strong>, including periodic AC, periodic transfer
function, periodic noise, periodic stability, and periodic scattering
parameter analyses.</p>
<blockquote>
<p>Designers refer periodic steady state analysis in <em>time
domain</em> as <strong>"PSS"</strong> and corresponding <em>frequency
domain</em> notation as <strong>"HB"</strong></p>
</blockquote>
<p><img src="/2023/10/28/periodic/image-20231028163033255.png"
alt="image-20231028163033255" /></p>
<h1 id="harmonic-balance-analysis">Harmonic Balance Analysis</h1>
<p>The idea of harmonic balance is to find a set of port voltage
waveforms (or, alternatively, the harmonic voltage components) that give
the same currents in both the <em>linear-network equations</em> and
<em>nonlinear-network equations</em></p>
<blockquote>
<p>that is, the currents satisfy Kirchoff's current law</p>
</blockquote>
<p>Define an <strong>error function</strong> at <em>each harmonic</em>,
<span class="math inline">\(f_k\)</span>, where <span
class="math display">\[
f_k = I_{\text{LIN}}(k\omega) + I_{\text{NL}}(k\omega)
\]</span> where <span class="math inline">\(k=0, 1, 2,...,K\)</span></p>
<blockquote>
<p>Note that each <span class="math inline">\(f_k\)</span> is implicitly
a function of all voltage components <span
class="math inline">\(V(k\omega)\)</span></p>
</blockquote>
<h2 id="newton-solution-of-the-harmonic-balance-equation">Newton
Solution of the Harmonic-Balance Equation</h2>
<h3 id="iterative-process-and-jacobian-formulation">Iterative Process
and Jacobian Formulation</h3>
<p><img src="/2023/10/28/periodic/image-20231108222451147.png"
alt="image-20231108222451147" /></p>
<p>The elements of the Jacobian are the derivatives <span
class="math display">\[
\frac{\partial F_{\text{n,k}}}{\partial _{\text{m,l}}}
\]</span> where <span class="math inline">\(n\)</span> and <span
class="math inline">\(m\)</span> are the port indices <span
class="math inline">\((1,N)\)</span>, and <span
class="math inline">\(k\)</span> and <span
class="math inline">\(l\)</span> are the harmonic indices <span
class="math inline">\((0,...,K)\)</span></p>
<h3 id="selecting-the-number-of-harmonics-and-time-samples">Selecting
the Number of Harmonics and Time Samples</h3>
<p>In theory, the waveforms generated in nonlinear analysis have an
infinite number of harmonics, so a complete description of the operation
of a <strong>nonlinear</strong> circuit would appear to require current
and voltage vectors of <em>infinite</em> dimension.</p>
<p>Fortunately, the magnitudes of frequency components invariably
decrease with frequency; otherwise the time wavefroms would represent
infinite power.</p>
<h3 id="initial-estimate">Initial Estimate</h3>
<p>One important property of Newton's method is that its speed and
reliability of convergence depend strongly upon the initial estimate of
the solution vector.</p>
<h1 id="shooting-newton">Shooting Newton</h1>
<h1 id="nonlinearity-linear-time-varying-nature">Nonlinearity &amp;
Linear Time-Varying Nature</h1>
<h2 id="nonlinearity-nature">Nonlinearity Nature</h2>
<p>The nonlinearity causes the signal to be replicated at multiples of
the carrier, an effect referred to as <strong>harmonic
distortion</strong>, and adds a skirt to the signal that increases its
bandwidth, an effect referred to as <strong>intermodulation
distortion</strong></p>
<p><img src="/2023/10/28/periodic/image-20231029093504162.png"
alt="image-20231029093504162" /></p>
<blockquote>
<p>It is possible to eliminate the effect of <em>harmonic
distortion</em> with a bandpass filter, however the frequency of the
<em>intermodulation distortion</em> products overlaps the frequency of
the desired signal, and so cannot be completely removed with
filtering.</p>
</blockquote>
<h2 id="time-varying-linear-nature">Time-Varying Linear Nature</h2>
<p><img src="/2023/10/28/periodic/image-20231029101042671.png"
alt="image-20231029101042671" /></p>
<blockquote>
<p><strong>linear</strong> with respect to <span
class="math inline">\(v_{in}\)</span> and
<strong>time-varying</strong></p>
</blockquote>
<p>Given <span class="math inline">\(v_{in}(t)=m(t)\cos (\omega_c
t)\)</span> and LO signal of <span
class="math inline">\(\cos(\omega_{LO} t)\)</span>, then <span
class="math display">\[
v_{out}(t) = \text{LPF}\{m(t)\cos(\omega_c t)\cdot \cos(\omega_{LO} t)\}
\]</span> and <span class="math display">\[
v_{out}(t) = m(t)\cos((\omega_c - \omega_{LO})t)
\]</span></p>
<blockquote>
<p>A <em>linear periodically-varying</em> transfer function implements
<em>frequency translation</em></p>
</blockquote>
<h1 id="periodic-small-signal-analyses">Periodic small signal
analyses</h1>
<p><img src="/2023/10/28/periodic/image-20231108231145369.png"
alt="image-20231108231145369" /></p>
<h2 id="analysis-in-simulator">Analysis in Simulator</h2>
<ol type="1">
<li>LPV analyses start by performing a periodic analysis to compute the
<strong>periodic operating point</strong> with only the <strong>large
clock signal</strong> applied (the LO, the clock, the carrier,
etc.).</li>
<li>The circuit is then <strong>linearized about this time-varying
operating point</strong> (expand about the periodic equilibrium point
with a Taylor series and discard all but the first-order term)</li>
<li>and the <strong>small information signal</strong> is applied. The
response is calculated using linear time-varying analysis</li>
</ol>
<blockquote>
<p>Versions of this type of small-signal analysis exists for both
harmonic balance and shooting methods</p>
</blockquote>
<blockquote>
<p>PAC is useful for predicting the output sidebands produced by a
particular input signal</p>
<p>PXF is best at predicting the input images for a particular
output</p>
</blockquote>
<h2 id="conversion-matrix-analysis">Conversion Matrix Analysis</h2>
<p><strong>Large-signal/small-signal analysis</strong>, or
<strong>conversion matrix analysis</strong>, is useful for a large class
of problems wherein a <strong>nonlinear device</strong> is driven, or
"pumped" by a <strong>single large sinusoidal signal</strong>; another
signal, much smaller, is applied; and we seek only the <strong>linear
response to the small signal</strong>.</p>
<blockquote>
<p>The most common application of this technique is in the design of
mixers and in nonlinear noise analysis</p>
</blockquote>
<ol type="1">
<li>First, analyzing the <strong>nonlinear device</strong> under
large-signal excitatin only, where the harmonic-balance method can be
applied</li>
<li>Then, the <strong>nonlinear elements</strong> in the device's
equivalent circuit are then <strong>linearized</strong> to create
<strong>small-signal, linear, time-varying elements</strong></li>
<li>Finally, a <strong>small-signal analysis</strong> is performed</li>
</ol>
<h3 id="element-linearized">Element Linearized</h3>
<p>Below shows a <strong>nonlinear resistive element</strong>, which has
the <span class="math inline">\(I/V\)</span> relationship <span
class="math inline">\(I=f(V)\)</span>. It is driven by a
<em>large-signal voltage</em></p>
<p><img src="/2023/10/28/periodic/image-20220511203515431.png"
alt="image-20220511203515431" /></p>
<p>Assuming that <span class="math inline">\(V\)</span> consists of the
sum of a large-signal component <span class="math inline">\(V_0\)</span>
and a small-signal component <span class="math inline">\(v\)</span>,
with Taylor series <span class="math display">\[
f(V_0+v) = f(V_0)+\frac{d}{dV}f(V)|_{V=V_0}\cdot
v+\frac{1}{2}\frac{d^2}{dV^2}f(V)|_{V=V_0}\cdot v^2+...
\]</span> The small-signal, incremental current is found by subtracting
the large-signal component of the current <span class="math display">\[
i(v)=I(V_0+v)-I(V_0)
\]</span> If <span class="math inline">\(v \ll V_0\)</span>, <span
class="math inline">\(v^2\)</span>, <span
class="math inline">\(v^3\)</span>,... are negligible. Then, <span
class="math display">\[
i(v) = \frac{d}{dV}f(V)|_{V=V_0}\cdot v
\]</span></p>
<blockquote>
<p><strong>linearized about this time-varying operating
point:</strong></p>
<p><strong>expand about the periodic equilibrium point with a Taylor
series and discard all but the first-order term</strong></p>
</blockquote>
<p><span class="math inline">\(V_0\)</span> need not be a DC quantity;
it can be a <strong>time-varying large-signal voltage</strong> <span
class="math inline">\(V_L(t)\)</span> and that <span
class="math inline">\(v=v(t)\)</span>, a function of time. Then</p>
<p><span class="math display">\[
i(t)=g(t)v(t)
\]</span> where <span
class="math inline">\(g(t)=\frac{d}{dV}f(V)|_{V=V_L(t)}\)</span></p>
<blockquote>
<p>The <em>time-varying</em> conductance <span
class="math inline">\(g(t)\)</span>, is the derivative of the element's
<span class="math inline">\(I/V\)</span> characteristic at the
<em>large-signal voltage</em></p>
<p>By an analogous derivation, one could have a current-controlled
resistor with the <span class="math inline">\(V/I\)</span>
characteristic <span class="math inline">\(V = f_R(I)\)</span> and
obtain the <em>small-signal</em> <span
class="math inline">\(v/i\)</span> relation <span
class="math display">\[
v(t) = r(t)i(t)
\]</span> where <span class="math inline">\(r(t) =
\frac{d}{dI}f_R(I)|_{I=I_L(t)}\)</span></p>
</blockquote>
<p>A <strong>nonlinear element</strong> excited by <em>two tones</em>
supports currents and voltages at mixing frequencies <span
class="math inline">\(m\omega_1+n\omega_w\)</span>, where <span
class="math inline">\(m\)</span> and <span
class="math inline">\(n\)</span> are integers. If one of those tones,
<span class="math inline">\(\omega_1\)</span> has such a <strong>low
level</strong> that it does not generate harmonics and the other is a
large-signal sinusoid at <span class="math inline">\(\omega_p\)</span>,
then the mixing frequencies are <span
class="math inline">\(\omega=\pm\omega_1+n\omega_p\)</span>, which shown
in below figure</p>
<p><img src="/2023/10/28/periodic/image-20231108223600922.png"
alt="image-20231108223600922" /></p>
<p>A more compact representation of the mixing frequencies is <span
class="math display">\[
\omega_n=\omega_0+n\omega_p
\]</span> which includes only half of the mixing frequencies:</p>
<ul>
<li>the negative components of the lower sidebands
(<strong>LSB</strong>)</li>
<li>and the positive components of the upper sidebands
(<strong>USB</strong>)</li>
</ul>
<p><img src="/2023/10/28/periodic/image-20220511211336437.png"
alt="image-20220511211336437" /></p>
<blockquote>
<p>For real signal, positive- and negative-frequency components are
complex conjugate pairs</p>
</blockquote>
<h3 id="conversion-mattrix-as-bridge">Conversion Mattrix as Bridge</h3>
<p>The <strong>frequency-domain</strong> currents and voltages in a
<strong>time-varying</strong> circuit element are related by a
<strong>conversion matrix</strong></p>
<p>The <em>small-signal</em> voltage and current can be expressed in the
frequency notation as <span class="math display">\[
v&#39;(t) = \sum_{n=-\infty}^{\infty}V_ne^{j\omega_nt}
\]</span> and <span class="math display">\[
i&#39;(t) = \sum_{n=-\infty}^{\infty}I_ne^{j\omega_nt}
\]</span> where <span class="math inline">\(v&#39;(t)\)</span> and <span
class="math inline">\(i&#39;(t)\)</span> are <strong>not</strong>
Fourier series, which includes only half of the mixing frequencies</p>
<p>The conductance waveform <span class="math inline">\(g(t)\)</span>
can be expressed by its <strong>Fourier series</strong> <span
class="math display">\[
g(t)=\sum_{n=-\infty}^{\infty}G_ne^{jn\omega_pt}
\]</span> Which is harmonics of <em>large-signal</em> <span
class="math inline">\(\omega_p\)</span></p>
<p>Then the voltage and current are related by Ohm's law <span
class="math display">\[
i&#39;(t)=g(t)v&#39;(t)
\]</span> Then <span class="math display">\[
\sum_{k=-\infty}^{\infty}I_ke^{j\omega_kt}=\sum_{n=-\infty}^{\infty}\sum_{m=-\infty}^{\infty}G_nV_me^{j\omega_{m+n}t}
\]</span></p>
<blockquote>
<p>A linear periodically-varying transfer function implements
<strong>frequency translation</strong></p>
</blockquote>
<h1 id="cyclostationary-noise-analysis">Cyclostationary Noise
Analysis</h1>
<blockquote>
<p>which is referred to as a "periodic noise" or PNoise analysis</p>
</blockquote>
<h2 id="white-noise">White Noise</h2>
<blockquote>
<p>completely <strong>uncorrelated</strong> versus time</p>
<p>For white noise the PSD is a constant and the autocorrelation
function is an impulse centered at <span
class="math inline">\(0\)</span>, <span
class="math inline">\(R_n(t,\tau)=R(t)\delta(\tau)\)</span></p>
<p>The energy-storage elements cause the noise spectrum to be shaped and
the noise to be time-correlated.</p>
<p>This is a general property. It the noise has shape in the frequency
domain then the noise is correlated in time, and vice versa.</p>
</blockquote>
<h2 id="pnoise">PNOISE</h2>
<ul>
<li><p>In LPTV analysis, noise may <em>up-convert</em> or
<em>down-convert</em> by <span class="math inline">\(N\cdot f_c\)</span>
(<strong>noise folding</strong>)</p></li>
<li><p>PNOISE output is <strong>cyclostationary noise</strong></p>
<p>Described by a collection of PSDs at various sidebands: 0 PSDs at
various sidebands: <span class="math inline">\(0, \pm f_c, \pm2f_c,
\pm3f_c\)</span>, …</p></li>
</ul>
<blockquote>
<p><span class="math inline">\(f_c\)</span>: fundamental frequency of
PSS</p>
</blockquote>
<h3 id="simulation-of-switched-capacitor-noise">Simulation of
switched-capacitor noise</h3>
<blockquote>
<p>Periodic steady-state analysis is originally intended to analyze a
continuous-time circuit with periodic input signals or excitations.</p>
</blockquote>
<p>To simulate a switched-capacitor circuit appropriately, one needs to
recognize that the <strong>output of a switched capacitor circuit is a
discrete-time</strong> rather than a continuous-time signal. This
discrete-time signal should be treated as the output of the circuit
sampled after it has settled to the final value for each sampling
period.</p>
<p>There are two techniques that one can use to force the simulator to
evaluate the output signal correctly in the manner described</p>
<ul>
<li><p>First, in more recent versions of SpectreRF, PNOISE analysis
provides a specialized time-domain analysis method</p>
<p>By enabling this option, the simulator would analyze noise only
<strong>at particular time instants</strong></p></li>
<li><p>Second, on older versions of spectreRF, <strong>an explicit
(ideal) sample-and-hold</strong> block can be used similarly to force
the simulator to evaluate only the output of the circuit at the
<strong>correct time instants</strong>.</p>
<blockquote>
<p>Recall that a sample-and-hold would impose a <em>zero-order hold</em>
on a discrete-time signal; thus, the resulting sinc-shaped response in
the frequency domain has to be compensated for</p>
</blockquote></li>
</ul>
<h1 id="linear-time-varying">Linear Time Varying</h1>
<p>The response of a relaxed LTV system at a time <span
class="math inline">\(t\)</span> due to an impulse applied at a time
<span class="math inline">\(t − \tau\)</span> is denoted by <span
class="math inline">\(h(t, \tau)\)</span></p>
<blockquote>
<p>The first argument in the impulse response denotes the time of
observation.</p>
<p>The second argument indicates that the system was excited by an
impulse launched at a time <span class="math inline">\(\tau\)</span>
<em>prior to</em> the time of observation.</p>
<p>Thus, the response of an LTV system not only depends on how long
before the observation time it was excited by the impulse but also on
the observation instant.</p>
<p>The output <span class="math inline">\(y(t)\)</span> of an initially
relaxed LTV system with impulse response <span
class="math inline">\(h(t, \tau)\)</span> is given by the convolution
integral <span class="math display">\[
y(t) = \int_0^{\infty}h(t,\tau)x(t-\tau)d\tau
\]</span> Assuming <span class="math inline">\(x(t) = e^{j2\pi f
t}\)</span> <span class="math display">\[
y(t) = \int_0^{\infty}h(t,\tau)e^{j2\pi f (t-\tau)}d\tau = e^{j2\pi f
t}\int_0^{\infty}h(t,\tau)e^{-j2\pi f\tau}d\tau
\]</span> The (<em>time-varying</em>) frequency response can be
interpreted as <span class="math display">\[
H(j2\pi f, t) = \int_0^{\infty}h(t,\tau)e^{-j2\pi f\tau}d\tau
\]</span> Linear Periodically Time-Varying (LPTV) Systems, which is a
special case of an LTV system whose impulse response satisfies <span
class="math display">\[
h(t, \tau) = h(t+T_s, \tau)
\]</span> In other words, the response to an impulse remains unchanged
if the time at which the output is observed (<span
class="math inline">\(t\)</span>) and the time at which the impulse is
applied (denoted by <span class="math inline">\(t_1\)</span>) are both
shifted by <span class="math inline">\(T_s\)</span> <span
class="math display">\[
H(j2\pi f, t+T_s) = \int_0^{\infty}h(t+T_s,\tau)e^{-j2\pi f\tau}d\tau =
\int_0^{\infty}h(t,\tau)e^{-j2\pi f\tau}d\tau = H(j2\pi f, t)
\]</span> <span class="math inline">\(H(j2\pi f, t)\)</span> of an LPTV
system is periodic with timeperiod <span
class="math inline">\(T_s\)</span>, it can be expanded as a Fourier
series in <span class="math inline">\(t\)</span>, resulting in <span
class="math display">\[
H(j2\pi f, t) = \sum_{k=-\infty}^{\infty} H_k(j2\pi f)e^{j2\pi f_s k t}
\]</span> The coefficients of the Fourier series <span
class="math inline">\(H_k(j2\pi f)\)</span> are given by <span
class="math display">\[
H_k(j2\pi f) = \frac{1}{T_s}\int_0^{T_s} H(j2\pi f, t) e^{-j2\pi k f_s
t}dt
\]</span></p>
</blockquote>
<h2 id="lti-and-ltv">LTI and LTV</h2>
<p><img src="/2023/10/28/periodic/image-20231104145535168.png"
alt="image-20231104145535168" /></p>
<h2 id="linear-and-periodically-time-varying">Linear and Periodically
Time Varying</h2>
<blockquote>
<p>Gain varies periodically with time</p>
</blockquote>
<p><img src="/2023/10/28/periodic/image-20231104150000310.png"
alt="image-20231104150000310" /></p>
<p>Owing to <span class="math inline">\(H(j\omega, t) = H(j\omega,
t+T_s)\)</span>, <span class="math inline">\(H(j\omega,t)\)</span> can
be expanded in a <strong>Fourier Series</strong> <span
class="math display">\[
H(j\omega,t) = \sum_k H_k(j\omega)e^{jk\omega _s t}
\]</span> <img
src="/2023/10/28/periodic/image-20231104152637888.png" /></p>
<h3 id="response-of-an-lptv-system">Response of an LPTV System</h3>
<p><img src="/2023/10/28/periodic/image-20231104153142972.png"
alt="image-20231104153142972" /></p>
<p><img src="/2023/10/28/periodic/image-20231104153625881.png"
alt="image-20231104153625881" /></p>
<h3 id="harmonic-transfer-functions">Harmonic Transfer Functions</h3>
<p><img src="/2023/10/28/periodic/image-20231104155412790.png"
alt="image-20231104155412790" /></p>
<p><img src="/2023/10/28/periodic/image-20231104155447057.png"
alt="image-20231104155447057" /></p>
<blockquote>
<p>Harmonic Transfer Functions can be found using <em>PAC</em>
analysis</p>
</blockquote>
<h3 id="summary">Summary</h3>
<p><img src="/2023/10/28/periodic/image-20231104155732917.png"
alt="image-20231104155732917" /></p>
<p><img src="/2023/10/28/periodic/image-20231104155942718.png"
alt="image-20231104155942718" /></p>
<h2 id="sampled-lptv">Sampled LPTV</h2>
<p><img src="/2023/10/28/periodic/image-20231105175749755.png"
alt="image-20231105175749755" /></p>
<p>Move sampler before summation</p>
<p><img src="/2023/10/28/periodic/image-20231105174949907.png"
alt="image-20231105174949907" /></p>
<blockquote>
<p>Owing to <span class="math display">\[
k\omega_sT_sn=kn\cdot2\pi
\]</span> We get <span class="math display">\[
e^{jk\omega_s T_s n} = e^{jkn\cdot 2\pi} = 1
\]</span></p>
</blockquote>
<p><img src="/2023/10/28/periodic/image-20231105172503777.png"
alt="image-20231105172503777" /></p>
<blockquote>
<p>LPTV system sampled at <span class="math inline">\(T_s\)</span> is
equivalent to LTI system sampled at <span
class="math inline">\(T_s\)</span></p>
</blockquote>
<p><img src="/2023/10/28/periodic/image-20231105172615426.png"
alt="image-20231105172615426" /></p>
<p><img src="/2023/10/28/periodic/image-20231105173646462.png"
alt="image-20231105173646462" /></p>
<blockquote>
<p><span class="math display">\[
H_{\text{eq}}(j\omega) = \sum_k H_k(j\omega)
\]</span></p>
<p>The result derived above makes intuitive sense due to the
following.</p>
<p>When an <strong>LPTV</strong> system is excited by a tone at <span
class="math inline">\(f\)</span> , the output comprises of tones at
frequencies <span class="math inline">\(f + k f_s\)</span>, where <span
class="math inline">\(k\)</span> is an integer. When sampled at <span
class="math inline">\(f_s\)</span>, frequency components higher than
<span class="math inline">\(f_s\)</span> are aliased to <span
class="math inline">\(f\)</span> . Thus, if one is only interested in
the samples of the system's output, they could as well be produced by a
properly chosen <strong>LTI</strong> filter acting on an input tone at a
frequency <span class="math inline">\(f\)</span> .</p>
<p>Note that the equivalence holds only for samples, and not for the
waveforms. <span class="math inline">\(y(nT_s) = \hat{y}(nT_s)\)</span>,
but <span class="math inline">\(y(t)\)</span> need not equal <span
class="math inline">\(\hat{y}(t)\)</span></p>
</blockquote>
<p><img src="/2023/10/28/periodic/image-20231105173847572.png"
alt="image-20231105173847572" /></p>
<h2 id="finding-the-equivalent-filter">Finding the Equivalent
Filter</h2>
<blockquote>
<p>Frequency Domain Approach <span
class="math inline">\(H_{eq}(j\omega)=\sum_k H_k(j\omega)\)</span></p>
<p>Wasted effort in computing all <span
class="math inline">\(H_k\)</span> first and then adding them up.</p>
</blockquote>
<p>We prefer to employ Time Domain Approaches</p>
<p><img src="/2023/10/28/periodic/image-20231105221411598.png"
alt="image-20231105221411598" /></p>
<h3 id="reciprocity">Reciprocity</h3>
<p><img src="/2023/10/28/periodic/image-20231105223906470.png"
alt="image-20231105223906470" /></p>
<blockquote>
<p>Does not work with <em>controlled sources</em></p>
</blockquote>
<p><img src="/2023/10/28/periodic/image-20231105224203744.png"
alt="image-20231105224203744" /></p>
<h3 id="interreciprocity">Interreciprocity</h3>
<blockquote>
<p>Handle <em>controlled sources</em></p>
</blockquote>
<p><img src="/2023/10/28/periodic/image-20231105225346724.png"
alt="image-20231105225346724" /></p>
<p><img src="/2023/10/28/periodic/image-20231105225359292.png"
alt="image-20231105225359292" /></p>
<table>
<thead>
<tr class="header">
<th>origin</th>
<th>transformer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>VCVS</td>
<td>CCCS</td>
</tr>
<tr class="even">
<td>CCCS</td>
<td>VCVS</td>
</tr>
<tr class="odd">
<td>VCCS</td>
<td>VCCS</td>
</tr>
<tr class="even">
<td>CCVS</td>
<td>CCVS</td>
</tr>
</tbody>
</table>
<h1 id="reference">reference</h1>
<p>K. S. Kundert, "Introduction to RF simulation and its application,"
in IEEE Journal of Solid-State Circuits, vol. 34, no. 9, pp. 1298-1319,
Sept. 1999, doi: 10.1109/4.782091. [<a
target="_blank" rel="noopener" href="https://designers-guide.org/analysis/rf-sim.pdf">pdf</a>]</p>
<p>Stephen Maas, Nonlinear Microwave and RF Circuits, Second Edition ,
Artech, 2003.</p>
<p>Phillips, Joel R. and Kenneth S. Kundert. "Noise in mixers,
oscillators, samplers, and logic: an introduction to cyclostationary
noise." <em>Proceedings of the IEEE 2000 Custom Integrated Circuits
Conference (Cat. No.00CH37044)</em> (2000): 431-438. [<a
target="_blank" rel="noopener" href="https://designers-guide.org/theory/cyclo-preso.pdf">pdf</a>]</p>
<p>Karti Mayaram. ECE 521 Fall 2016 Analog Circuit Simulation:
Simulation of Radio Frequency Integrated Circuits [<a
target="_blank" rel="noopener" href="https://web.engr.oregonstate.edu/~karti/ece521/lec16_11_16.pdf">pdf1</a>,
<a
target="_blank" rel="noopener" href="https://web.engr.oregonstate.edu/~karti/ece521/lec16_11_23.pdf">pdf2</a>]</p>
<p>The Value Of RF Harmonic Balance Analyses For Analog Verification:
Frequency domain periodic large and small signal analyses. [<a
target="_blank" rel="noopener" href="https://semiengineering.com/the-value-of-rf-harmonic-balance-analyses-for-analog-verification/">https://semiengineering.com/the-value-of-rf-harmonic-balance-analyses-for-analog-verification/</a>]</p>
<p>Shanthi Pavan, "Demystifying Linear Time Varying Circuits"</p>
<p>S. Pavan and G. C. Temes, "Reciprocity and Inter-Reciprocity: A
Tutorial— Part I: Linear Time-Invariant Networks," in IEEE Transactions
on Circuits and Systems I: Regular Papers, vol. 70, no. 9, pp.
3413-3421, Sept. 2023, doi: 10.1109/TCSI.2023.3276700.</p>
<p>S. Pavan and G. C. Temes, "Reciprocity and Inter-Reciprocity: A
Tutorial—Part II: Linear Periodically Time-Varying Networks," in IEEE
Transactions on Circuits and Systems I: Regular Papers, vol. 70, no. 9,
pp. 3422-3435, Sept. 2023, doi: 10.1109/TCSI.2023.3294298.</p>
<p>S. Pavan and R. S. Rajan, "Interreciprocity in Linear Periodically
Time-Varying Networks With Sampled Outputs," in IEEE Transactions on
Circuits and Systems II: Express Briefs, vol. 61, no. 9, pp. 686-690,
Sept. 2014, doi: 10.1109/TCSII.2014.2335393.</p>
<p>Prof. Shanthi Pavan. Introduction to Time - Varying Electrical
Network. [<a
target="_blank" rel="noopener" href="https://youtube.com/playlist?list=PLyqSpQzTE6M8qllAtp9TTODxNfaoxRLp9">https://youtube.com/playlist?list=PLyqSpQzTE6M8qllAtp9TTODxNfaoxRLp9</a>]</p>
<p>Shanthi Pavan. EE5323: Advanced Electrical Networks (Jan-May. 2015)
[<a
target="_blank" rel="noopener" href="https://www.ee.iitm.ac.in/vlsi/courses/ee5323/start">https://www.ee.iitm.ac.in/vlsi/courses/ee5323/start</a>]</p>
<p>R. S. Ashwin Kumar. EE698W: Analog circuits for signal processing [<a
target="_blank" rel="noopener" href="https://home.iitk.ac.in/~ashwinrs/2022_EE698W.html">https://home.iitk.ac.in/~ashwinrs/2022_EE698W.html</a>]</p>
<p>Piet Vanassche, Georges Gielen, and Willy Sansen. 2009. Systematic
Modeling and Analysis of Telecom Frontends and their Building Blocks
(1st. ed.). Springer Publishing Company, Incorporated.</p>
<p>Beffa, Federico. (2023). Weakly Nonlinear Systems.
10.1007/978-3-031-40681-2.</p>
<p>Wereley, Norman. (1990). Analysis and control of linear periodically
time varying systems.</p>
<p>Hameed, S. (2017). Design and Analysis of Programmable Receiver
Front-Ends Based on LPTV Circuits. <em>UCLA</em>. ProQuest ID:
Hameed_ucla_0031D_15577. Merritt ID: ark:/13030/m5gb6zcz. Retrieved from
<a
target="_blank" rel="noopener" href="https://escholarship.org/uc/item/51q2m7bx">https://escholarship.org/uc/item/51q2m7bx</a></p>
<p>Matt Allen. Introduction to Linear Time Periodic Systems. [<a
target="_blank" rel="noopener" href="https://youtu.be/OCOkEFDQKTI">https://youtu.be/OCOkEFDQKTI</a>]</p>
<p>Fivel, Oren. "Analysis of Linear Time-Varying &amp; Periodic
Systems." <em>arXiv preprint arXiv:2202.00498</em> (2022).</p>
<p>RF Harmonic Balance Analysis for Nonlinear Circuits [<a
target="_blank" rel="noopener" href="https://resources.pcb.cadence.com/blog/2019-rf-harmonic-balance-analysis-for-nonlinear-circuits">https://resources.pcb.cadence.com/blog/2019-rf-harmonic-balance-analysis-for-nonlinear-circuits</a>]</p>
<p>Steer, Michael. Microwave and RF Design (Third Edition, 2019). NC
State University, 2019.</p>
<p>Steer, Michael. Harmonic Balance Analysis of Nonlinear RF Circuits -
Case Study Index: CS_AmpHB [<a
target="_blank" rel="noopener" href="https://youtu.be/BM5ZQgfb_sY?si=bjN_hMe-wvoeGHzu">link</a>]</p>
<p>Vishal Saxena, "SpectreRF Periodic Analysis" URL:<a
target="_blank" rel="noopener" href="https://www.eecis.udel.edu/~vsaxena/courses/ece614/Handouts/SpectreRF%20Periodic%20Analysis.pdf">https://www.eecis.udel.edu/~vsaxena/courses/ece614/Handouts/SpectreRF%20Periodic%20Analysis.pdf</a></p>
<p>Josh Carnes,Peter Kurahashi. "Periodic Analyses of Sampled Systems"
URL:<a
target="_blank" rel="noopener" href="https://slideplayer.com/slide/14865977/">https://slideplayer.com/slide/14865977/</a></p>
<p>Kundert, Ken. (2006). Simulating Switched-Capacitor Filters with
SpectreRF. URL:<a
target="_blank" rel="noopener" href="https://designers-guide.org/analysis/sc-filters.pdf">https://designers-guide.org/analysis/sc-filters.pdf</a></p>
<p>Article (20482538) Title: Why is pnoise sampled(jitter) different
than pnoise timeaverage on a driven circuit? URL:<a
target="_blank" rel="noopener" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O0V000009EStcUAG">https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O0V000009EStcUAG</a></p>
<p>Article (20467468) Title: The mathematics behind choosing the upper
frequency when simulating pnoise jitter on an oscillator URL:<a
target="_blank" rel="noopener" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O0V000007MnBUUA0">https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O0V000007MnBUUA0</a></p>
<p>Andrew Beckett. "Simulating phase noise for PFD-CP". URL:<a
target="_blank" rel="noopener" href="https://groups.google.com/g/comp.cad.cadence/c/NPisXTElx6E/m/XjWxKbbfh2cJ">https://groups.google.com/g/comp.cad.cadence/c/NPisXTElx6E/m/XjWxKbbfh2cJ</a></p>
<p>Dr. Yanghong Huang. MATH44041/64041: Applied Dynamical Systems [<a
target="_blank" rel="noopener" href="https://personalpages.manchester.ac.uk/staff/yanghong.huang/teaching/MATH4041/default.htm">https://personalpages.manchester.ac.uk/staff/yanghong.huang/teaching/MATH4041/default.htm</a>]</p>
<p>Jeffrey Wong. Math 563, Spring 2020 Applied computational analysis
[<a
target="_blank" rel="noopener" href="https://services.math.duke.edu/~jtwong/math563-2020/main.html">https://services.math.duke.edu/~jtwong/math563-2020/main.html</a>]</p>
<p>Jeffrey Wong. Math 353, Fall 2020 Ordinary and Partial Differential
Equations [<a
target="_blank" rel="noopener" href="https://services.math.duke.edu/~jtwong/math353-2020/main.html">https://services.math.duke.edu/~jtwong/math353-2020/main.html</a>]</p>
<p>Tip of the Week: Please explain in more practical (less theoretical)
terms the concept of "oscillator line width." [<a
target="_blank" rel="noopener" href="https://community.cadence.com/cadence_blogs_8/b/rf/posts/please-explain-in-more-practical-less-theoretical-terms-the-concept-of-quot-oscillator-line-width-quot">https://community.cadence.com/cadence_blogs_8/b/rf/posts/please-explain-in-more-practical-less-theoretical-terms-the-concept-of-quot-oscillator-line-width-quot</a>]</p>
<p>Rubiola, E. (2008). Phase Noise and Frequency Stability in
Oscillators (The Cambridge RF and Microwave Engineering Series).
Cambridge: Cambridge University Press. doi:10.1017/CBO9780511812798</p>
<p>Dr. Ulrich L. Rohde, Noise Analysis, Then and Today [<a
target="_blank" rel="noopener" href="https://www.microwavejournal.com/articles/29151-noise-analysis-then-and-today">https://www.microwavejournal.com/articles/29151-noise-analysis-then-and-today</a>]</p>
<p>Nicola Da Dalt and Ali Sheikholeslami. 2018. Understanding Jitter and
Phase Noise: A Circuits and Systems Perspective (1st. ed.). Cambridge
University Press, USA.</p>
<p>Kester, Walt. (2005). Converting Oscillator Phase Noise to Time
Jitter. [<a
target="_blank" rel="noopener" href="https://www.analog.com/media/en/training-seminars/tutorials/MT-008.pdf">https://www.analog.com/media/en/training-seminars/tutorials/MT-008.pdf</a>]</p>
<p>Drakhlis, B.. (2001). Calculate oscillator jitter by using
phase-noise analysis: Part 2 of two parts. Microwaves and Rf. 40.
109-119.</p>
<p>Explanation for sampled PXF analysis. [<a
target="_blank" rel="noopener" href="https://community.cadence.com/cadence_technology_forums/f/custom-ic-design/45055/explanation-for-sampled-pxf-analysis/1376140#1376140">https://community.cadence.com/cadence_technology_forums/f/custom-ic-design/45055/explanation-for-sampled-pxf-analysis/1376140#1376140</a>]</p>
<p>模拟放大器的低噪声设计技术2-3实践 아날로그 증폭기의 저잡음 설계
기법2-3실습 [<a
target="_blank" rel="noopener" href="https://youtu.be/vXLDfEWR31k?si=p2gbwaKoTxtfvrTc">https://youtu.be/vXLDfEWR31k?si=p2gbwaKoTxtfvrTc</a>]</p>
<p>2.2 How POP Really Works [<a
target="_blank" rel="noopener" href="https://www.simplistechnologies.com/documentation/simplis/ast_02/topics/2_2_how_pop_really_works.htm">https://www.simplistechnologies.com/documentation/simplis/ast_02/topics/2_2_how_pop_really_works.htm</a>]</p>
<p>Jaeha Kim. Lecture 11. Mismatch Simulation using PNOISE [<a
target="_blank" rel="noopener" href="https://ocw.snu.ac.kr/sites/default/files/NOTE/7037.pdf">https://ocw.snu.ac.kr/sites/default/files/NOTE/7037.pdf</a>]</p>
<p>Hueber, G., &amp; Staszewski, R. B. (Eds.) (2010).
<em>Multi-Mode/Multi-Band RF Transceivers for Wireless Communications:
Advanced Techniques, Architectures, and Trends</em>. John Wiley &amp;
Sons. https://doi.org/10.1002/9780470634455</p>
<p>B. Boser,A. Niknejad ,S.Gambin 2011 EECS 240 Topic 6: Noise Analysis
[<a
target="_blank" rel="noopener" href="https://mixsignal.files.wordpress.com/2013/06/t06noiseanalysis_simone-1.pdf">https://mixsignal.files.wordpress.com/2013/06/t06noiseanalysis_simone-1.pdf</a>]</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/21/pn-jitter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/10/21/pn-jitter/" class="post-title-link" itemprop="url">Phase Noise and Jitter Simulation</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-10-21 11:33:58" itemprop="dateCreated datePublished" datetime="2023-10-21T11:33:58+00:00">2023-10-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-07-25 09:22:30" itemprop="dateModified" datetime="2024-07-25T09:22:30+00:00">2024-07-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/noise/" itemprop="url" rel="index"><span itemprop="name">noise</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="integration-limits">Integration Limits</h2>
<blockquote>
<p>Y. Zhao and B. Razavi, "Phase Noise Integration Limits for Jitter
Calculation,"[<a
target="_blank" rel="noopener" href="https://www.seas.ucla.edu/brweb/papers/Conferences/YZ_ISCAS_22.pdf">https://www.seas.ucla.edu/brweb/papers/Conferences/YZ_ISCAS_22.pdf</a>]</p>
</blockquote>
<p><em>TODO</em> 📅</p>
<h2 id="vco-phase-noise">VCO Phase Noise</h2>
<h3 id="pnoise---timeaverage">pnoise - timeaverage</h3>
<ol type="1">
<li><p><em>Direct Plot/Pnoise/Phase Noise</em> or</p>
<p><img src="/2023/10/21/pn-jitter/image-20220511112856934.png"
alt="image-20220511112856934" /></p></li>
<li><p>manually calculate by definition</p>
<p><img src="/2023/10/21/pn-jitter/image-20220511112806122.png"
alt="image-20220511112806122" /></p></li>
<li><p><code>output noise</code> with unit <code>dBc</code></p>
<p><em>Direct Plot/Pnoise/Output Noise Units:dBc/Hz and Noise
convention: SSB</em></p>
<p><img src="/2023/10/21/pn-jitter/image-20220511113248984.png"
alt="image-20220511113248984" /></p></li>
</ol>
<blockquote>
<p>The above method 2 and 3 only apply to <code>timeaveage</code> pnoise
simulation,</p>
</blockquote>
<h3 id="pnoise---sampledjitteredge-crossing">pnoise -
sampled(jitter)/Edge Crossing</h3>
<p><img src="/2023/10/21/pn-jitter/EdgePhaseNoise.drawio.svg"
alt="EdgePhaseNoise.drawio" /></p>
<p><em>Direct Plot/Pnoise/<strong>Edge</strong> Phase Noise</em> or</p>
<p><img src="/2023/10/21/pn-jitter/image-20220515214901120.png"
alt="image-20220515214901120" /></p>
<p>Another way, the following equation can also be used for
<code>sampled(jitter)/Edge Crossing</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PhaseNoise(dBc/Hz) = dB20( OutputNoise(V/sqrt(Hz)) / slopeCrossing / Tper*twoPi ) - dB10(2)</span><br></pre></td></tr></table></figure>
<p>where <code>dB10(2)</code> is used to obtain SSB from DSB</p>
<p><img src="/2023/10/21/pn-jitter/image-20220511150337318.png"
alt="image-20220511150337318" /></p>
<h3 id="output-noise-of-sampledjitter-pnoise">Output Noise of
sampled(jitter) pnoise</h3>
<p>The last section's <code>Output Noise (V**2/Hz)</code> can be
obtained by <em>transient noise simulation</em></p>
<p>The idea is that sample waveform with ideal clock, subtract DC
offset, then fft(psd)</p>
<ul>
<li>samplesRaw = sample(wv)</li>
<li>samplePost = samplesRaw - average(samplesRaw)</li>
<li>Output Noise (V**2/Hz) = psd(samplePost)</li>
</ul>
<p><img src="/2023/10/21/pn-jitter/image-20220516184543148.png"
alt="image-20220516184543148" /></p>
<p><img src="/2023/10/21/pn-jitter/image-20220516184844296.png"
alt="image-20220516184844296" /></p>
<p><strong>Expression</strong>:</p>
<p><img src="/2023/10/21/pn-jitter/image-20220516185506348.png"
alt="image-20220516185506348" /></p>
<blockquote>
<p>The computation cost is typically very high, and the accuracy is
lesser as compared to PSS/Pnoise</p>
</blockquote>
<h2 id="pnoise-sampledjitter-sampled-phase-option">Pnoise
Sampled(jitter): Sampled Phase Option</h2>
<ul>
<li>Identical to <strong>noisetype=timedomain</strong> in old GUI</li>
<li>Use model:
<ul>
<li>Sampleds Per Period: number of ponits</li>
<li>Add Specific Points: specific time point, still time points</li>
</ul></li>
</ul>
<p><img src="/2023/10/21/pn-jitter/image-20220712085426461.png"
alt="image-20220712085426461" /></p>
<p><img src="/2023/10/21/pn-jitter/image-20220712085836315.png"
alt="image-20220712085836315" /></p>
<p><img src="/2023/10/21/pn-jitter/image-20220712090011204.png"
alt="image-20220712090011204" /></p>
<blockquote>
<p>pss beat freq = 5GHz</p>
<p>pnoise sweeptype: absolute, from 100k to 2.5GHz</p>
</blockquote>
<h2 id="transient-noise">Transient noise</h2>
<h3 id="phase-noise-from-transient-noise-analysis">phase noise from
transient noise analysis</h3>
<ol type="1">
<li>The Phase Noise function is now available in the Direct Plot form
(Results-Direct Plot-Main Form) after Transient Analysis is run
<ul>
<li>Absolute jitter Method</li>
<li>Direct Power Spectral Density Method</li>
</ul></li>
<li><code>PN</code> phase noise function
<ul>
<li>Absolute jitter Method</li>
<li>Direct Power Spectral Density Method</li>
</ul></li>
</ol>
<blockquote>
<p><strong>Absolute jitter Method</strong>: Phase noise is defined as
the power spectral density of the absolute jitter of an input
waveform</p>
<p>and <strong>absolute jitter method</strong> is the default method</p>
</blockquote>
<p>In below discussion, we only think about the
<code>absolute jitter method</code></p>
<h3 id="psd-and-phase-noise">PSD and Phase Noise</h3>
<blockquote>
<ul>
<li>phase noise is single-sideband</li>
<li>psd is double-sideband</li>
<li>Then the ratio is <strong>2</strong></li>
</ul>
</blockquote>
<h4 id="by-pss_pnoise">By PSS_Pnoise</h4>
<p><code>jee</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rfEdgePhaseNoise(?result &quot;pnoise_sample_pm0&quot; ?eventList &#x27;nil) + 10 * log10(2)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>convert <strong>single-sideband</strong> phase noise to psd by
multiplying 2 or <code>10 * log10(2)</code></p>
</blockquote>
<h4 id="by-trannoise-pn-function">By trannoise <code>PN</code>
function</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PN(clip(VT(&quot;/Out1&quot;) 2.60417e-08 0.000400052) &quot;rising&quot; 1.65 ?Tnom (1 / 3.84e+07) ?windowName &quot;Rectangular&quot; ?smooth 1 ?windowSize 15000 ?detrending &quot;None&quot; ?cohGain 1 ?methodType &quot;absJitter&quot;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>double-sideband psd</p>
</blockquote>
<h4 id="by-trannoise-psd-and-abs_jitter-function">By trannoise
<code>psd</code> and <code>abs_jitter</code> function</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dB10(psd(abs_jitter(clip(VT(&quot;/Out1&quot;) 2.60417e-08 0.000400052) &quot;rising&quot; 1.65 ?Tnom (1 / 3.84e+07)) 2.60417e-08 0.000400052 15360 ?windowName &quot;Rectangular&quot; ?smooth 1 ?windowSize 15000 ?detrending &quot;None&quot; ?cohGain 1))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>double-sideband psd</p>
<p><code>abs_jitter</code> <em>Y-Unit</em> default is
<code>rad</code></p>
</blockquote>
<h4 id="comparison">Comparison</h4>
<p><img src="/2023/10/21/pn-jitter/image-20220506225324377.png"
alt="image-20220506225324377" /></p>
<blockquote>
<p><code>PN</code>'s result is same with <code>psd</code>'s</p>
</blockquote>
<h3 id="rms-value">RMS value</h3>
<ul>
<li>build the <code>abs_jitter</code> function with <em>seconds as the Y
axis</em> and add the <code>stddev</code> function to determine the Jee
jitter value</li>
<li>or integrate psd</li>
</ul>
<p>The RMS <span class="math inline">\(x_{\text{RMS}}\)</span> of a
discrete domain signal <span class="math inline">\(x(n)\)</span> is
given by <span class="math display">\[
x_{\text{RMS}}=\sqrt{\frac{1}{N}\sum_{n=0}^{N-1}|x(n)|^2}
\]</span> Inserting Parseval's theorem given by <span
class="math display">\[
\sum_{n=0}^{N-1}|x(n)|^2=\frac{1}{N}\sum_{n=0}^{N-1}|X(k)|^2
\]</span> allows for computing the RMS from the spectrum <span
class="math inline">\(X(k)\)</span> as <span class="math display">\[
x_{\text{RMS}}=\sqrt{\frac{1}{N^2}\sum_{n=0}^{N-1}|X(k)|^2}
\]</span></p>
<h3 id="remarks">Remarks</h3>
<p>Cadence Spectre's <code>PN</code> function may call
<code>abs_jitter</code> and <code>psd</code> function under the
hood.</p>
<h2 id="reference">reference</h2>
<p>Article (11514536) Title: How to obtain a phase noise plot from a
transient noise analysis URL: <a
target="_blank" rel="noopener" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000000nb1CEAQ">https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000000nb1CEAQ</a></p>
<p>Article (20500632) Title: How to simulate Random and Deterministic
Jitters URL: <a
target="_blank" rel="noopener" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O3w000009fiXeEAI">https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O3w000009fiXeEAI</a></p>
<p>Tutorial on Scaling of the Discrete Fourier Transform and the Implied
Physical Units of the Spectra of Time-Discrete Signals Jens Ahrens, Carl
Andersson, Patrik Höstmad, Wolfgang Kropp URL: <a
target="_blank" rel="noopener" href="https://appliedacousticschalmers.github.io/scaling-of-the-dft/AES2020_eBrief/">https://appliedacousticschalmers.github.io/scaling-of-the-dft/AES2020_eBrief/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/21/ldo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/10/21/ldo/" class="post-title-link" itemprop="url">Low-Dropout Regulator</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-10-21 10:31:41" itemprop="dateCreated datePublished" datetime="2023-10-21T10:31:41+00:00">2023-10-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-07-25 09:22:30" itemprop="dateModified" datetime="2024-07-25T09:22:30+00:00">2024-07-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="pmos-ldo">PMOS LDO</h2>
<p>A large output capacitor solves the sudden load change problem, but
the stability decreases because the large output capacitor forces the
output pole toward the origin with the role of dominant pole</p>
<h2 id="dc-output-impedance">DC output impedance</h2>
<p>DC output impedance of NMOS and PMOS LDO is the
<strong><em>same</em></strong> for the same error amplifier gain</p>
<p><span class="math display">\[
R_{\text{out}} = \frac{1}{\beta A_{o1} g_{m2}}
\]</span></p>
<p>The NMOS LDO has a faster response to line transients than the PMOS
LDO since it has better (smaller) PSRR</p>
<p>A good PSRR is important when an LDO is used as a sub-regulator in
cascade with a switching regulator. The LDO would need to have a
sufficiently high rejection at the switching frequency of the switching
converter to filter out the ripples at that frequency</p>
<h2 id="nmos-ldo">NMOS LDO</h2>
<p><em>TODO</em> 📅</p>
<h3 id="feedforward-compensation-with-c_textff">Feedforward Compensation
with <span class="math inline">\(C_\text{FF}\)</span>​</h3>
<ul>
<li>Improved Noise</li>
<li>Improved Stability and Transient Response</li>
<li>Improved PSRR</li>
</ul>
<p><img src="/2023/10/21/ldo/outCc.drawio.svg" alt="outCc.drawio" /></p>
<p><span class="math display">\[\begin{align}
R_1 \parallel \frac{1}{sC_{FF}} &amp;= \frac{R_1}{1+sR_1C_{FF}} \\
Z_o &amp;= \left( R_1\parallel \frac{1}{sC_{FF}}\right)\parallel
\frac{1}{sC_L} \\
&amp;=\frac{R_1+R_2+sR_1R_2C_{FF}}{s^2R_1R_2C_{FF}C_L +
s[(R_1+R_2)C_L+R_1C_{FF}]+1} \\
A_{V2} &amp;= g_m Z_o \\
&amp;= g_m \frac{R_1+R_2+sR_1R_2C_{FF}}{s^2R_1R_2C_{FF}C_L +
s[(R_1+R_2)C_L+R_1C_{FF}]+1} \\
\beta &amp;= \frac{R_2}{\frac{R_1}{1+sR_1C_{FF}}+R_2} \\
&amp;= \frac{R_2(1+sR_1C_{FF})}{R_1+R_2+sR_1R_2C_c} \\
A_{V2}\beta &amp;=
\frac{g_mR_2(1+sR_1C_{FF})}{s^2R_1R_2C_{FF}C_L+s[(R_1+R_2)C_L+R_1C_{FF}]+1}
\end{align}\]</span></p>
<p>That is, adding a <span class="math inline">\(C_{FF}\)</span> also
introduces a zero (<span class="math inline">\(\omega_z\)</span>) and
pole (<span class="math inline">\(\omega_p\)</span>) into the <em>LDO
feedback loop</em></p>
<p><span class="math display">\[\begin{align}
\omega_{po} &amp;= \frac{1}{(R_1+R_2)C_L} \\
\omega_z &amp;= \frac{1}{R_1C_{FF}} \\
\omega_{p} &amp;= \frac{1}{(R_1 \parallel R_2)C_{FF}}
\end{align}\]</span></p>
<h2 id="nmos-slave-ldo">NMOS Slave LDO</h2>
<p><img src="/2023/10/21/ldo/nmos_slave_psrr.drawio.svg"
alt="nmos_slave_psrr.drawio" /></p>
<p><span class="math display">\[\begin{align}
\frac{V_g}{V_i}
&amp;=\frac{R||\frac{1}{s(C_g+C_{gs})}}{R||\frac{1}{s(C_g+C_{gs})}+\frac{1}{sC_{gd}}}
\\
&amp;= \frac{sRC_{gd}}{sR(C+C_{gd}+C_{gs})+1}
\end{align}\]</span> <span class="math display">\[
\frac{V_g}{V_i} = -\frac{sC_{ds}+g_{ds}}{sC_{gs}+g_m}
\]</span></p>
<p>That is, <span class="math display">\[
\omega_{z,d} \simeq \frac{1}{R(\frac{g_m}{g_{ds}}C_{gd}+C)}
\]</span></p>
<p>The calculating PSRR pole approach similar with zero, just <span
class="math inline">\(V_o\)</span> to <span
class="math inline">\(V_i\)</span> zero <span class="math display">\[
\omega_{p,d} \simeq \frac{1}{R(\frac{C_s}{g_mR}+C)}
\]</span></p>
<p>DC PSRR <span class="math display">\[
\text{PSRR} = \frac{1}{g_mr_o}
\]</span></p>
<h2 id="reference">reference</h2>
<p>Hinojo, J.M., Martinez, C.I., &amp; Torralba, A.J. (2018). Internally
Compensated LDO Regulators for Modern System-on-Chip Design.</p>
<p>Mingoo Seok. ISSCC 2020 tutorial "Basics of Digital Low-Dropout (LDO)
Integrated Voltage Regulator"</p>
<p>Pavan Kumar Hanumolu. CICC 2015. "Low Dropout Regulators"</p>
<p>Chen, K. (2016). Power Management Techniques for Integrated Circuit
Design.</p>
<p>Morita, B.G. (2014). Understand Low-Dropout Regulator ( LDO )
Concepts to Achieve Optimal Designs.</p>
<p>H. -S. Kim, "Exploring Ways to Minimize Dropout Voltage for
Energy-Efficient Low-Dropout Regulators: Viable approaches that preserve
performance," in IEEE Solid-State Circuits Magazine, vol. 15, no. 2, pp.
59-68, Spring 2023, doi: 10.1109/MSSC.2023.3262767.</p>
<p>Ali Sheikholeslami, Circuit Intuitions: Voltage Regulators IEEE
Solid-State Circuits Magazine, Vol. 12, Issue 4, to appear, Fall
2020.</p>
<p>Operational Transconductance Amplifier II Multi-Stage Designs [<a
target="_blank" rel="noopener" href="https://people.eecs.berkeley.edu/~boser/courses/240B/lectures/M07%20OTA%20II.pdf">https://people.eecs.berkeley.edu/~boser/courses/240B/lectures/M07%20OTA%20II.pdf</a>]</p>
<p>Toshiba, Load Transient Response of LDO and Methods to Improve it
Application Note [<a
target="_blank" rel="noopener" href="https://toshiba.semicon-storage.com/info/application_note_en_20210326_AKX00312.pdf?did=66268">https://toshiba.semicon-storage.com/info/application_note_en_20210326_AKX00312.pdf?did=66268</a>]</p>
<p>Application Report SBVA042–July 2014, Pros and Cons of Using a
Feedforward Capacitor with a Low-Dropout Regulator [<a
target="_blank" rel="noopener" href="https://www.ti.com/lit/an/sbva042/sbva042.pdf">https://www.ti.com/lit/an/sbva042/sbva042.pdf</a>]</p>
<p>LDO Basics: Noise – How a Feed-forward Capacitor Improves System
Performance [<a
target="_blank" rel="noopener" href="https://www.ti.com/document-viewer/lit/html/SSZTA13">https://www.ti.com/document-viewer/lit/html/SSZTA13</a>]</p>
<p>LDO Basics: Noise – How a Noise-reduction Pin Improves System
Performance [<a
target="_blank" rel="noopener" href="https://www.ti.com/document-viewer/lit/html/SSZTA40">https://www.ti.com/document-viewer/lit/html/SSZTA40</a>]</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Guo</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.1/dist/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.3.0/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>






  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
