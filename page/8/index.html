<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="KNOW-HOW">
<meta property="og:url" content="http://example.com/page/8/index.html">
<meta property="og:site_name" content="KNOW-HOW">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Guo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/8/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/8/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>KNOW-HOW</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">KNOW-HOW</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Guo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">179</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">161</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/raytroop" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;raytroop" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:raytroop@gmail.com" title="E-Mail → mailto:raytroop@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/23/save-parameter-spectre/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/23/save-parameter-spectre/" class="post-title-link" itemprop="url">Understanding the save parameter in spectre</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-23 23:14:10" itemprop="dateCreated datePublished" datetime="2022-09-23T23:14:10+00:00">2022-09-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 02:26:19" itemprop="dateModified" datetime="2023-11-06T02:26:19+00:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/cad/" itemprop="url" rel="index"><span itemprop="name">cad</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><strong>none</strong>:</p>
<p>​ Does not save any data (currently does save one node chosen at
random)</p>
<p><strong>selected</strong>:</p>
<p>​ Saves only signals specified with save statements. The default
setting.</p>
<p><strong>lvlpub</strong>:</p>
<pre><code>Saves all signals that are normally useful up to nestlvl deep in the subcircuit hierarchy. This option is equivalent to allpub for subcircuits.</code></pre>
<p><strong>lvl</strong>:</p>
<p>​ Saves all signals up to nestlvl deep in the subcircuit hierarchy.
This option is relevant for subcircuits.</p>
<p><strong>allpub</strong>:</p>
<p>​ Saves only signals that are normally useful.</p>
<p><strong>all</strong>:</p>
<p>​ Saves all signals.</p>
<blockquote>
<p>Signals that are "normally useful" include the shared node voltages
and currents through voltage sources and iprobes, and exclude the
internal nodes on devices (the internal collector, base, emitter on a
BJT, the internal drain, source on a FET, and so on). It also excludes
currents through inductors, controlled sources, transmission lines,
transformers, etc.</p>
<p>If you use <strong>lvl</strong> or <strong>all</strong> instead of
<strong>lvlpub</strong> or <strong>allpub</strong>, you will also get
internal node voltages and currents through other components that happen
to compute current.</p>
<p>Thus, using <strong>*pub</strong> excludes internal nodes on devices
(the internal collector, base, emitter on a BJT, the internal drain and
source on a FET, etc). It also excludes the currents through inductors,
controlled sources, transmission lines, transformers, etc.</p>
</blockquote>
<blockquote>
<p><strong>nestlvl</strong></p>
<p>This variable is used to save groups of signals as results and when
signals are saved in subcircuits. The nestlvl parameter also specifies
how many levels deep into the subcircuit hierarchy you want to save
signals.</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/09/07/viterbi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/07/viterbi/" class="post-title-link" itemprop="url">Viterbi Algorithm for ADC-Based Serial Link</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-09-07 22:20:06" itemprop="dateCreated datePublished" datetime="2022-09-07T22:20:06+00:00">2022-09-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 02:26:19" itemprop="dateModified" datetime="2023-11-06T02:26:19+00:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="reference">reference</h2>
<p>Zaman, Arshad Kamruz (2019). A Maximum Likelihood Sequence Equalizing
Architecture Using Viterbi Algorithm for ADC-Based Serial Link.
Undergraduate Research Scholars Program. Available electronically from
<a
target="_blank" rel="noopener" href="https://hdl.handle.net/1969.1/166485">https://hdl.handle.net/1969.1/166485</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/11/t-sensor/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/08/11/t-sensor/" class="post-title-link" itemprop="url">temperature sensor</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-08-11 08:33:19" itemprop="dateCreated datePublished" datetime="2022-08-11T08:33:19+00:00">2022-08-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 02:26:19" itemprop="dateModified" datetime="2023-11-06T02:26:19+00:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Due to the fact that <em>long-term drift</em> of temperature sensors
and bandgap references caused by package-induced stress is lower with
PNP BJTs than with NPN BJTs, <strong>PNP</strong> BJTs have been used
traditionally for temperature sensor design in CMOS</p>
<h3 id="v_be-curvature"><span class="math inline">\(V_{BE}\)</span>
curvature</h3>
<p>Though it is assumed that <span class="math inline">\(V_{BE}\)</span>
is a linear function of temperature for first oder analysis.</p>
<p>In practice, <span class="math inline">\(V_{BE}\)</span> is
<em>slightly nonlinear</em>, the magnitude of this nonlinearity is
referred to as <strong>curvature</strong>.</p>
<p><strong>curvature</strong> depends on the temperature dependency of
the <em>saturation current</em> (<span
class="math inline">\(I_s\)</span>), and on that of the <em>collector
current</em> (<span class="math inline">\(I_c\)</span>), it can be
written as <span class="math display">\[
V_{curv}(T)=\frac{k}{q}(\eta-\delta)(T-T_r-T\cdot \ln(\frac{T}{T_r}))
\]</span> where <span class="math inline">\(\eta\)</span> = a constant
depending on the doping level, CMOS substrate pnp transistors have a
typically value of <span class="math inline">\(\eta \cong 4\)</span></p>
<p><span class="math inline">\(\delta\)</span> = order of the
<em>temperature dependence of collector current</em> (<span
class="math inline">\(I_c\)</span>)</p>
<blockquote>
<p>PTAT <span class="math inline">\(I_c\)</span> help reduce <span
class="math inline">\(V_{curv}(T)\)</span>, <span
class="math inline">\(\delta=1\)</span></p>
</blockquote>
<p>Although the temperature dependence of the bias current <span
class="math inline">\(I_b\)</span> doesn’t impact the accuracy of <span
class="math inline">\(V_{BE}\)</span>, it does impact the systematic
nonlinearity or curvature of <span
class="math inline">\(V_{BE}\)</span>, and hence the sensor's
<em>systematic error</em>. <strong>The curvature in <span
class="math inline">\(V_{BE}\)</span> can be reduced by using a PTAT
bias current</strong>.</p>
<p><img src="/2022/08/11/t-sensor/image-20221106010909644.png"
alt="image-20221106010909644" /></p>
<h3 id="ptat-bias-current-generation">PTAT bias current generation</h3>
<p><img src="/2022/08/11/t-sensor/image-20221023150817411.png"
alt="image-20221023150817411" /> <span class="math display">\[
I_{bias} = \frac{0.7}{\beta \cdot R^2}
\]</span> in which <span class="math inline">\(\beta=\frac{\mu_{n}\cdot
C_{ox}\cdot W}{L}\)</span>, where:</p>
<p><span class="math inline">\(\mu_n\)</span>=mobility,</p>
<p><span class="math inline">\(C_{ox}\)</span> = oxide capacitance
density,</p>
<p><span class="math inline">\(\frac{W}{L}\)</span> = dimension ratio of
unit NMOS used for <span class="math inline">\(M_1\)</span> and <span
class="math inline">\(M_2\)</span></p>
<p><span class="math inline">\(\mu_n\)</span> is <strong>complementary
to the absolute temperature</strong> and resitor R is implemented using
high-R flow in FinFET which has a low temperature dependency, the net
temperature dependency of <span class="math inline">\(I_{bias}\)</span>
is proportional to the absolute temperature <span
class="math display">\[
I_{bias}\propto  T
\]</span></p>
<h3 id="errors-due-to-v-i-finite-gain">Errors due to V-I Finite
Gain</h3>
<p>Finite gain introduces errors both in the V-I converters, finite loop
gain results in errors in the closed-loop transconductances.</p>
<p><img src="/2022/08/11/t-sensor/image-20221106153613505.png"
alt="image-20221106153613505" /> <span
class="math display">\[\begin{align}
(V_{i1} - V_{o1})\cdot A_{OL1} &amp;= V_{o1} \\
V_{o1} &amp;= \frac{A_{OL1}}{1+A_{OL1}}V_{i1} \\
I_{o1} &amp;= \frac{A_{OL1}}{1+A_{OL1}}\frac{1}{R_1}V_{i1}
\end{align}\]</span> similarly, <span class="math display">\[
I_{o2} = \frac{A_{OL2}}{1+A_{OL2}}\frac{1}{R_2}V_{i2}
\]</span></p>
<p>Then, <span class="math inline">\(\alpha\)</span> is obtained <span
class="math display">\[
\alpha =
\frac{(1+A_{OL2})A_{OL1}}{A_{OL2}(1+A_{OL1})}\cdot\frac{R_2}{R_1}
\]</span> Since the loop gains in the two V-I converters cannot be
expected to <em>match</em>, the resulting errors in
<strong>both</strong> converters should be reduced to negligible
levels.</p>
<p>First, assume <span class="math inline">\(A_{OL2}=\infty\)</span>
<span class="math display">\[\begin{align}
\Delta \alpha &amp;= (1-\frac{A_{OL1}}{1+A_{OL1}})\cdot\frac{R_2}{R_1}\\
&amp;=\frac{1}{1+A_{OL1}}\cdot\frac{R_2}{R_1}\\
&amp;\cong \frac{1}{A_{OL1}}\cdot\frac{R_2}{R_1}
\end{align}\]</span></p>
<p>We get <span class="math display">\[
\frac{\Delta \alpha}{\alpha}=\frac{1}{A_{OL1}}
\]</span> Follow the same procedure, assume <span
class="math inline">\(A_{OL1}=\infty\)</span> <span
class="math display">\[
\frac{\Delta \alpha}{\alpha}=\frac{1}{A_{OL2}}
\]</span> The finite gain introduces an error inversely proportional to
the loop gain <span class="math inline">\(A_{OL1}\)</span>,<span
class="math inline">\(A_{OL2}\)</span>, the resulting errors in both
converters should be reduced to negligible levels</p>
<h3 id="why-is-it-named-as-bandgap-reference">Why is it named as
"bandgap reference"</h3>
<p>Let us write the output voltage as <span class="math display">\[
V_{REF} = V_{BE} + V_T\cdot \ln n
\]</span> and hence <span class="math display">\[
\frac{\partial V_{REF}}{\partial T} = \frac{\partial V_{BE}}{\partial T}
+ \frac{V_T}{T}\ln n
\]</span> Setting this to zero and substituting for <span
class="math inline">\(\frac{\partial V_{BE}}{\partial T}\)</span>, we
have <span class="math display">\[
\frac{V_{BE}-(4+m)V_T-E_g/q}{T}=-\frac{V_T}{T}\ln n
\]</span> If <span class="math inline">\(V_T\ln n\)</span> is found from
this equation and inserted in <span
class="math inline">\(V_{REF}\)</span>, we obtain <span
class="math display">\[
V_{REF}=\frac{E_g}{q} + (4+m)V_T
\]</span></p>
<blockquote>
<p>The term <strong>bandgap</strong> is used here because as <span
class="math inline">\(T\to 0\)</span>, <span
class="math inline">\(V_{REF} \to E_g/q\)</span></p>
</blockquote>
<h3 id="consideration-for-readout-circuit">Consideration for Readout
Circuit</h3>
<h4 id="adc-dynamic-range">ADC dynamic range</h4>
<p>Take <span class="math inline">\(V_{PTAT}=\alpha \cdot \Delta
V_{BE}\)</span> as input and <span
class="math inline">\(V_{REF}\)</span> as reference. The output <span
class="math inline">\(\mu\)</span> of the ADC will then be <span
class="math display">\[
\mu =\frac{V_{PTAT}}{V_{VREF}}=\frac{\alpha \cdot \Delta
V_{BE}}{V_{BE}+\alpha \cdot \Delta V_{BE}}
\]</span> A final digital output <span
class="math inline">\(D_{out}\)</span> in degrees <em>Celsius</em> can
be obtained by linear scaling: <span class="math display">\[
D_{out}=A\cdot \mu + B
\]</span> where <span class="math inline">\(A\simeq 600K\)</span> and
<span class="math inline">\(B\simeq -273K\)</span></p>
<p>While the transfer is simple, it only uses about 30% of the of the
ADC (the extremes of the operating range correspond to <span
class="math inline">\(\mu \simeq 1/3\)</span> and <span
class="math inline">\(\mu \simeq 2/3\)</span>). The ratio results in a
rather inefficient use of the modulator's <em>dynamic range</em>.</p>
<p>For a first-order <span class="math inline">\(\Sigma\Delta\)</span>
modulator, this means that about <strong>1.5 bits</strong> of resolution
are lost</p>
<p>A more efficient transfer is <span class="math display">\[
\mu &#39;=\frac{2\alpha \cdot \Delta V_{BE}-V_{BE}}{V_{BE}+\alpha \cdot
\Delta V_{BE}}
\]</span> With this more efficient combination, <em>90%</em> of the
dynamic range is used rather than 30%. Thus, <em>the required resolution
of the ADC</em> is reduced by <strong>a factor of three</strong>.</p>
<p><img src="/2022/08/11/t-sensor/image-20230204220522392.png"
alt="image-20230204220522392" /></p>
<h4 id="integrator-output-swing">Integrator Output Swing</h4>
<blockquote>
<p><span class="math display">\[
\mu =\frac{\alpha \cdot \Delta V_{BE}}{V_{BE}+\alpha \cdot \Delta
V_{BE}}
\]</span></p>
</blockquote>
<p><img src="/2022/08/11/t-sensor/image-20230207002324363.png"
alt="image-20230207002324363" /></p>
<blockquote>
<p><span class="math display">\[
\mu &#39;=\frac{2\alpha \cdot \Delta V_{BE}-V_{BE}}{V_{BE}+\alpha \cdot
\Delta V_{BE}}
\]</span></p>
</blockquote>
<p><img src="/2022/08/11/t-sensor/image-20230206230202755.png"
alt="image-20230206230202755" /></p>
<p>In advanced process, like Finfet 16nm, 7nm, high resistance resistor
has <strong>+/-15%</strong> variation and MOM capacitor has
<strong>+/-30%</strong> variation.</p>
<p>Then, <span class="math inline">\(R_1\)</span> and <span
class="math inline">\(R_2\)</span> not only determine the <span
class="math inline">\(\alpha\)</span> but also the integrator's output
swing, so do <span class="math inline">\(V_{BE}\)</span> and <span
class="math inline">\(\Delta V_{BE}\)</span>, <span
class="math inline">\(C_{int}\)</span>.</p>
<blockquote>
<p>The integrator's output change per period</p>
</blockquote>
<p><img src="/2022/08/11/t-sensor/image-20230206231010121.png"
alt="image-20230206231010121" /></p>
<h5 id="example">example</h5>
<p><img src="/2022/08/11/t-sensor/image-20230430112230224.png"
alt="image-20230430112230224" /></p>
<h4 id="integrator-comparator-offset">integrator, comparator offset</h4>
<h5 id="integrator-offset">integrator offset</h5>
<p><img src="/2022/08/11/t-sensor/image-20230430114429118.png"
alt="image-20230430114429118" /></p>
<p><img src="/2022/08/11/t-sensor/image-20230430114520336.png"
alt="image-20230430114520336" /></p>
<h5 id="comparator-offset">comparator offset</h5>
<p><img src="/2022/08/11/t-sensor/image-20230501223512686.png"
alt="image-20230501223512686" /></p>
<h3 id="reference">reference</h3>
<p>Micheal, A., P., Pertijs., Johan, H., Huijsing., Pertijs., Johan, H.,
Huijsing. (2006). Precision Temperature Sensors in CMOS Technology.</p>
<p>Kamath, Umanath Ramachandra. "BJT Based Precision Voltage Reference
in FinFET Technology." (2021).</p>
<p>C. -H. Chang, J. -J. Horng, A. Kundu, C. -C. Chang and Y. -C. Peng,
"An ultra-compact, untrimmed CMOS bandgap reference with 3σ inaccuracy
of +0.64% in 16nm FinFET," 2014 IEEE Asian Solid-State Circuits
Conference (A-SSCC), 2014, pp. 165-168, doi:
10.1109/ASSCC.2014.7008886.</p>
<p>EE247 - Analog Digital Interface Integrated Circuits - Fall 2009 <a
target="_blank" rel="noopener" href="https://inst.eecs.berkeley.edu/~ee247/fa09/files07/lectures/L24_2_f09.pdf">Lecture
24- Oversampled ADCs</a></p>
<p>Hecht, Bruce. (2010). SSCS DL Kofi Makinwa Talks About Smart Sensor
Design at SSCS-Boston [People]. Solid-State Circuits Magazine, IEEE. 2.
54 - 56. 10.1109/MSSC.2009.935278.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/20/tx-pam4-fir-dac/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/20/tx-pam4-fir-dac/" class="post-title-link" itemprop="url">DAC-based FFE in PAM4 Transmitter</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-07-20 22:51:22" itemprop="dateCreated datePublished" datetime="2022-07-20T22:51:22+00:00">2022-07-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 02:26:19" itemprop="dateModified" datetime="2023-11-06T02:26:19+00:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img src="/2022/07/20/tx-pam4-fir-dac/image-20220721220225623.png"
alt="image-20220721220225623" /></p>
<p>One classic TX implementation contain:</p>
<ul>
<li>a DAC: <strong>56GS/s</strong> <strong>8b</strong></li>
<li>a DSP: <strong>8-tap FIR</strong></li>
</ul>
<blockquote>
<p>C. Menolfi et al., "A 112Gb/S 2.6pJ/b 8-Tap FFE PAM-4 SST TX in 14nm
CMOS," 2018 IEEE International Solid - State Circuits Conference -
(ISSCC), 2018, pp. 104-106, doi: 10.1109/ISSCC.2018.8310205.</p>
</blockquote>
<p><img src="/2022/07/20/tx-pam4-fir-dac/image-20220721234522043.png"
alt="image-20220721234522043" /></p>
<h2 id="pi-coil"><span class="math inline">\(\pi\)</span>-coil</h2>
<p><img src="/2022/07/20/tx-pam4-fir-dac/image-20220720232837839.png"
alt="image-20220720232837839" /></p>
<blockquote>
<p>J. Kim et al., "A 112Gb/s PAM-4 transmitter with 3-Tap FFE in 10nm
CMOS," 2018 IEEE International Solid - State Circuits Conference -
(ISSCC), 2018, pp. 102-104, doi: 10.1109/ISSCC.2018.8310204.</p>
</blockquote>
<h2 id="reference">reference</h2>
<p>C. Menolfi et al., "A 112Gb/S 2.6pJ/b 8-Tap FFE PAM-4 SST TX in 14nm
CMOS," 2018 IEEE International Solid - State Circuits Conference -
(ISSCC), 2018, pp. 104-106, doi: 10.1109/ISSCC.2018.8310205.</p>
<p>E. Chong et al., "A 112Gb/s PAM-4, 168Gb/s PAM-8 7bit DAC-Based
Transmitter in 7nm FinFET," ESSCIRC 2021 - IEEE 47th European Solid
State Circuits Conference (ESSCIRC), 2021, pp. 523-526, doi:
10.1109/ESSCIRC53450.2021.9567801.</p>
<p>B. Razavi, "Design Techniques for High-Speed Wireline Transmitters,"
in IEEE Open Journal of the Solid-State Circuits Society, vol. 1, pp.
53-66, 2021, doi: 10.1109/OJSSCS.2021.3112398.</p>
<p>Wang, Z., Choi, M., Lee, K., Park, K., Liu, Z., Biswas, A., Han, J.,
Du, S., &amp; Alon, E. (2022). An Output Bandwidth Optimized 200-Gb/s
PAM-4 100-Gb/s NRZ Transmitter With 5-Tap FFE in 28-nm CMOS. IEEE
Journal of Solid-State Circuits, 57(1), 21-31.
https://doi.org/10.1109/JSSC.2021.3109562</p>
<p>J. Kim et al., "A 112Gb/s PAM-4 transmitter with 3-Tap FFE in 10nm
CMOS," 2018 IEEE International Solid - State Circuits Conference -
(ISSCC), 2018, pp. 102-104, doi: 10.1109/ISSCC.2018.8310204.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/16/pam4-mux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/16/pam4-mux/" class="post-title-link" itemprop="url">PAM4 Driver and Serializer</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-07-16 12:34:10" itemprop="dateCreated datePublished" datetime="2022-07-16T12:34:10+00:00">2022-07-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 02:26:19" itemprop="dateModified" datetime="2023-11-06T02:26:19+00:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="pam4-basic">PAM4 Basic</h2>
<p><strong>PAM4</strong> only have <em>1/3</em> of the amplitude
compared to <strong>NRZ</strong> <span class="math display">\[
\text{SNR loss} = 20\log(\frac{1}{3}) \sim  9.5\text{dB}
\]</span></p>
<blockquote>
<p>In practice, there is further degradation due to nonlinearity</p>
</blockquote>
<p>In a more technical terms, we trade the <strong>transmitter’s
signal-to-noise ratio (SNR)</strong> for <strong>lower Nyquist
frequency</strong></p>
<p>Equalization will be a lot more complex</p>
<h3 id="pam4-level-names">PAM4 Level Names</h3>
<p><img src="/2022/07/16/pam4-mux/image-20220717000655620.png"
alt="image-20220717000655620" /></p>
<h3 id="pam4-eye-linearity">PAM4 Eye Linearity</h3>
<p><img src="/2022/07/16/pam4-mux/image-20220716221740224.png"
alt="image-20220716221740224" /></p>
<p>Each level can have different amplitudes, which form the <strong>Eye
Linearity</strong> <span class="math display">\[
{\text{Eye
Linearity}}=\frac{\min(AV_{\text{upp}},AV_{\text{mid}},AV_{\text{low}})}{\max(AV_{\text{upp}},AV_{\text{mid}},AV_{\text{low}})}
\]</span></p>
<blockquote>
<p>Perfect eye = 1</p>
<p>Worst eye = 0</p>
</blockquote>
<h3 id="transmitter-linearity-rlm">Transmitter Linearity (RLM)</h3>
<p>The <strong>Level Separation Mismatch Ratio</strong>, commonly
referred to as <span class="math inline">\(R_{\text{LM}}\)</span>, is a
measurement that is not required in normative or informative VSR tests,
but is required by most other variants.</p>
<p><img src="/2022/07/16/pam4-mux/image-20220716223452261.png"
alt="image-20220716223452261" /></p>
<p><span class="math display">\[\begin{align}
V_{\text{mid}} &amp;= \frac{V_0+V_3}{2} \\
ES1 &amp;= \frac{V_1-V_{\text{mid}}}{V_0-V_{\text{mid}}} \\
ES2 &amp;= \frac{V_2-V_{\text{mid}}}{V_3-V_{\text{mid}}} \\
R_{\text{LM}} &amp;= \min(3\times ES1, 3\times ES2, 2-3\times ES1,
2-3\times ES2)
\end{align}\]</span></p>
<p>where <em>ES</em> means <em>Effective Symbol Level</em></p>
<blockquote>
<p><span class="math inline">\(R_{\text{LM}}\)</span> is conceptually
similar to eye linearity but measured differently. An ideal PAM4 eye has
<span class="math inline">\(R_{\text{LM}}\)</span> equal to
<strong>1</strong>, but it does not scale in the same way as eye
linearity.</p>
<p>The closer <span class="math inline">\(R_{\text{LM}}\)</span> is to
<strong>1</strong>, the better the eye linearity is.</p>
</blockquote>
<h3 id="gray-coding">Gray Coding</h3>
<p>Gray code or reflected binary code was designed so that two
successive values differ by one bit</p>
<p>Reducing the number of switching</p>
<table>
<thead>
<tr class="header">
<th>Linear Code</th>
<th>Gray Code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>11</td>
<td>10</td>
</tr>
<tr class="even">
<td>10</td>
<td>11</td>
</tr>
<tr class="odd">
<td>01</td>
<td>01</td>
</tr>
<tr class="even">
<td>00</td>
<td>00</td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li>Only one bit error per symbol is made for incorrect decisions</li>
<li>This is the coding adopted in all the PAM4 standards</li>
<li>Support dual-mode with PAM2, by grounding the LSB</li>
<li>MSB is the bit transmitted first</li>
</ul>
</blockquote>
<h4 id="binary-to-pam4-and-back-to-binary-example">Binary to PAM4 and
Back to Binary Example</h4>
<p><img src="/2022/07/16/pam4-mux/image-20220717000847185.png"
alt="image-20220717000847185" /></p>
<blockquote>
<p>The way that Gray coding combines the MSB (most significant bit) and
LSB (least significant bit) in each PAM4 symbol assures that
<strong>symbol errors</strong> caused by <strong>amplitude
noise</strong> are more likely to cause <strong>one bit error than
two</strong>. On the other hand, jitter is more likely to cause two bit
errors per symbol error.</p>
</blockquote>
<h2 id="pam4-tx-equalization">PAM4 TX equalization</h2>
<p><img src="/2022/07/16/pam4-mux/image-20220717010007963.png"
alt="image-20220717010007963" /></p>
<p>Here, <span class="math inline">\(d_{\text{LSB}} \in \{-1,
1\}\)</span>, <span class="math inline">\(d_{\text{MSB}} \in \{-2,
2\}\)</span> and <span class="math inline">\(d&#39; \in \{ -3, -1, 1, 3
\}\)</span></p>
<p>Implementation-1 could potentially experience performance degradation
due to</p>
<ol type="1">
<li>Clock skew, <span class="math inline">\(\Delta t\)</span>, could
make the eye misaligned horizontally</li>
<li>Gain mismatch, <span class="math inline">\(\Delta G\)</span>, could
cause eye nonlinearity</li>
<li>Bandwidth mismatch, <span class="math inline">\(\Delta
f_{\text{BW}}\)</span>, could make the eye misaligned vertically</li>
</ol>
<p><img src="/2022/07/16/pam4-mux/image-20220717011129124.png"
alt="image-20220717011129124" /></p>
<blockquote>
<p>Typically, a 3-tap FIR (pre + main + post) TX de-emphasis is used</p>
<p>3-tap FIR results in <span class="math inline">\(4^3 = 64\)</span>
possible distinct signal levels</p>
</blockquote>
<p><img src="/2022/07/16/pam4-mux/msb_lsb.drawio.svg"
alt="msb_lsb.drawio" /></p>
<p><span class="math display">\[\begin{align}
R_U^M \parallel R_D^M &amp;= \frac{3R_T}{2}\\
R_U^L \parallel R_D^L &amp;= 3R_T
\end{align}\]</span></p>
<p>Thevenin Equivalent Circuit is <img
src="/2022/07/16/pam4-mux/thevenin_1.drawio.svg"
alt="thevenin_1.drawio" /></p>
<p>Which can be simpified as <img
src="/2022/07/16/pam4-mux/thevenin_2.drawio.svg"
alt="thevenin_2.drawio" /> <span class="math display">\[\begin{align}
V_{\text{rx}} &amp;= \frac{1}{2}(V_p - V_m) \\
&amp;= \frac{1}{2}(\frac{2}{3}(2V_{\text{MSB}}+V_{\text{LSB}})-1) \\
&amp;=\frac{1}{3}(2V_{\text{MSB}}+V_{\text{LSB}})-\frac{1}{2}
\end{align}\]</span></p>
<p>The above eqations demonstrate that the output <span
class="math inline">\(V_{\text{rx}}\)</span> is the linear sum of
<strong>MSB</strong> and <strong>LSB</strong>; <strong>LSB</strong> and
<strong>MSB</strong> have relative weight, i.e. <em>1</em> for LSB and
<em>2</em> for MSB.</p>
<p>Assume pre cusor has <span class="math inline">\(L\)</span> legs,
main cursor <span class="math inline">\(M\)</span> legs and post cursor
<span class="math inline">\(N\)</span> legs, which is same with the
convention in "Voltage-Mode Driver Equalization"</p>
<p>The number of legs connected with supply can expressed as <span
class="math display">\[
n_{up} = (1-d_{n+1})L + d_{n}M + (1-d_{n-1})N
\]</span> Where <span class="math inline">\(d_n \in \{0, 1\}\)</span>,
or <span class="math display">\[
n_{up} = \frac{1}{2}(-D_{n+1}+1)L + \frac{1}{2}(D_{n}+1)M +
\frac{1}{2}(-D_{n-1}+1)N
\]</span> Where <span class="math inline">\(D_n \in \{-1,
+1\}\)</span></p>
<p>Then the number of legs connected with ground is <span
class="math display">\[
n_{dn}=L+M+N-n_{up}
\]</span> where <span
class="math inline">\(n_{up}+n_{dn}=L+M+N\)</span></p>
<p>Voltage resistor divider <span class="math display">\[\begin{align}
V_o &amp;=
\frac{\frac{R_{U}}{n_{dn}}}{\frac{R_U}{n_{dn}}+\frac{R_U}{n_{up}}} \\
&amp;= \frac{1}{2}- \frac{1}{2}D_{n+1}\frac{L}{L+M+N}+
\frac{1}{2}D_{n}\frac{M}{L+M+N}-\frac{1}{2}D_{n-1}\frac{N}{L+M+N} \\
&amp;= \frac{1}{2}-\frac{1}{2}D_{n+1}\cdot l+ \frac{1}{2}D_{n}\cdot
m-\frac{1}{2}D_{n-1}\cdot n
\end{align}\]</span></p>
<p>where <span class="math inline">\(l+m+n=1\)</span></p>
<p><span class="math inline">\(V_{\text{MSB}}\)</span> and <span
class="math inline">\(V_{\text{LSB}}\)</span> can be obtained</p>
<p><span class="math display">\[\begin{align}
V_{\text{MSB}} &amp;= \frac{1}{2}-\frac{1}{2}D^{\text{MSB}}_{n+1}\cdot
l+ \frac{1}{2}D^{\text{MSB}}_{n}\cdot
m-\frac{1}{2}D^{\text{MSB}}_{n-1}\cdot n \\
V_{\text{LSB}} &amp;= \frac{1}{2}-\frac{1}{2}D^{\text{LSB}}_{n+1}\cdot
l+ \frac{1}{2}D^{\text{LSB}}_{n}\cdot
m-\frac{1}{2}D^{\text{LSB}}_{n-1}\cdot n
\end{align}\]</span></p>
<p>Substitute the above equation into <span
class="math inline">\(V_{\text{rx}}\)</span>, we obtain the relationship
between driver legs and FFE coefficients</p>
<p><span class="math display">\[\begin{align}
V_{\text{rx}}
&amp;=\frac{1}{3}(2V_{\text{MSB}}+V_{\text{LSB}})-\frac{1}{2} \\
&amp;= \frac{1}{3} \left\{  2\left(
\frac{1}{2}-\frac{1}{2}D^{\text{MSB}}_{n+1}\cdot l+
\frac{1}{2}D^{\text{MSB}}_{n}\cdot m-
\frac{1}{2}D^{\text{MSB}}_{n-1}\cdot n \right) + \left(
\frac{1}{2}-\frac{1}{2}D^{\text{LSB}}_{n+1}\cdot l+
\frac{1}{2}D^{\text{LSB}}_{n}\cdot m-
\frac{1}{2}D^{\text{LSB}}_{n-1}\cdot n \right) \right\}-\frac{1}{2} \\
&amp;=  \left(-\frac{l}{6} \cdot 2 \cdot D^{\text{MSB}}_{n+1}+
\frac{m}{6} \cdot 2 \cdot D^{\text{MSB}}_{n}- \frac{n}{6} \cdot 2 \cdot
D^{\text{MSB}}_{n-1}\right) + \left(-\frac{l}{6} \cdot
D^{\text{LSB}}_{n+1}+ \frac{m}{6} \cdot D^{\text{LSB}}_{n}- \frac{n}{6}
\cdot D^{\text{LSB}}_{n-1}\right) \\
&amp;=  -\frac{l}{6}(2 \cdot D^{\text{MSB}}_{n+1}+D^{\text{LSB}}_{n+1})+
\frac{m}{6}(2\cdot D^{\text{MSB}}_{n}+D^{\text{LSB}}_{n})
-\frac{n}{6}(2\cdot D^{\text{MSB}}_{n-1}+D^{\text{LSB}}_{n-1})
\end{align}\]</span></p>
<p>After scaling, we obtain <span class="math display">\[
V_{\text{rx}}  = -l\cdot(2 \cdot
D^{\text{MSB}}_{n+1}+D^{\text{LSB}}_{n+1})+ m\cdot(2\cdot
D^{\text{MSB}}_{n}+D^{\text{LSB}}_{n}) - n \cdot(2\cdot
D^{\text{MSB}}_{n-1}+D^{\text{LSB}}_{n-1})
\]</span> Where <span class="math inline">\(C_{-1} = l\)</span>, <span
class="math inline">\(C_0 = m\)</span> and <span
class="math inline">\(C_{1}=n\)</span>, which is same with that of
NRZ.</p>
<h2 id="general-tx-serializer">General TX Serializer</h2>
<h3 id="mux-timing">mux timing</h3>
<p><img src="/2022/07/16/pam4-mux/mux2-1.drawio.svg"
alt="mux2-1.drawio" /></p>
<h3 id="divider-latch-timing">divider latch timing</h3>
<p><img src="/2022/07/16/pam4-mux/div2-latch.drawio.svg"
alt="div2-latch.drawio" /></p>
<h3 id="two-latches">Two latches</h3>
<p><img src="/2022/07/16/pam4-mux/two-latch.drawio.svg"
alt="two-latch.drawio" /></p>
<h2 id="reference">reference</h2>
<p>Intel. AN 835.: "PAM4 Signaling Fundamentals," Application Note
(2019) URL: <a
target="_blank" rel="noopener" href="https://www.intel.com/programmable/technical-pdfs/683852.pdf">https://www.intel.com/programmable/technical-pdfs/683852.pdf</a></p>
<p>Fernando De Bernardinis, eSilicon, "Introduction to DSP Based Serial
Links" URL: <a
target="_blank" rel="noopener" href="https://www.di.univr.it/documenti/OccorrenzaIns/matdid/matdid835215.pdf">https://www.di.univr.it/documenti/OccorrenzaIns/matdid/matdid835215.pdf</a></p>
<p>Hongtao Zhang, Brandon Jiao, Yu Liao, and Geoff Zhang, "PAM4
Signaling for 56G Serial Link Applications − A Tutorial" DesignCon 2016,
URL: <a
target="_blank" rel="noopener" href="https://www.xilinx.com/publications/events/designcon/2016/slides-pam4signalingfor56gserial-zhang-designcon.pdf">https://www.xilinx.com/publications/events/designcon/2016/slides-pam4signalingfor56gserial-zhang-designcon.pdf</a></p>
<p>Geoff Zhang, Hongtao Zhang, "A Tutorial on PAM4 Signaling for 56G
Serial Link Applications" DesignCon 2017, URL: <a
target="_blank" rel="noopener" href="https://www.oldfriend.url.tw/article/IEEE_paper/PAM4/SLIDES_10_PAM4_Signaling_for_56G_Serial_Zhang_1_.pdf">https://www.oldfriend.url.tw/article/IEEE_paper/PAM4/SLIDES_10_PAM4_Signaling_for_56G_Serial_Zhang_1_.pdf</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/14/jtf-ojtf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/14/jtf-ojtf/" class="post-title-link" itemprop="url">JTF and OJTF</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-07-14 10:22:47" itemprop="dateCreated datePublished" datetime="2022-07-14T10:22:47+00:00">2022-07-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 02:26:19" itemprop="dateModified" datetime="2023-11-06T02:26:19+00:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="concepts-of-jtf-and-ojtf">Concepts of JTF and OJTF</h2>
<p>Simplified Block Diagram of a Clock-Recovery PLL <img
src="/2022/07/14/jtf-ojtf/pll_block_diagram.gif"
alt="pll_block_diagram" /></p>
<p><strong>Jitter Transfer Function (JTF)</strong></p>
<ul>
<li>Input Signal Versus Recovered Clock</li>
<li>JTF, by jitter frequency, compares how much input signal jitter is
transferred to the <strong>output of a clock-recovery's PLL (recovered
clock)</strong>
<ul>
<li>Input signal jitter that is within the clock recovery PLL's loop
bandwidth results in jitter that is faithfully transferred (closed-loop
gain) to the clock recovery PLL's output signal. JTF in this situation
is approximately 1.</li>
<li>Input signal jitter that is outside the clock recovery PLL's loop
bandwidth results in decreasing jitter (open-loop gain) on the clock
recovery PLL's output, because the jitter is filtered out and no longer
reaches the PLL's VCO</li>
</ul></li>
</ul>
<p><strong>Observed Jitter Transfer Function</strong></p>
<ul>
<li>Input Signal Versus Sampled Signal</li>
<li>OJTF compares how much input signal jitter is transferred to the
<strong>output of a receiver's decision making circuit</strong> as
effected by a clock recovery's PLL. As the recovered clock is the
reference for detecting the input signal
<ul>
<li>Input signal jitter that is <strong>within</strong> the clock
recovery PLL's loop bandwidth results in jitter on the recovered clock
which reduces the amount of jitter that can be detected. The input
signal and clock signal are closer in phase</li>
<li>Input signal jitter that is <strong>outside</strong> the clock
recovery PLL's loop bandwidth results in <strong>reduced jitter on the
recovered cloc</strong>k which increases the amount of jitter that can
be detected. The input signal and clock signal are more out of phase.
Jitter that is on both the input and clock signals can not detected or
is reduced</li>
</ul></li>
</ul>
<p>JTF and OJTF for 1st Order PLLs</p>
<p><img src="/2022/07/14/jtf-ojtf/jsa_1st_order_graph.png"
alt="jsa_1st_order_graph" /></p>
<p><img src="/2022/07/14/jtf-ojtf/neuhelium-jtf-ojtf.png"
alt="neuhelium-jtf-ojtf" /></p>
<blockquote>
<p>The observed jitter is a complement to the PLL jitter transfer
response OJTF=1-JTF <strong>(Phase matters!)</strong></p>
<p>OTJF gives the amount of jitter which is tracked and therefore not
observed at the output of the CDR as a function of the jitter rate
applied to the input.</p>
</blockquote>
<p><img src="/2022/07/14/jtf-ojtf/A-jtf-ojtf.png"
alt="A-jtf-ojtf" /></p>
<h2 id="jitter-measurement">Jitter Measurement</h2>
<p><span class="math display">\[
J_{\text{measured}} = JTF_{\text{DUT}} \cdot OJTF_{\text{instrument}}
\]</span> The combination of the OJTF of a jitter measurement device and
the JTF of the clock generator under test gives the measured jitter as a
function of frequency.</p>
<p><img src="/2022/07/14/jtf-ojtf/image-20220716094732273.png"
alt="image-20220716094732273" /></p>
<p>For example, a clock generator with a type 1, 1st order PLL measured
with a jitter measurement device employing a golden PLL is <span
class="math display">\[
J_{\text{measured}} = \frac{\omega_1}{s+\omega_1}\frac{s}{s+\omega_2}
\]</span></p>
<p>Accurate measurement of the clock JTF requires that the OJTF cutoff
of the jitter measurement be significantly below that of the clock JTF
and that the measurement is compensated for the instrument's OJTF.</p>
<p>The overall response is a band pass filter because the clock JTF is
low pass and the jitter measurement device OJTF is high pass.</p>
<p>The compensation for the instrument OJTF is performed by measuring
the jitter of the reference clock at each jitter rate being tested and
comparing the <strong>reference jitter</strong> with the <strong>jitter
measured at the output of the DUT</strong>.</p>
<p><img src="/2022/07/14/jtf-ojtf/jit_resp.png" alt="jtf-ojtf" /></p>
<p>The lower the cutoff frequency of the jitter measurement device the
better the accuracy of the measurement will be.</p>
<p>The cutoff frequency is limited by several factors including the
phase noise of the DUT and measurement time.</p>
<h2 id="digital-sampling-oscilloscope">Digital Sampling
Oscilloscope</h2>
<p>How to analyze jitter:</p>
<ul>
<li>TIE (Time Interval Error) track</li>
<li>histogram</li>
<li>FFT</li>
</ul>
<p><strong>TIE track</strong> provides a direct view of how the phase of
the clock evolves over time.</p>
<p><strong>histogram</strong> provides valuable information about the
long term variations in the timing.</p>
<p><strong>FFT</strong> allows jitter at specific rates to be measured
down to the femto-second range.</p>
<blockquote>
<p>Maintaining the record length at a minimum of <span
class="math inline">\(1/10\)</span> of the inverse of the PLL loop
bandwidth minimizes the response error</p>
</blockquote>
<h2 id="reference">reference</h2>
<p>neuhelium, 抖动、眼图和高速数字链路分析基础 URL: <a
target="_blank" rel="noopener" href="http://www.neuhelium.com/ueditor/net/upload/file/20200826/DSOS254A/03.pdf">http://www.neuhelium.com/ueditor/net/upload/file/20200826/DSOS254A/03.pdf</a></p>
<p>Keysight JTF &amp; OJTF Concepts, <a
target="_blank" rel="noopener" href="https://rfmw.em.keysight.com/DigitalPhotonics/flexdca/FlexPLL-UG/Content/Topics/Quick-Start/jtf-pll-theory.htm?TocPath=Quick%20Start%7C_____4">https://rfmw.em.keysight.com/DigitalPhotonics/flexdca/FlexPLL-UG/Content/Topics/Quick-Start/jtf-pll-theory.htm?TocPath=Quick%20Start%7C_____4</a></p>
<p>Complementary Transmitter and Receiver Jitter Test Methodlogy, URL:
<a
target="_blank" rel="noopener" href="https://www.ieee802.org/3/bm/public/mar14/ghiasi_01_0314_optx.pdf">https://www.ieee802.org/3/bm/public/mar14/ghiasi_01_0314_optx.pdf</a></p>
<p>SerDesDesign.com CDR_BangBang_Model URL: <a
target="_blank" rel="noopener" href="https://www.serdesdesign.com/home/web_documents/models/CDR_BangBang_Model.pdf">https://www.serdesdesign.com/home/web_documents/models/CDR_BangBang_Model.pdf</a></p>
<p>M. Schnecker, Jitter Transfer Measurement in Clock Circuits, LeCroy
Corporation, DesignCon 2009. URL: <a
target="_blank" rel="noopener" href="http://cdn.teledynelecroy.com/files/whitepapers/designcon2009_lecroy_jitter_transfer_measurement_in_clock_circuits.pdf">http://cdn.teledynelecroy.com/files/whitepapers/designcon2009_lecroy_jitter_transfer_measurement_in_clock_circuits.pdf</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/09/vm-drv-eq/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/09/vm-drv-eq/" class="post-title-link" itemprop="url">Voltage-Mode Driver Equalization</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-07-09 09:48:47" itemprop="dateCreated datePublished" datetime="2022-07-09T09:48:47+00:00">2022-07-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 02:26:19" itemprop="dateModified" datetime="2023-11-06T02:26:19+00:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="vm-driver-equalization---differential-ended-termination">VM
Driver Equalization - differential ended termination</h2>
<p><span class="math display">\[
V_o = D_{n+1}C_{-1}+D_nC_0+D_{n-1}C_{+1}
\]</span></p>
<p>where <span class="math inline">\(D_n \in \{-1, 1\}\)</span></p>
<p><img src="/2022/07/09/vm-drv-eq/vdrv.drawio.svg" alt="vdrv.drawio" />
<span class="math display">\[
V_{\text{rx}} = V_{\text{dd}} \frac{(R_2-R_1)R_T}{R_1R_T+R_2R_T+R_1R_2}
\]</span> With <span class="math inline">\(R_u=(L+M+N)R_T\)</span></p>
<p>Normalize above equation, obtain <span class="math display">\[
V_{\text{rx,norm}} = \frac{(R_2-R_1)R_T}{R_1R_T+R_2R_T+R_1R_2}
\]</span></p>
<table>
<thead>
<tr class="header">
<th></th>
<th><span class="math inline">\(D_{n-1}\)</span></th>
<th><span class="math inline">\(D_{n}\)</span></th>
<th><span class="math inline">\(D_{n+1}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(C_{-1}\)</span></td>
<td>1</td>
<td>-1</td>
<td>-1</td>
</tr>
<tr class="even">
<td><span class="math inline">\(C_0\)</span></td>
<td>-1</td>
<td>1</td>
<td>-1</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(C_{+1}\)</span></td>
<td>-1</td>
<td>-1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Where precursor <span class="math inline">\(R_L = L\times
R_T\)</span>, main cursor <span class="math inline">\(R_M = M\times
R_T\)</span> and post cursor <span class="math inline">\(R_N = N\times
R_T\)</span></p>
<p><img src="/2022/07/09/vm-drv-eq/image-20220709151054840.png"
alt="image-20220709151054840" /></p>
<h3 id="equation-1">Equation-1</h3>
<blockquote>
<p><span class="math inline">\(D_{n-1}D_nD_{n+1}=1,-1,-1\)</span></p>
</blockquote>
<p><img src="/2022/07/09/vm-drv-eq/pre.drawio.svg"
alt="pre.drawio" /></p>
<p><span class="math display">\[\begin{align}
R_1 &amp;= R_N \\
&amp;= \frac{R_u}{N} \\
R_2 &amp;= R_L\parallel R_M \\
&amp;= \frac{R_u}{L+M}
\end{align}\]</span></p>
<p>We obtain <span class="math display">\[
V_{L}= \frac{1}{2}\cdot\frac{N-(L+M)}{L+M+N}
\]</span></p>
<h3 id="equation-2">Equation-2</h3>
<blockquote>
<p><span class="math inline">\(D_{n-1}D_nD_{n+1}=-1,1,-1\)</span></p>
</blockquote>
<p><img src="/2022/07/09/vm-drv-eq/main.drawio.svg"
alt="main.drawio" /></p>
<p>with <span class="math inline">\(R_1=R_T\)</span> and <span
class="math inline">\(R_2=+\infty\)</span>, we obtain <span
class="math display">\[
V_M = \frac{1}{2}
\]</span></p>
<h3 id="equation-3">Equation-3</h3>
<blockquote>
<p><span class="math inline">\(D_{n-1}D_nD_{n+1}=-1,-1,1\)</span></p>
</blockquote>
<p><span class="math display">\[\begin{align}
R_1 &amp;= R_L \\
&amp;= \frac{R_u}{L} \\
R_2 &amp;= R_N\parallel R_M \\
&amp;= \frac{R_u}{N+M}
\end{align}\]</span></p>
<p>We obtain <span class="math display">\[
V_N = \frac{1}{2}\cdot\frac{L-(N+M)}{L+M+N}
\]</span></p>
<h3 id="obtain-fir-coefficients">Obtain FIR coefficients</h3>
<p>We define <span class="math display">\[\begin{align}
l &amp;= \frac{L}{L+M+N} \\
m &amp;= \frac{M}{L+M+N} \\
n &amp;= \frac{N}{L+M+N}
\end{align}\]</span></p>
<p>where <span class="math inline">\(l+m+n=1\)</span></p>
<p>Due to Eq1 ~ Eq3 <span class="math display">\[
\left\{ \begin{array}{cl}
C_{-1}-C_0-C_1 &amp; = \frac{1}{2}(n-l-m) \\
-C_{-1}+C_0-C_1 &amp; = \frac{1}{2} \\
-C_{-1}-C_0+C_1 &amp; = \frac{1}{2}(l-n-m)
\end{array} \right.
\]</span> After scaling, we get <span class="math display">\[
\left\{ \begin{array}{cl}
C_{-1}-C_0-C_1 &amp; = -l-m+n \\
-C_{-1}+C_0-C_1 &amp; = l+m+n \\
-C_{-1}-C_0+C_1 &amp; = l-m-n
\end{array} \right.
\]</span> Then, <strong>the relationship between FIR coefficients and
legs is clear</strong>, i.e. <span class="math display">\[\begin{align}
C_{-1} &amp;= -\frac{L}{L+M+N} \\
C_{0} &amp;= \frac{M}{L+M+N} \\
C_{1} &amp;= -\frac{N}{L+M+N}
\end{align}\]</span></p>
<p>For example, <span class="math inline">\(C_{-1}=-0.1\)</span>, <span
class="math inline">\(C_0=0.7\)</span> and <span
class="math inline">\(C_1=-0.2\)</span> <span class="math display">\[
H(z) = -0.1+0.7z^{-1}-0.2z^{-2}
\]</span> <img src="/2022/07/09/vm-drv-eq/image-20220709185832444.png"
alt="image-20220709185832444" /></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">w = [<span class="number">-0.1</span>, <span class="number">0.7</span>, <span class="number">-0.2</span>];</span><br><span class="line">Fs = <span class="number">32e9</span>;</span><br><span class="line">[mag, w] = freqz(w, <span class="number">1</span>, [], Fs);</span><br><span class="line"><span class="built_in">plot</span>(w/<span class="number">1e9</span>, <span class="built_in">abs</span>(mag));</span><br><span class="line">xlabel(<span class="string">&#x27;Freq(GHz)&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;mag&#x27;</span>);</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure>
<h2 id="vm-driver-equalization---single-ended-termination">VM Driver
Equalization - single ended termination</h2>
<h3 id="equation-1-1">Equation-1</h3>
<p><img src="/2022/07/09/vm-drv-eq/pre_se.drawio.svg"
alt="pre_se.drawio" /></p>
<p><span class="math display">\[\begin{align}
V_{\text{rxp}} &amp;= \frac{1}{2} \cdot \frac{N}{L+M+N} \\
V_{\text{rxm}} &amp;= \frac{1}{2} \cdot \frac{L+M}{L+M+N}
\end{align}\]</span> So <span class="math display">\[
V_{L}= \frac{1}{2}\cdot\frac{N-(L+M)}{L+M+N}
\]</span> which is same with differential ended termination</p>
<h3 id="equation-2-1">Equation-2</h3>
<p><img src="/2022/07/09/vm-drv-eq/main_se.drawio.svg"
alt="main_se.drawio" /></p>
<p><span class="math display">\[\begin{align}
V_{\text{rxp}} &amp;= \frac{1}{2} \\
V_{\text{rxm}} &amp;= 0
\end{align}\]</span> So <span class="math display">\[
V_{M}= \frac{1}{2}
\]</span> which is same with differential ended termination</p>
<h3 id="equation-3-1">Equation-3</h3>
<p><span class="math display">\[
V_{N}= \frac{1}{2}\cdot\frac{L-(N+M)}{L+M+N}
\]</span></p>
<h3 id="obtain-fir-coefficients-1">Obtain FIR coefficients</h3>
<p>Same with differential ended termination driver.</p>
<h2 id="basic-feed-forward-equalization-theory">Basic Feed Forward
Equalization Theory</h2>
<p><img src="/2022/07/09/vm-drv-eq/image-20220709111229772.png"
alt="image-20220709111229772" /></p>
<p><img src="/2022/07/09/vm-drv-eq/image-20220709112543338.png"
alt="image-20220709112543338" /></p>
<p><img src="/2022/07/09/vm-drv-eq/image-20220709125046329.png"
alt="image-20220709125046329" /></p>
<blockquote>
<p>Pre-cursor FFE can compensate phase distortion through the
channel</p>
</blockquote>
<p><img src="/2022/07/09/vm-drv-eq/image-20220709130050057.png"
alt="image-20220709130050057" /></p>
<blockquote>
<p>Single-ended termination</p>
<p>Differential termination</p>
</blockquote>
<h2 id="reference">reference</h2>
<p>Jhwan Kim, CICC 2022, ES4-4: Transmitter Design for High-speed Serial
Data Communications</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/01/channel-termination/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/01/channel-termination/" class="post-title-link" itemprop="url">channel and termination</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-07-01 08:44:42" itemprop="dateCreated datePublished" datetime="2022-07-01T08:44:42+00:00">2022-07-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 02:26:19" itemprop="dateModified" datetime="2023-11-06T02:26:19+00:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="voltage-mode-driver">voltage mode driver</h2>
<p><img src="/2022/07/01/channel-termination/voltagemode20220704.PNG"
alt="voltagemode20220704" /></p>
<h2 id="current-mode-driver">current mode driver</h2>
<p><img
src="/2022/07/01/channel-termination/image-20220702003926289.png"
alt="image-20220702003926289" /></p>
<h2 id="reference">reference</h2>
<p>Byungsub Kim, 2022 IEEE International Solid-State Circuits
Conference, "T11: Basics of Equalization Techniques: Channels,
Equalization, and Circuits"</p>
<p>Minsoo Choi et al., “An Approximate Closed-Form Channel Model for
Diverse Interconnect Applications,” IEEE Transactions on Circuits and
Systems-I: Regular Papers, vol. 61, no. 10, pp. 3034-3043, Oct.
2014.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/06/28/delta-sigma-modulator/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/28/delta-sigma-modulator/" class="post-title-link" itemprop="url">The Delta-Sigma Modulator</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-06-28 23:19:37" itemprop="dateCreated datePublished" datetime="2022-06-28T23:19:37+00:00">2022-06-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 02:26:19" itemprop="dateModified" datetime="2023-11-06T02:26:19+00:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="the-delta-modulator">The Delta Modulator</h3>
<ol type="a">
<li>A delta modulator and (b) its simple implementation</li>
</ol>
<p><img
src="/2022/06/28/delta-sigma-modulator/image-20230202224406667.png"
alt="image-20230202224406667" /></p>
<p>The high loop gain ensures that <span class="math inline">\(V_F
\simeq V_{in}\)</span></p>
<p>The principal difficulty with the delta modulator is that the output
digital representation in fact contains only the <strong>derivative of
the input</strong>, as can be seen by noting <span
class="math inline">\(V_F=\int D_{out}dt\)</span>, i.e. <span
class="math display">\[
D_{out} = \frac{dV_F}{dt}
\]</span></p>
<ul>
<li>This differentiation alters the signal spectrum</li>
<li>attenuates the low-frequency content of the signal</li>
<li>and amplifies high-frequency noise</li>
</ul>
<h3 id="delta-sigma-modulators">Delta-Sigma modulators</h3>
<h3 id="charge-balancing">Charge Balancing</h3>
<h3 id="decimation-filters">Decimation Filters</h3>
<p>A simple time-domain analysis shows that a <strong>sinc
filter</strong> is a suitable decimation filter for a first-order
modulator. Such a filter has a rectangular impulse response, and can be
implemented as a <strong>counter</strong>.</p>
<h3 id="reference">reference</h3>
<p>B. Razavi, "The Delta-Sigma Modulator [A Circuit for All Seasons],"
IEEE Solid-State Circuits Magazine, Volume. 8, Issue. 20, pp. 10-15,
Spring 2016.</p>
<p>Pavan, Shanthi, Richard Schreier, and Gabor Temes. (2016) 2016.
Understanding Delta-Sigma Data Converters. 2nd ed. Wiley.</p>
<p>Richard Schreier (2022). Delta Sigma Toolbox
(https://www.mathworks.com/matlabcentral/fileexchange/19-delta-sigma-toolbox),
MATLAB Central File Exchange. Retrieved June 28, 2022.</p>
<p>Micheal, A., P., Pertijs., Johan, H., Huijsing., Pertijs., Johan, H.,
Huijsing. (2006). Precision Temperature Sensors in CMOS Technology.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/06/25/aliasing-folding/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/25/aliasing-folding/" class="post-title-link" itemprop="url">Aliasing and Folding</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-06-25 13:12:37" itemprop="dateCreated datePublished" datetime="2022-06-25T13:12:37+00:00">2022-06-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 02:26:19" itemprop="dateModified" datetime="2023-11-06T02:26:19+00:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/noise/" itemprop="url" rel="index"><span itemprop="name">noise</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="noise-aliasing">Noise Aliasing</h2>
<p><img src="/2022/06/25/aliasing-folding/SamplingProcess.drawio.svg"
alt="SamplingProcess.drawio" /></p>
<p>Where impulse train or "shah" function is defined as <span
class="math display">\[
\amalg(t) = T\sum_{i=-\infty}^{\infty}\delta(x-iT)
\]</span> where <span class="math inline">\(T\)</span> defines the
period, or sampling rate. Its Fourier transform is <span
class="math inline">\(2\pi \delta(\omega-i\frac{2\pi}{T})\)</span></p>
<p><strong>Multiplication Property</strong> of Fourier Transform <span
class="math display">\[
x_1(t)x_2(t)\overset{FT}{\longrightarrow}\frac{1}{2\pi}X_1(\omega)*X_2(\omega)
\]</span></p>
<p>Due to <span class="math inline">\(A = B+2C\)</span>, the noise in
the discrete time integrated from DC to <span
class="math inline">\(f_s/2\)</span> equals that of continuous time in
all frequency range.</p>
<blockquote>
<p>The DFT spectrum is periodic with period <strong>N</strong></p>
<p>The DTFT spectrum is periodic with period <span
class="math inline">\(2\pi\)</span></p>
<p>As a conclusion, the spectrum beyond <span
class="math inline">\(f_s/2\)</span> is <strong>redundant</strong> and
don't provide information</p>
</blockquote>
<h2 id="aliasing">Aliasing</h2>
<p>The frequencies <span class="math inline">\(f_{\text{sig}}\)</span>
and <span class="math inline">\(N· f_s ±f_{\text{sig}}\)</span> (N
integer), are <strong>indistinguishable</strong> in the <strong>discrete
time domain</strong>.</p>
<p><img src="/2022/06/25/aliasing-folding/image-20220626000016184.png"
alt="image-20220626000016184" /></p>
<blockquote>
<p>In order to prevent aliasing, we need <span
class="math inline">\(f_{\text{sig,max}}\lt \frac{f_s}{2}\)</span>. The
sampling rate <span class="math inline">\(f_s=2\cdot
f_{\text{sig,max}}\)</span> is called the <strong>Nyquist
Rate</strong>.</p>
<p>Two solution possibilities</p>
<ol type="1">
<li>Sample fast enough to cover all spectral components, including
"parasitic" ones outside band of interest</li>
<li>Limit <span class="math inline">\(f_{\text{sig,max}}\)</span>
through filtering - Filter out "parasitic" ones</li>
</ol>
</blockquote>
<p>Given below sequence <span class="math display">\[
X[n] =A e^{j\omega _0 T_s n}
\]</span> 1. signal frequency <span class="math inline">\(\omega _0 =
\frac{1}{2T_s}+\Delta f\)</span> <span
class="math display">\[\begin{align}
   x[n] &amp;= Ae^{j\left( \frac{1}{2T_s}+\Delta f \right)2\pi T_sn} \\
   &amp;= Ae^{j(\Delta f\cdot 2\pi T_s +\pi)n}
   \end{align}\]</span></p>
<ol start="2" type="1">
<li>signal frequency <span class="math inline">\(\omega _0
=-\frac{1}{2T_s}+\Delta f\)</span> <span
class="math display">\[\begin{align}
x&#39;[n] &amp;= Ae^{j\left( -\frac{1}{2T_s}+\Delta f \right)2\pi T_sn}
\\
&amp;= Ae^{j(\Delta f\cdot 2\pi T_s -\pi)n} \\
&amp;= Ae^{j(\Delta f\cdot 2\pi T_s -\pi)n}\cdot e^{j2\pi n} \\
&amp;= Ae^{j(\Delta f\cdot 2\pi T_s +\pi)n}
\end{align}\]</span></li>
</ol>
<p><span class="math inline">\(x[n] = x&#39;[n]\)</span> is
obtained.</p>
<p>With sampling frequency <span
class="math inline">\(\frac{1}{T_s}\)</span>, continuous signal of <span
class="math inline">\(\frac{1}{2T_s}+\Delta f\)</span> and <span
class="math inline">\(-\frac{1}{2T_s}+\Delta f\)</span> can not be
distinguished</p>
<p><img src="/2022/06/25/aliasing-folding/image-20230518232314980.png"
alt="image-20230518232314980" /></p>
<blockquote>
<p>Generally, The frequencies <span
class="math inline">\(f_{\text{sig}}\)</span> and <span
class="math inline">\(N· f_s ±f_{\text{sig}}\)</span> (N integer), are
<strong>indistinguishable</strong> in the <strong>discrete time
domain</strong>.</p>
</blockquote>
<h3 id="aliasing-example">Aliasing Example</h3>
<p>Given <span class="math inline">\(f_s = 1000\)</span> KHz</p>
<ol type="1">
<li><p><span class="math inline">\(f_{\text{sig}}=101\)</span> KHz</p>
<p><img src="/2022/06/25/aliasing-folding/image-20220626000206662.png"
alt="image-20220626000206662" /></p></li>
<li><p><span class="math inline">\(f_{\text{sig}}=899\)</span> KHz</p>
<p><img src="/2022/06/25/aliasing-folding/image-20220626000258632.png"
alt="image-20220626000258632" /></p></li>
<li><p><span class="math inline">\(f_{\text{sig}}=1101\)</span> KHz</p>
<p><img src="/2022/06/25/aliasing-folding/image-20220626000320755.png"
alt="image-20220626000320755" /></p></li>
</ol>
<h3 id="classes-of-sampling">Classes of Sampling</h3>
<ul>
<li><p>Nyquist-rate sampling</p>
<p><span class="math inline">\(f_s \gt 2 \cdot
f_{\text{sig,max}}\)</span></p></li>
<li><p>Oversampling</p>
<p><span class="math inline">\(f_s \gg 2\cdot
f_{\text{sig,max}}\)</span></p></li>
<li><p>Undersampling, subsampling</p>
<p><span class="math inline">\(f_s \lt 2\cdot
f_{\text{sig,max}}\)</span></p></li>
</ul>
<h2 id="dirac-pulses-and-spectrum">Dirac Pulses and spectrum</h2>
<p>Spectrum of <span class="math inline">\(x_d(t)\)</span> contains
<strong>scaled replicas</strong> of <span
class="math inline">\(X(f)\)</span> at <strong>integer
multiples</strong> of the sampling frequency <span
class="math inline">\(f_s\)</span></p>
<p><img src="/2022/06/25/aliasing-folding/image-20220626001925375.png"
alt="image-20220626001925375" /></p>
<p><img src="/2022/06/25/aliasing-folding/image-20220626001043693.png"
alt="image-20220626001043693" /></p>
<h2 id="reference">reference</h2>
<p>David Herres, The difference between signal under-sampling, aliasing,
and folding URL: <a
target="_blank" rel="noopener" href="https://www.testandmeasurementtips.com/the-difference-between-signal-under-sampling-aliasing-and-folding-faq/">https://www.testandmeasurementtips.com/the-difference-between-signal-under-sampling-aliasing-and-folding-faq/</a></p>
<p>Pharr, Matt; Humphreys, Greg. (28 June 2010). Physically Based
Rendering: From Theory to Implementation. Morgan Kaufmann. ISBN
978-0-12-375079-2. <a
target="_blank" rel="noopener" href="https://web.archive.org/web/20131016055332/http://graphics.stanford.edu/~mmp/chapters/pbrt_chapter7.pdf">Chapter
7 (Sampling and reconstruction)</a></p>
<p>Kundert, Ken. (2006). Simulating Switched-Capacitor Filters with
SpectreRF.</p>
<p>Pavan, Schreier and Temes, "Understanding Delta-Sigma Data
Converters, Second Edition" ISBN 978-1-119-25827-8</p>
<p>Boris Murmann, EE315B VLSI Data Conversion Circuits, Autumn 2013</p>
<p>Tania Khanna, ESE568 Fall 2019, Mixed Signal Circuit Design and
Modeling URL: <a
target="_blank" rel="noopener" href="https://www.seas.upenn.edu/~ese568/fall2019/">https://www.seas.upenn.edu/~ese568/fall2019/</a></p>
<p>Matt Pharr, Wenzel Jakob, and Greg Humphreys. 2016. Physically Based
Rendering: From Theory to Implementation (3rd. ed.). Morgan Kaufmann
Publishers Inc., San Francisco, CA, USA.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/7/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/9/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Guo</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.1/dist/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.2.12/pdfobject.min.js","integrity":"sha256-g2xji1rlE3KsGVClvuxTbcR0Kn2+wtQADSff2Tbb4zA="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>






  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
