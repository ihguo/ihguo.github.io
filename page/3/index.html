<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="KNOW-HOW">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="KNOW-HOW">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Guo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/3/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>KNOW-HOW</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">KNOW-HOW</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Guo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">164</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/raytroop" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;raytroop" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:raytroop@gmail.com" title="E-Mail → mailto:raytroop@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/21/pn-jitter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/10/21/pn-jitter/" class="post-title-link" itemprop="url">Phase Noise and Jitter Simulation</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-10-21 11:33:58" itemprop="dateCreated datePublished" datetime="2023-10-21T11:33:58+00:00">2023-10-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-09 02:41:04" itemprop="dateModified" datetime="2024-08-09T02:41:04+00:00">2024-08-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/noise/" itemprop="url" rel="index"><span itemprop="name">noise</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="integration-limits">Integration Limits</h2>
<blockquote>
<p>Y. Zhao and B. Razavi, "Phase Noise Integration Limits for Jitter
Calculation,"[<a
target="_blank" rel="noopener" href="https://www.seas.ucla.edu/brweb/papers/Conferences/YZ_ISCAS_22.pdf">https://www.seas.ucla.edu/brweb/papers/Conferences/YZ_ISCAS_22.pdf</a>]</p>
</blockquote>
<p><em>TODO</em> 📅</p>
<h2 id="vco-phase-noise">VCO Phase Noise</h2>
<h3 id="pnoise---timeaverage">pnoise - timeaverage</h3>
<ol type="1">
<li><p><em>Direct Plot/Pnoise/Phase Noise</em> or</p>
<p><img src="/2023/10/21/pn-jitter/image-20220511112856934.png"
alt="image-20220511112856934" /></p></li>
<li><p>manually calculate by definition</p>
<p><img src="/2023/10/21/pn-jitter/image-20220511112806122.png"
alt="image-20220511112806122" /></p></li>
<li><p><code>output noise</code> with unit <code>dBc</code></p>
<p><em>Direct Plot/Pnoise/Output Noise Units:dBc/Hz and Noise
convention: SSB</em></p>
<p><img src="/2023/10/21/pn-jitter/image-20220511113248984.png"
alt="image-20220511113248984" /></p></li>
</ol>
<blockquote>
<p>The above method 2 and 3 only apply to <code>timeaveage</code> pnoise
simulation,</p>
</blockquote>
<h3 id="pnoise---sampledjitteredge-crossing">pnoise -
sampled(jitter)/Edge Crossing</h3>
<p><img src="/2023/10/21/pn-jitter/EdgePhaseNoise.drawio.svg"
alt="EdgePhaseNoise.drawio" /></p>
<p><em>Direct Plot/Pnoise/<strong>Edge</strong> Phase Noise</em> or</p>
<p><img src="/2023/10/21/pn-jitter/image-20220515214901120.png"
alt="image-20220515214901120" /></p>
<p>Another way, the following equation can also be used for
<code>sampled(jitter)/Edge Crossing</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PhaseNoise(dBc/Hz) = dB20( OutputNoise(V/sqrt(Hz)) / slopeCrossing / Tper*twoPi ) - dB10(2)</span><br></pre></td></tr></table></figure>
<p>where <code>dB10(2)</code> is used to obtain SSB from DSB</p>
<p><img src="/2023/10/21/pn-jitter/image-20220511150337318.png"
alt="image-20220511150337318" /></p>
<h3 id="output-noise-of-sampledjitter-pnoise">Output Noise of
sampled(jitter) pnoise</h3>
<p>The last section's <code>Output Noise (V**2/Hz)</code> can be
obtained by <em>transient noise simulation</em></p>
<p>The idea is that sample waveform with ideal clock, subtract DC
offset, then fft(psd)</p>
<ul>
<li>samplesRaw = sample(wv)</li>
<li>samplePost = samplesRaw - average(samplesRaw)</li>
<li>Output Noise (V**2/Hz) = psd(samplePost)</li>
</ul>
<p><img src="/2023/10/21/pn-jitter/image-20220516184543148.png"
alt="image-20220516184543148" /></p>
<p><img src="/2023/10/21/pn-jitter/image-20220516184844296.png"
alt="image-20220516184844296" /></p>
<p><strong>Expression</strong>:</p>
<p><img src="/2023/10/21/pn-jitter/image-20220516185506348.png"
alt="image-20220516185506348" /></p>
<blockquote>
<p>The computation cost is typically very high, and the accuracy is
lesser as compared to PSS/Pnoise</p>
</blockquote>
<h2 id="pnoise-sampledjitter-sampled-phase-option">Pnoise
Sampled(jitter): Sampled Phase Option</h2>
<ul>
<li>Identical to <strong>noisetype=timedomain</strong> in old GUI</li>
<li>Use model:
<ul>
<li>Sampleds Per Period: number of ponits</li>
<li>Add Specific Points: specific time point, still time points</li>
</ul></li>
</ul>
<p><img src="/2023/10/21/pn-jitter/image-20220712085426461.png"
alt="image-20220712085426461" /></p>
<p><img src="/2023/10/21/pn-jitter/image-20220712085836315.png"
alt="image-20220712085836315" /></p>
<p><img src="/2023/10/21/pn-jitter/image-20220712090011204.png"
alt="image-20220712090011204" /></p>
<blockquote>
<p>pss beat freq = 5GHz</p>
<p>pnoise sweeptype: absolute, from 100k to 2.5GHz</p>
</blockquote>
<h2 id="transient-noise">Transient noise</h2>
<h3 id="phase-noise-from-transient-noise-analysis">phase noise from
transient noise analysis</h3>
<ol type="1">
<li>The Phase Noise function is now available in the Direct Plot form
(Results-Direct Plot-Main Form) after Transient Analysis is run
<ul>
<li>Absolute jitter Method</li>
<li>Direct Power Spectral Density Method</li>
</ul></li>
<li><code>PN</code> phase noise function
<ul>
<li>Absolute jitter Method</li>
<li>Direct Power Spectral Density Method</li>
</ul></li>
</ol>
<blockquote>
<p><strong>Absolute jitter Method</strong>: Phase noise is defined as
the power spectral density of the absolute jitter of an input
waveform</p>
<p>and <strong>absolute jitter method</strong> is the default method</p>
</blockquote>
<p>In below discussion, we only think about the
<code>absolute jitter method</code></p>
<h3 id="psd-and-phase-noise">PSD and Phase Noise</h3>
<blockquote>
<ul>
<li>phase noise is single-sideband</li>
<li>psd is double-sideband</li>
<li>Then the ratio is <strong>2</strong></li>
</ul>
</blockquote>
<h4 id="by-pss_pnoise">By PSS_Pnoise</h4>
<p><code>jee</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rfEdgePhaseNoise(?result &quot;pnoise_sample_pm0&quot; ?eventList &#x27;nil) + 10 * log10(2)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>convert <strong>single-sideband</strong> phase noise to psd by
multiplying 2 or <code>10 * log10(2)</code></p>
</blockquote>
<h4 id="by-trannoise-pn-function">By trannoise <code>PN</code>
function</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PN(clip(VT(&quot;/Out1&quot;) 2.60417e-08 0.000400052) &quot;rising&quot; 1.65 ?Tnom (1 / 3.84e+07) ?windowName &quot;Rectangular&quot; ?smooth 1 ?windowSize 15000 ?detrending &quot;None&quot; ?cohGain 1 ?methodType &quot;absJitter&quot;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>double-sideband psd</p>
</blockquote>
<h4 id="by-trannoise-psd-and-abs_jitter-function">By trannoise
<code>psd</code> and <code>abs_jitter</code> function</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dB10(psd(abs_jitter(clip(VT(&quot;/Out1&quot;) 2.60417e-08 0.000400052) &quot;rising&quot; 1.65 ?Tnom (1 / 3.84e+07)) 2.60417e-08 0.000400052 15360 ?windowName &quot;Rectangular&quot; ?smooth 1 ?windowSize 15000 ?detrending &quot;None&quot; ?cohGain 1))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>double-sideband psd</p>
<p><code>abs_jitter</code> <em>Y-Unit</em> default is
<code>rad</code></p>
</blockquote>
<h4 id="comparison">Comparison</h4>
<p><img src="/2023/10/21/pn-jitter/image-20220506225324377.png"
alt="image-20220506225324377" /></p>
<blockquote>
<p><code>PN</code>'s result is same with <code>psd</code>'s</p>
</blockquote>
<h3 id="rms-value">RMS value</h3>
<ul>
<li>build the <code>abs_jitter</code> function with <em>seconds as the Y
axis</em> and add the <code>stddev</code> function to determine the Jee
jitter value</li>
<li>or integrate psd</li>
</ul>
<p>The RMS <span class="math inline">\(x_{\text{RMS}}\)</span> of a
discrete domain signal <span class="math inline">\(x(n)\)</span> is
given by <span class="math display">\[
x_{\text{RMS}}=\sqrt{\frac{1}{N}\sum_{n=0}^{N-1}|x(n)|^2}
\]</span> Inserting Parseval's theorem given by <span
class="math display">\[
\sum_{n=0}^{N-1}|x(n)|^2=\frac{1}{N}\sum_{n=0}^{N-1}|X(k)|^2
\]</span> allows for computing the RMS from the spectrum <span
class="math inline">\(X(k)\)</span> as <span class="math display">\[
x_{\text{RMS}}=\sqrt{\frac{1}{N^2}\sum_{n=0}^{N-1}|X(k)|^2}
\]</span></p>
<h3 id="remarks">Remarks</h3>
<p>Cadence Spectre's <code>PN</code> function may call
<code>abs_jitter</code> and <code>psd</code> function under the
hood.</p>
<h2 id="reference">reference</h2>
<p>Article (11514536) Title: How to obtain a phase noise plot from a
transient noise analysis URL: <a
target="_blank" rel="noopener" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000000nb1CEAQ">https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1Od0000000nb1CEAQ</a></p>
<p>Article (20500632) Title: How to simulate Random and Deterministic
Jitters URL: <a
target="_blank" rel="noopener" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O3w000009fiXeEAI">https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O3w000009fiXeEAI</a></p>
<p>Tutorial on Scaling of the Discrete Fourier Transform and the Implied
Physical Units of the Spectra of Time-Discrete Signals Jens Ahrens, Carl
Andersson, Patrik Höstmad, Wolfgang Kropp URL: <a
target="_blank" rel="noopener" href="https://appliedacousticschalmers.github.io/scaling-of-the-dft/AES2020_eBrief/">https://appliedacousticschalmers.github.io/scaling-of-the-dft/AES2020_eBrief/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/21/ldo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/10/21/ldo/" class="post-title-link" itemprop="url">Low-Dropout Regulator</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-10-21 10:31:41" itemprop="dateCreated datePublished" datetime="2023-10-21T10:31:41+00:00">2023-10-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-09 02:41:04" itemprop="dateModified" datetime="2024-08-09T02:41:04+00:00">2024-08-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="pmos-ldo">PMOS LDO</h2>
<p>A large output capacitor solves the sudden load change problem, but
the stability decreases because the large output capacitor forces the
output pole toward the origin with the role of dominant pole</p>
<h2 id="dc-output-impedance">DC output impedance</h2>
<p>DC output impedance of NMOS and PMOS LDO is the
<strong><em>same</em></strong> for the same error amplifier gain</p>
<p><span class="math display">\[
R_{\text{out}} = \frac{1}{\beta A_{o1} g_{m2}}
\]</span></p>
<p>The NMOS LDO has a faster response to line transients than the PMOS
LDO since it has better (smaller) PSRR</p>
<p>A good PSRR is important when an LDO is used as a sub-regulator in
cascade with a switching regulator. The LDO would need to have a
sufficiently high rejection at the switching frequency of the switching
converter to filter out the ripples at that frequency</p>
<h2 id="power-mos-gain-affect-on-pmos-ldo">Power MOS gain affect on PMOS
LDO</h2>
<p><img src="/2023/10/21/ldo/pwm_miller.drawio.svg"
alt="pwm_miller.drawio" /></p>
<p>DC gain <span class="math display">\[
A_{dc} = g_mR_\text{ota} A_2
\]</span> 3dB bandwidth <span class="math display">\[
\omega_p = \frac{1}{R_\text{ota}(C_g+A_2C_c)}
\]</span> and GBW <span class="math display">\[
\omega_u = \frac{g_m}{\frac{C_g}{A_2}+C_c}
\]</span></p>
<p><img src="/2023/10/21/ldo/image-20240803102158612.png"
alt="image-20240803102158612" /></p>
<h3 id="feedforward-compensation-with-c_textff">Feedforward Compensation
with <span class="math inline">\(C_\text{FF}\)</span>​</h3>
<ul>
<li>Improved Noise</li>
<li>Improved Stability and Transient Response</li>
<li>Improved PSRR</li>
</ul>
<p><img src="/2023/10/21/ldo/outCc.drawio.svg" alt="outCc.drawio" /></p>
<p><span class="math display">\[\begin{align}
R_1 \parallel \frac{1}{sC_{FF}} &amp;= \frac{R_1}{1+sR_1C_{FF}} \\
Z_o &amp;= \left( R_1\parallel \frac{1}{sC_{FF}}+R_2\right)\parallel
\frac{1}{sC_L} \\
&amp;=\frac{R_1+R_2+sR_1R_2C_{FF}}{s^2R_1R_2C_{FF}C_L +
s[(R_1+R_2)C_L+R_1C_{FF}]+1} \\
A_{V2} &amp;= g_m Z_o \\
&amp;= g_m \frac{R_1+R_2+sR_1R_2C_{FF}}{s^2R_1R_2C_{FF}C_L +
s[(R_1+R_2)C_L+R_1C_{FF}]+1} \\
\beta &amp;= \frac{R_2}{\frac{R_1}{1+sR_1C_{FF}}+R_2} \\
&amp;= \frac{R_2(1+sR_1C_{FF})}{R_1+R_2+sR_1R_2C_{FF}} \\
A_{V2}\beta &amp;=
\frac{g_mR_2(1+sR_1C_{FF})}{s^2R_1R_2C_{FF}C_L+s[(R_1+R_2)C_L+R_1C_{FF}]+1}
\end{align}\]</span></p>
<p>That is, adding a <span class="math inline">\(C_{FF}\)</span> also
introduces a zero (<span class="math inline">\(\omega_z\)</span>) and
pole (<span class="math inline">\(\omega_p\)</span>) into the <em>LDO
feedback loop</em></p>
<p><span class="math display">\[\begin{align}
\omega_{po} &amp;= \frac{1}{(R_1+R_2)C_L} \\
\omega_z &amp;= \frac{1}{R_1C_{FF}} \\
\omega_{p} &amp;= \frac{1}{(R_1 \parallel R_2)C_{FF}}
\end{align}\]</span></p>
<blockquote>
<p>Application Report SBVA042–July 2014, Pros and Cons of Using a
Feedforward Capacitor with a Low-Dropout Regulator [<a
target="_blank" rel="noopener" href="https://www.ti.com/lit/an/sbva042/sbva042.pdf">https://www.ti.com/lit/an/sbva042/sbva042.pdf</a>]</p>
<p>LDO Basics: Noise – How a Feed-forward Capacitor Improves System
Performance [<a
target="_blank" rel="noopener" href="https://www.ti.com/document-viewer/lit/html/SSZTA13">https://www.ti.com/document-viewer/lit/html/SSZTA13</a>]</p>
<p>LDO Basics: Noise – How a Noise-reduction Pin Improves System
Performance [<a
target="_blank" rel="noopener" href="https://www.ti.com/document-viewer/lit/html/SSZTA40">https://www.ti.com/document-viewer/lit/html/SSZTA40</a>]</p>
</blockquote>
<h2 id="nmos-slave-ldo">NMOS Slave LDO</h2>
<p><img src="/2023/10/21/ldo/nmos_slave_psrr.drawio.svg"
alt="nmos_slave_psrr.drawio" /></p>
<p><span class="math display">\[\begin{align}
\frac{V_g}{V_i}
&amp;=\frac{R||\frac{1}{s(C_g+C_{gs})}}{R||\frac{1}{s(C_g+C_{gs})}+\frac{1}{sC_{gd}}}
\\
&amp;= \frac{sRC_{gd}}{sR(C+C_{gd}+C_{gs})+1}
\end{align}\]</span> <span class="math display">\[
\frac{V_g}{V_i} = -\frac{sC_{ds}+g_{ds}}{sC_{gs}+g_m}
\]</span></p>
<p>That is, <span class="math display">\[
\omega_{z,d} \simeq \frac{1}{R(\frac{g_m}{g_{ds}}C_{gd}+C)}
\]</span></p>
<p>The calculating PSRR pole approach similar with zero, just <span
class="math inline">\(V_o\)</span> to <span
class="math inline">\(V_i\)</span> zero <span class="math display">\[
\omega_{p,d} \simeq \frac{1}{R(\frac{C_s}{g_mR}+C)}
\]</span></p>
<p>DC PSRR <span class="math display">\[
\text{PSRR} = \frac{1}{g_mr_o}
\]</span></p>
<hr />
<p><img src="/2023/10/21/ldo/image-20240726205718920.png"
alt="image-20240726205718920" /></p>
<p><img src="/2023/10/21/ldo/image-20240726205738664.png"
alt="image-20240726205738664" /></p>
<hr />
<h2 id="high-frequency-psrr">High frequency PSRR</h2>
<p><img src="/2023/10/21/ldo/high-psrr.drawio.svg"
alt="high-psrr.drawio" /></p>
<h2 id="reference">reference</h2>
<p>Hinojo, J.M., Martinez, C.I., &amp; Torralba, A.J. (2018). Internally
Compensated LDO Regulators for Modern System-on-Chip Design.</p>
<p>Mingoo Seok. ISSCC 2020 tutorial "Basics of Digital Low-Dropout (LDO)
Integrated Voltage Regulator"</p>
<p>Pavan Kumar Hanumolu. CICC 2015. "Low Dropout Regulators"</p>
<p>Chen, K. (2016). Power Management Techniques for Integrated Circuit
Design.</p>
<p>Morita, B.G. (2014). Understand Low-Dropout Regulator ( LDO )
Concepts to Achieve Optimal Designs.</p>
<p>H. -S. Kim, "Exploring Ways to Minimize Dropout Voltage for
Energy-Efficient Low-Dropout Regulators: Viable approaches that preserve
performance," in IEEE Solid-State Circuits Magazine, vol. 15, no. 2, pp.
59-68, Spring 2023, doi: 10.1109/MSSC.2023.3262767.</p>
<p>Ali Sheikholeslami, Circuit Intuitions: Voltage Regulators IEEE
Solid-State Circuits Magazine, Vol. 12, Issue 4, to appear, Fall
2020.</p>
<p>Operational Transconductance Amplifier II Multi-Stage Designs [<a
target="_blank" rel="noopener" href="https://people.eecs.berkeley.edu/~boser/courses/240B/lectures/M07%20OTA%20II.pdf">https://people.eecs.berkeley.edu/~boser/courses/240B/lectures/M07%20OTA%20II.pdf</a>]</p>
<p>Toshiba, Load Transient Response of LDO and Methods to Improve it
Application Note [<a
target="_blank" rel="noopener" href="https://toshiba.semicon-storage.com/info/application_note_en_20210326_AKX00312.pdf?did=66268">https://toshiba.semicon-storage.com/info/application_note_en_20210326_AKX00312.pdf?did=66268</a>]</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/06/tranOP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/10/06/tranOP/" class="post-title-link" itemprop="url">DC operating points during TRANSIENT analysis</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-10-06 10:32:10" itemprop="dateCreated datePublished" datetime="2023-10-06T10:32:10+00:00">2023-10-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-09 02:41:04" itemprop="dateModified" datetime="2024-08-09T02:41:04+00:00">2024-08-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/cad/" itemprop="url" rel="index"><span itemprop="name">cad</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p><a target="_blank" rel="noopener" href="https://community.cadence.com/members/andrew-beckett">Andrew
Beckett</a><a
target="_blank" rel="noopener" href="https://community.cadence.com/cadence_technology_forums/f/rf-design/25702/finding-dc-operating-points-at-certain-timepoints-during-transient-analysis/1321796#1321796">over
11 years ago</a></p>
<p>Two approaches:</p>
<ol type="1">
<li>On the transient options form, there's a field called "infotimes" -
specify the times at which you want it to output the dc operating point
data. You can then annotate the "transient operating points" from any of
these times after the simulation, or access them via the results
browser.</li>
<li>Or you could get the operating point data to be continuously saved
during the transient for selected devices - if so, create a file called
(say) "save.scs" (make sure it has a ".scs" suffix), and put: save
M1:oppoint or save M*:oppoint sigtype=dev in this file, and then
reference the file via Setup-&gt;Model Libraries or as a "definition
file" on Setup-&gt;Simulation Files. With this approach you can then
find the operating point data for the selected devices in the results
browser and plot it versus time (be cautious of saving too much though
because this can generate a lot of data if you're not careful)</li>
</ol>
<p>Regards,</p>
<p>Andrew.</p>
</blockquote>
<p><img src="/2023/10/06/tranOP/image-20231006110801078.png"
alt="image-20231006110801078" /></p>
<h2 id="transient-options-form">transient options form</h2>
<h3 id="setup">setup</h3>
<p><img src="/2023/10/06/tranOP/image-20231006103506475.png"
alt="image-20231006103506475" /></p>
<h3 id="access-1">access 1</h3>
<p><strong>right-click</strong> <span class="math inline">\(\to\)</span>
<strong>Annotate</strong> <span class="math inline">\(\to\)</span>
<strong>Transient Operating Points</strong></p>
<p><img src="/2023/10/06/tranOP/image-20231006104317496.png"
alt="image-20231006104317496" /></p>
<h3 id="access-2">access 2</h3>
<p><strong>tranOpTimed</strong></p>
<p><img src="/2023/10/06/tranOP/image-20231006105236323.png"
alt="image-20231006105236323" /></p>
<h2 id="save.scs">save.scs</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">save M0:oppoint</span><br></pre></td></tr></table></figure>
<p><img src="/2023/10/06/tranOP/image-20231006110506245.png"
alt="image-20231006110506245" /></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/05/varstat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/10/05/varstat/" class="post-title-link" itemprop="url">variables with statistical distribution</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-10-05 19:04:19" itemprop="dateCreated datePublished" datetime="2023-10-05T19:04:19+00:00">2023-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-09 02:41:04" itemprop="dateModified" datetime="2024-08-09T02:41:04+00:00">2024-08-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/cad/" itemprop="url" rel="index"><span itemprop="name">cad</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>Specifying Parameter Distributions Using Statistics Blocks</code></p>
<ul>
<li><code>process</code>: generate random number once per MC run</li>
<li><code>mismatch</code> : generate a random number per instance</li>
</ul>
<p><img src="/2023/10/05/varstat/image-20231005190644654.png"
alt="image-20231005190644654" /></p>
<p><img src="/2023/10/05/varstat/image-20231005190712057.png"
alt="image-20231005190712057" /></p>
<p><img src="/2023/10/05/varstat/image-20231005190724560.png"
alt="image-20231005190724560" /></p>
<h2 id="reference">reference</h2>
<p>Article (20498356) Title: How to vary design variables with
statistical distribution to be used with Monte Carlo analysis URL: <a
target="_blank" rel="noopener" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O3w000009ErHHEA0">https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O3w000009ErHHEA0</a></p>
<p>Spectre Circuit Simulator Reference</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/05/nonlinearSystem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/10/05/nonlinearSystem/" class="post-title-link" itemprop="url">Nonlinear Systems</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-10-05 15:48:47" itemprop="dateCreated datePublished" datetime="2023-10-05T15:48:47+00:00">2023-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-09 02:41:04" itemprop="dateModified" datetime="2024-08-09T02:41:04+00:00">2024-08-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/dsp/" itemprop="url" rel="index"><span itemprop="name">dsp</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><em>TODO</em> 📅</p>
<h2 id="paper">paper</h2>
<p>A. Demir, A. Mehrotra and J. Roychowdhury, "Phase noise in
oscillators: a unifying theory and numerical methods for
characterization," in IEEE Transactions on Circuits and Systems I:
Fundamental Theory and Applications, vol. 47, no. 5, pp. 655-674, May
2000, doi: 10.1109/81.847872. [<a
target="_blank" rel="noopener" href="https://www.researchgate.net/profile/Jaijeet-Roychowdhury/publication/3774912_Phase_noise_in_oscillators_a_unifying_theory_and_numerical_methods_for_characterisation/links/56436c0308ae54697fb2e543/Phase-noise-in-oscillators-a-unifying-theory-and-numerical-methods-for-characterisation.pdf">pdf</a>]</p>
<p>demir, Alper. (2000). Floquet theory and non-linear perturbation
analysis for oscillators with differential-algebraic equations.
International Journal of Circuit Theory and Applications - INT J CIRCUIT
THEOR APPL. 28. 163-185.
10.1002/(SICI)1097-007X(200003/04)28:23.0.CO;2-K.</p>
<h2 id="book">book</h2>
<p>⭐ Levy, Bernard. (2020). <strong>Random Processes with Applications
to Circuits and Communications</strong>. 10.1007/978-3-030-22297-0.</p>
<p>Sundararajan, D.. (2023). <strong>Signals and Systems: A Practical
Approach</strong>. 10.1007/978-3-031-19377-4.</p>
<p>Øksendal, Bernt. (2000). <strong>Stochastic Differential Equations:
An Introduction with Applications</strong>.
10.1007/978-3-662-03185-8.</p>
<p>Chicone, Carmen Charles. <strong>Ordinary Differential Equations with
Applications. 2nd ed</strong>. New York ; Berlin: Springer, 2006.</p>
<p>⭐ Stanley H. Chan (2021). <strong>Introduction to Probability for
Data Science</strong>. Michigan Publishing, [<a
target="_blank" rel="noopener" href="https://probability4datascience.com/index.html">link</a>]</p>
<p>Simo Särkkä and Arno Solin (2019). <strong>Applied Stochastic
Differential Equations</strong>. Cambridge University Press. Cambridge,
UK. [<a target="_blank" rel="noopener" href="https://github.com/AaltoML/SDE">link</a>]</p>
<p>Gerald Teschl, <strong>Ordinary Differential Equations and Dynamical
Systems</strong> A.M.S., 2012</p>
<p>Kurt Bryan; Brian Winkel (2020), "2021-Bryan, Kurt - SIMIODE Online
Digital Textbook - <strong>Differential Equations: A Toolbox for
Modeling the World</strong>.,"
https://www.simiode.org/resources/8208.</p>
<p>Jordan, D.W. and Smith, P. (2007) <strong>Nonlinear Ordinary
Differential Equations: An Introduction for Scientists and Engineers.
4th Edition</strong>, Oxford University Press, New York.</p>
<p>Strogatz, S.H. (2015). <strong>Nonlinear Dynamics and Chaos: With
Applications to Physics, Biology, Chemistry, and Engineering (2nd
ed.)</strong>. CRC Press. https://doi.org/10.1201/9780429492563</p>
<p>⭐ Nicolas Privault. <strong>Introduction to Stochastic Finance with
Market Examples, Second Edition</strong>, Chapman &amp; Hall/CRC
Financial Mathematics Series, 2022</p>
<p>⭐ Nicolas Privault. <strong>MH4514 Financial Mathematics</strong>
[<a target="_blank" rel="noopener" href="https://personal.ntu.edu.sg/nprivault/indext.html">link</a>,
<a
target="_blank" rel="noopener" href="https://drive.google.com/file/d/1iCsMdtJctWK2fo65WP5iqNvQ73acObzU">MH4514_notes</a>]</p>
<p>Evans, Lawrence C.. <strong>Stochastic differential equations version
1.2</strong> [<a
target="_blank" rel="noopener" href="https://www.cmor-faculty.rice.edu/~cox/stoch/SDE.course.pdf">pdf</a>]</p>
<p>Evans, Lawrence C.. <strong>An Introduction to Stochastic
Differential Equations.</strong> (2014).</p>
<p>⭐ Matt Charnley. <strong>Differential Equations: An Introduction for
Engineers</strong> [<a
target="_blank" rel="noopener" href="https://sites.rutgers.edu/matthew-charnley/course-materials/differential-equations-an-introduction-for-engineers/">link</a>]</p>
<p>⭐ Jiří Lebl. <strong>Notes on Diffy Qs: Differential Equations for
Engineers</strong> [<a
target="_blank" rel="noopener" href="https://www.jirka.org/diffyqs/">link</a>]</p>
<h2 id="measure-theoretic-probability-theory">measure-theoretic
probability theory</h2>
<p>Jacod, J., &amp; Protter, P. (2004). <strong>Probability Essentials
(Second edition.)</strong>. Springer Berlin Heidelberg.</p>
<p>Sebastien Roch, UW-Madison. <strong>Lecture Notes on
Measure-theoretic Probability Theory</strong> [<a
target="_blank" rel="noopener" href="https://people.math.wisc.edu/~roch/grad-prob/index.html">link</a>]</p>
<p>Matthew N. Bernstein <strong>Demystifying measure-theoretic
probability theory</strong> [<a
target="_blank" rel="noopener" href="https://mbernste.github.io/posts/self_info/">part1</a>, <a
target="_blank" rel="noopener" href="https://mbernste.github.io/posts/measure_theory_2/">part2</a>, <a
target="_blank" rel="noopener" href="https://mbernste.github.io/posts/measure_theory_3/">part3</a>]</p>
<p>Edwin Chen. <strong>Layman's Introduction to Measure Theory</strong>
[<a
target="_blank" rel="noopener" href="https://blog.echen.me/2011/03/14/laymans-introduction-to-measure-theory/">link</a>]</p>
<p>Ales Cerný. <strong>Mathematical Techniques in Finance: Tools for
Incomplete Markets - Second Edition</strong></p>
<h2 id="blogs">blogs</h2>
<p>⭐ Prof. Dr. Maxim Ulrich, KIT. <strong>Stochastic Calculus:
Basics</strong> [<a
target="_blank" rel="noopener" href="https://youtube.com/playlist?list=PLyQSjcv8LwAEdNgdVnNH02-JTJfrwCt81">https://youtube.com/playlist?list=PLyQSjcv8LwAEdNgdVnNH02-JTJfrwCt81</a>]</p>
<p>⭐ Lewis Smith. <strong>Itô and Stratonovich; a guide for the
perplexed</strong> [<a
target="_blank" rel="noopener" href="https://www.robots.ox.ac.uk/~lsgs/posts/2018-09-30-ito-strat.html">https://www.robots.ox.ac.uk/~lsgs/posts/2018-09-30-ito-strat.html)</a>]</p>
<p>布朗运动、伊藤引理、BS 公式（前篇） [<a
target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/38293827">https://zhuanlan.zhihu.com/p/38293827</a>]</p>
<p>Wiener Process <span class="math inline">\(dB^2=dt\)</span> [<a
target="_blank" rel="noopener" href="https://math.stackexchange.com/q/81865/1059887">https://math.stackexchange.com/q/81865/1059887</a>]</p>
<p>Professor Steve Lalley Statistics 385: Brownian Motion and Stochastic
Calculus Fall 2016 [<a
target="_blank" rel="noopener" href="https://galton.uchicago.edu/~lalley/Courses/385/">https://galton.uchicago.edu/~lalley/Courses/385/</a>]</p>
<p>18.S096 | Fall 2013 | Undergraduate MIT. Topics In Mathematics With
Applications In Finance [<a
target="_blank" rel="noopener" href="https://ocw.mit.edu/courses/18-s096-topics-in-mathematics-with-applications-in-finance-fall-2013/pages/syllabus/">https://ocw.mit.edu/courses/18-s096-topics-in-mathematics-with-applications-in-finance-fall-2013/pages/syllabus/</a>]</p>
<p>Mathuranathan, Power and Energy of a Signal : Demystified URL: <a
target="_blank" rel="noopener" href="https://www.gaussianwaves.com/2013/12/power-and-energy-of-a-signal/">https://www.gaussianwaves.com/2013/12/power-and-energy-of-a-signal/</a></p>
<p>White Noise : Simulation and Analysis using Matlab gaussianwaves.com
[<a
target="_blank" rel="noopener" href="https://www.gaussianwaves.com/2013/11/simulation-and-analysis-of-white-noise-in-matlab/">https://www.gaussianwaves.com/2013/11/simulation-and-analysis-of-white-noise-in-matlab/)</a>]</p>
<p>Prof. J. Nathan Kutz AMATH 568 Advanced Differential Equations:
Asymptotics &amp; Perturbations [<a
target="_blank" rel="noopener" href="https://faculty.washington.edu/kutz/am568/am568.html">https://faculty.washington.edu/kutz/am568/am568.html</a>]</p>
<p>Asymptotics and perturbation methods - Prof. Steven Strogatz [<a
target="_blank" rel="noopener" href="https://youtube.com/playlist?list=PL5EH0ZJ7V0jV7kMYvPcZ7F9oaf_YAlfbI">https://youtube.com/playlist?list=PL5EH0ZJ7V0jV7kMYvPcZ7F9oaf_YAlfbI)</a>]
via <span class="citation" data-cites="YouTube">@YouTube</span></p>
<p>Simo Särkkä and Arno Solin (2014). <strong>Applied Stochastic
Differential Equations</strong>. <em>Lecture notes of the course
Becs-114.4202 Special Course in Computational Engineering II held in
Autumn 2014</em>. (<a
target="_blank" rel="noopener" href="https://users.aalto.fi/~ssarkka/course_s2014/sde_course_booklet.pdf">Booklet
as PDF</a>, <a
target="_blank" rel="noopener" href="https://users.aalto.fi/~ssarkka/course_s2014/">Slides and
exercises</a>). (2012 material is <a
target="_blank" rel="noopener" href="https://users.aalto.fi/~ssarkka/course_s2012/pdf/">here</a>).</p>
<p>Ben Chugg. Itô Integral: Construction and Basic Properties [<a
target="_blank" rel="noopener" href="https://benchugg.com/research_notes/intro_ito/">https://benchugg.com/research_notes/intro_ito/</a>]</p>
<p>Ben Chugg. Itô Processes and The Fundamental Theorem of Stochastic
Calculus [<a
target="_blank" rel="noopener" href="https://benchugg.com/research_notes/sde_ito_lemma/">https://benchugg.com/research_notes/sde_ito_lemma/)</a>]</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/09/29/network/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/29/network/" class="post-title-link" itemprop="url">Network Analysis</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-09-29 15:57:01" itemprop="dateCreated datePublished" datetime="2023-09-29T15:57:01+00:00">2023-09-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-09 02:41:04" itemprop="dateModified" datetime="2024-08-09T02:41:04+00:00">2024-08-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/dsp/" itemprop="url" rel="index"><span itemprop="name">dsp</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img src="/2023/09/29/network/image-20240704212740246.png"
alt="image-20240704212740246" /></p>
<h2 id="rational-fit">Rational Fit</h2>
<h3 id="matlabrationalfit">Matlab/rationalfit</h3>
<p>To resolve the convergence problem of s-parameter in Spectre
simulator - <code>rationalfit</code> and write Verilog-A</p>
<p><img src="/2023/09/29/network/image-20220630224525565.png"
alt="image-20220630224525565" /></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">filename  = <span class="string">&#x27;touchstone/ISI.S4P&#x27;</span>;</span><br><span class="line">s4p = read(rfdata.data, filename);</span><br><span class="line">sdd_params = s2sdd(s2p.S_Parameters, <span class="number">2</span>);</span><br><span class="line">sdd21 = <span class="built_in">squeeze</span>(sdd_params(<span class="number">2</span>, <span class="number">1</span>, :));   <span class="comment">% s21</span></span><br><span class="line">freq = s4p.Freq;</span><br><span class="line"></span><br><span class="line"><span class="comment">% rational fitting</span></span><br><span class="line">weight = <span class="built_in">ones</span>(<span class="built_in">size</span>(sdd21));</span><br><span class="line">weight(<span class="built_in">floor</span>(<span class="keyword">end</span>*<span class="number">3</span>/<span class="number">4</span>):<span class="keyword">end</span>) = <span class="number">0.2</span>;</span><br><span class="line">weight(<span class="number">2</span>:<span class="number">10</span>) = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">[hfit, errb] = rationalfit(freq, sdd21, <span class="string">&#x27;IterationLimit&#x27;</span>, [<span class="number">4</span>, <span class="number">16</span>], <span class="string">&#x27;Delayfactor&#x27;</span>, <span class="number">0.98</span>, ...</span><br><span class="line">    <span class="string">&#x27;Weight&#x27;</span>, weight, <span class="string">&#x27;Tolerance&#x27;</span>, <span class="number">-38</span>, <span class="string">&#x27;NPoles&#x27;</span>, <span class="number">32</span>);</span><br><span class="line">[sdd21_fit, ff] = freqresp(hfit, freq);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">plot</span>(freq/<span class="number">1e9</span>, db(sdd21), <span class="string">&#x27;b-&#x27;</span>); <span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>(ff/<span class="number">1e9</span>, db(sdd21_fit), <span class="string">&#x27;r-&#x27;</span>); <span class="built_in">hold</span> off; grid on;</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;sdd21&#x27;</span>, <span class="string">&#x27;sdd21\_fit&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;Freq (GHz)&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;magnitude (dB)&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ts = <span class="number">1e-12</span>;</span><br><span class="line">n = <span class="number">2</span>^<span class="number">18</span>;</span><br><span class="line">trise = <span class="number">4e-14</span>;</span><br><span class="line">[yout, tout] = stepresp(hfit, ts, n, trise);</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">plot</span>(tout*<span class="number">1e12</span>, yout, <span class="string">&#x27;b-&#x27;</span>); grid on;</span><br><span class="line">xlabel(<span class="string">&#x27;Time (ps)&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;V&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;Step Response&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">% write verilog-A</span></span><br><span class="line">writeva(hfit, <span class="string">&#x27;channel_32poles.va&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="z0">Z0</h2>
<blockquote>
<p>Remember, S-parameters <strong>don't mean much</strong> unless you
know the value of the <strong>reference impedance </strong>(it's
frequently called Z0).</p>
</blockquote>
<p>simulator will read sp file's <strong>Z0</strong> parameter</p>
<p><img src="/2023/09/29/network/image-20220430214052538.png"
alt="image-20220430214052538" /></p>
<p><img src="/2023/09/29/network/image-20220430214136970.png"
alt="image-20220430214136970" /></p>
<p><img src="/2023/09/29/network/image-20220430214419283.png"
alt="image-20220430214419283" /></p>
<blockquote>
<p>The default <strong>Z0</strong> exported by EMX is
<strong>50</strong></p>
</blockquote>
<h2 id="reference">reference</h2>
<p><a
target="_blank" rel="noopener" href="https://www.microwaves101.com/encyclopedias/s-parameters">microwaves101,
S-parameters
(https://www.microwaves101.com/encyclopedias/s-parameters)</a></p>
<p>Pupalaikis, P. (2020). <em>S-Parameters for Signal Integrity</em>.
Cambridge: Cambridge University Press. doi:10.1017/9781108784863</p>
<p>Coelho, C. P., Phillips, J. R., &amp; Silveira, L. M. (n.d.). Robust
rational function approximation algorithm for model generation.
Proceedings 1999 Design Automation Conference (Cat. No. 99CH36361).
doi:10.1109/dac.1999.781313</p>
<p>Cadence IEEE IMS 2023, Introducing the Spectre S-Parameter Quality
Checker and Rational Fit Model Generator [<a
target="_blank" rel="noopener" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O3w000009lplhEAA">https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O3w000009lplhEAA</a>]</p>
<p>The Complex Art Of Handling S-Parameters: The importance of
extraction and fitting to circuit simulation involving S-parameters [<a
target="_blank" rel="noopener" href="https://semiengineering.com/the-complex-art-of-handling-s-parameters/">https://semiengineering.com/the-complex-art-of-handling-s-parameters</a>]</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/09/29/scattering/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/29/scattering/" class="post-title-link" itemprop="url">Scattering parameters</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-09-29 15:57:01" itemprop="dateCreated datePublished" datetime="2023-09-29T15:57:01+00:00">2023-09-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-09 02:41:04" itemprop="dateModified" datetime="2024-08-09T02:41:04+00:00">2024-08-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/dsp/" itemprop="url" rel="index"><span itemprop="name">dsp</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="rational-fit">Rational Fit</h2>
<h3 id="matlabrationalfit">Matlab/rationalfit</h3>
<p>To resolve the convergence problem of s-parameter in Spectre
simulator - <code>rationalfit</code> and write Verilog-A</p>
<p><img src="/2023/09/29/scattering/image-20220630224525565.png"
alt="image-20220630224525565" /></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">filename  = <span class="string">&#x27;touchstone/ISI.S4P&#x27;</span>;</span><br><span class="line">s4p = read(rfdata.data, filename);</span><br><span class="line">sdd_params = s2sdd(s2p.S_Parameters, <span class="number">2</span>);</span><br><span class="line">sdd21 = <span class="built_in">squeeze</span>(sdd_params(<span class="number">2</span>, <span class="number">1</span>, :));   <span class="comment">% s21</span></span><br><span class="line">freq = s4p.Freq;</span><br><span class="line"></span><br><span class="line"><span class="comment">% rational fitting</span></span><br><span class="line">weight = <span class="built_in">ones</span>(<span class="built_in">size</span>(sdd21));</span><br><span class="line">weight(<span class="built_in">floor</span>(<span class="keyword">end</span>*<span class="number">3</span>/<span class="number">4</span>):<span class="keyword">end</span>) = <span class="number">0.2</span>;</span><br><span class="line">weight(<span class="number">2</span>:<span class="number">10</span>) = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">[hfit, errb] = rationalfit(freq, sdd21, <span class="string">&#x27;IterationLimit&#x27;</span>, [<span class="number">4</span>, <span class="number">16</span>], <span class="string">&#x27;Delayfactor&#x27;</span>, <span class="number">0.98</span>, ...</span><br><span class="line">    <span class="string">&#x27;Weight&#x27;</span>, weight, <span class="string">&#x27;Tolerance&#x27;</span>, <span class="number">-38</span>, <span class="string">&#x27;NPoles&#x27;</span>, <span class="number">32</span>);</span><br><span class="line">[sdd21_fit, ff] = freqresp(hfit, freq);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">plot</span>(freq/<span class="number">1e9</span>, db(sdd21), <span class="string">&#x27;b-&#x27;</span>); <span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>(ff/<span class="number">1e9</span>, db(sdd21_fit), <span class="string">&#x27;r-&#x27;</span>); <span class="built_in">hold</span> off; grid on;</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;sdd21&#x27;</span>, <span class="string">&#x27;sdd21\_fit&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;Freq (GHz)&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;magnitude (dB)&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ts = <span class="number">1e-12</span>;</span><br><span class="line">n = <span class="number">2</span>^<span class="number">18</span>;</span><br><span class="line">trise = <span class="number">4e-14</span>;</span><br><span class="line">[yout, tout] = stepresp(hfit, ts, n, trise);</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">plot</span>(tout*<span class="number">1e12</span>, yout, <span class="string">&#x27;b-&#x27;</span>); grid on;</span><br><span class="line">xlabel(<span class="string">&#x27;Time (ps)&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;V&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;Step Response&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">% write verilog-A</span></span><br><span class="line">writeva(hfit, <span class="string">&#x27;channel_32poles.va&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="z0">Z0</h2>
<blockquote>
<p>Remember, S-parameters <strong>don't mean much</strong> unless you
know the value of the <strong>reference impedance </strong>(it's
frequently called Z0).</p>
</blockquote>
<p>simulator will read sp file's <strong>Z0</strong> parameter</p>
<p><img src="/2023/09/29/scattering/image-20220430214052538.png"
alt="image-20220430214052538" /></p>
<p><img src="/2023/09/29/scattering/image-20220430214136970.png"
alt="image-20220430214136970" /></p>
<p><img src="/2023/09/29/scattering/image-20220430214419283.png"
alt="image-20220430214419283" /></p>
<blockquote>
<p>The default <strong>Z0</strong> exported by EMX is
<strong>50</strong></p>
</blockquote>
<h2 id="reference">reference</h2>
<p><a
target="_blank" rel="noopener" href="https://www.microwaves101.com/encyclopedias/s-parameters">microwaves101,
S-parameters
(https://www.microwaves101.com/encyclopedias/s-parameters)</a></p>
<p>Pupalaikis, P. (2020). <em>S-Parameters for Signal Integrity</em>.
Cambridge: Cambridge University Press. doi:10.1017/9781108784863</p>
<p>Coelho, C. P., Phillips, J. R., &amp; Silveira, L. M. (n.d.). Robust
rational function approximation algorithm for model generation.
Proceedings 1999 Design Automation Conference (Cat. No. 99CH36361).
doi:10.1109/dac.1999.781313</p>
<p>Cadence IEEE IMS 2023, Introducing the Spectre S-Parameter Quality
Checker and Rational Fit Model Generator [<a
target="_blank" rel="noopener" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O3w000009lplhEAA">https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O3w000009lplhEAA</a>]</p>
<p>The Complex Art Of Handling S-Parameters: The importance of
extraction and fitting to circuit simulation involving S-parameters [<a
target="_blank" rel="noopener" href="https://semiengineering.com/the-complex-art-of-handling-s-parameters/">https://semiengineering.com/the-complex-art-of-handling-s-parameters</a>]</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/09/24/mattool/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/24/mattool/" class="post-title-link" itemprop="url">Matlab toolbox</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-09-24 11:15:33" itemprop="dateCreated datePublished" datetime="2023-09-24T11:15:33+00:00">2023-09-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-09 02:41:04" itemprop="dateModified" datetime="2024-08-09T02:41:04+00:00">2024-08-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/dsp/" itemprop="url" rel="index"><span itemprop="name">dsp</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="impulse2pulse">impulse2pulse</h2>
<blockquote>
<p>serdes/impulse2pulse.m</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">P</span> = <span class="title">impulse2pulse</span><span class="params">(I, N, dt)</span></span></span><br><span class="line"></span><br><span class="line">impulseSize = <span class="built_in">size</span>(I);</span><br><span class="line"></span><br><span class="line"><span class="comment">%Convert to Pulse by shifting and adding</span></span><br><span class="line">P = <span class="built_in">zeros</span>(impulseSize,<span class="string">&#x27;like&#x27;</span>,I);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> indx=<span class="number">1</span>:N</span><br><span class="line">    P = P + <span class="built_in">circshift</span>(I, indx,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">P = P*dt;  <span class="comment">% `dt` is the width of area</span></span><br></pre></td></tr></table></figure>
<p><span class="math display">\[
P_k = \Delta t \times \sum_j I_j
\]</span></p>
<h2 id="impulse2step">impulse2step</h2>
<blockquote>
<p>serdes/impulse2step.m</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">S</span> = <span class="title">impulse2step</span><span class="params">(I,dt)</span></span></span><br><span class="line"></span><br><span class="line">[nr,nn] = <span class="built_in">size</span>(I);</span><br><span class="line"></span><br><span class="line">S = <span class="built_in">zeros</span>(nr,nn,<span class="string">&#x27;like&#x27;</span>,I);</span><br><span class="line"><span class="keyword">for</span> indx=<span class="number">2</span>:nr</span><br><span class="line">    S(indx,:) = S(indx<span class="number">-1</span>,:) + I(indx<span class="number">-1</span>,:)*dt;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p><span class="math display">\[
S_k = S_{k-1} + I_{k-1}\times \Delta t
\]</span></p>
<h2 id="step2impulse">step2impulse</h2>
<blockquote>
<p>serdes/step2impulse.m</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">I</span> = <span class="title">step2impulse</span><span class="params">(S,dt)</span></span></span><br><span class="line"></span><br><span class="line">I = diff(S)/dt;</span><br></pre></td></tr></table></figure>
<p><span class="math display">\[
I_k = \frac{S_{k+1}- S_{k}}{\Delta t}
\]</span></p>
<h2 id="pulse2impulse">pulse2impulse</h2>
<blockquote>
<p>serdes/pulse2impulse.m</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">I</span> = <span class="title">pulse2impulse</span><span class="params">(P, N, dt )</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">%   The algorithm computes the step response from the pulse response and</span></span><br><span class="line"><span class="comment">%   then take the derivative to get the impulse response. The derivative</span></span><br><span class="line"><span class="comment">%   calculation has zero delay and is reasonably accurate up to one half</span></span><br><span class="line"><span class="comment">%   the Nyquist rate but then diverges rapidly back to zero at the Nyquist</span></span><br><span class="line"><span class="comment">%   rate.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%Size input waveform</span></span><br><span class="line">[nr,nc] = <span class="built_in">size</span>(P);</span><br><span class="line"></span><br><span class="line"><span class="comment">%Remove DC component of waveform</span></span><br><span class="line">dcValues = P(<span class="number">1</span>,:);</span><br><span class="line">P = P - <span class="built_in">repmat</span>(dcValues,nr,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">% Convert to step response. No circshift here</span></span><br><span class="line">step = <span class="built_in">zeros</span>( nr, nc,<span class="string">&#x27;like&#x27;</span>,P );</span><br><span class="line"><span class="keyword">for</span> jj = <span class="number">1</span>:nc</span><br><span class="line">    <span class="keyword">for</span> indx = <span class="number">1</span>:N:nr</span><br><span class="line">        step(indx:nr,jj) = step(indx:nr,jj) + P(<span class="number">1</span>:nr-indx+<span class="number">1</span>,jj);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% Take the derivative</span></span><br><span class="line">a1 = <span class="number">0.59</span>;</span><br><span class="line">a3 = <span class="number">-0.03</span>;</span><br><span class="line">stepExt = <span class="built_in">zeros</span>( nr+<span class="number">6</span>, nc, <span class="string">&#x27;like&#x27;</span>,P );</span><br><span class="line">I = coder.nullcopy(P);</span><br><span class="line"><span class="keyword">for</span> jj = <span class="number">1</span>:nc    </span><br><span class="line">    stepExt(<span class="number">1</span>:<span class="number">3</span>,jj) = step(<span class="number">1</span>,jj);</span><br><span class="line">    stepExt(<span class="number">4</span>:nr+<span class="number">3</span>,jj) = step(:,jj);</span><br><span class="line">    stepExt(nr+<span class="number">4</span>:nr+<span class="number">6</span>,jj) = step(nr,jj);</span><br><span class="line">    I(:,jj) = (a1*(stepExt(<span class="number">5</span>:nr+<span class="number">4</span>,jj) - stepExt(<span class="number">3</span>:nr+<span class="number">2</span>,jj)) + ...</span><br><span class="line">        a3*(stepExt(<span class="number">7</span>:nr+<span class="number">6</span>,jj) - stepExt(<span class="number">1</span>:nr,jj))) / dt;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="pulse2wave">pulse2wave</h2>
<blockquote>
<p>serdes/pulse2wave.m</p>
<p>% The algorithms utilizes circular convolution to project the
pulse</p>
<p>% response onto the data pattern.</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">close all;</span><br><span class="line">clear all;</span><br><span class="line">clc;</span><br><span class="line"></span><br><span class="line">load(<span class="string">&#x27;PulseResponseReflective100ps.mat&#x27;</span>);</span><br><span class="line"></span><br><span class="line">P1 = pulse(:,<span class="number">1</span>) - pulse(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">P1 = P1(<span class="number">1</span>:<span class="number">2000</span>);</span><br><span class="line"><span class="comment">% P1 = P1 + 0.2;  % dc offset</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;Name&#x27;</span>,<span class="string">&#x27;pulse&#x27;</span>)</span><br><span class="line"><span class="built_in">plot</span>(P1)</span><br><span class="line">grid on;</span><br><span class="line"></span><br><span class="line">order = <span class="number">10</span>;</span><br><span class="line">data =<span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">512</span>);</span><br><span class="line">data(<span class="number">1</span>, <span class="number">8</span>) = <span class="number">1</span>;</span><br><span class="line">data(<span class="number">1</span>, <span class="number">256</span>) = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;Name&#x27;</span>,<span class="string">&#x27;input sequence&#x27;</span>);</span><br><span class="line">stem(data);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">W1 = pulse2wave(P1,data,SamplesPerSymbol); </span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;Name&#x27;</span>,<span class="string">&#x27;waveform&#x27;</span>)</span><br><span class="line"><span class="built_in">plot</span>(W1)</span><br><span class="line">grid on;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/2023/09/24/mattool/image-20230924130954034.png"
alt="image-20230924130954034" /></p>
<h2 id="pulse2pda">pulse2pda</h2>
<blockquote>
<p>B. K. Casper, M. Haycock and R. Mooney, "An accurate and efficient
analysis method for multi-Gb/s chip-to-chip signaling schemes," 2002
Symposium on VLSI Circuits. Digest of Technical Papers (Cat.
No.02CH37302), Honolulu, HI, USA, 2002, pp. 54-57, doi:
10.1109/VLSIC.2002.1015043.</p>
<p>Chang, Wei-Ju and Ruey-Beei Wu. “Eye diagram estimation and equalizer
design method for PAM4.” <em>2018 IEEE 22nd Workshop on Signal and Power
Integrity (SPI)</em> (2018): 1-4.</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/09/23/sbr-der/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/23/sbr-der/" class="post-title-link" itemprop="url">Time-Domain Channel Simulation</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-09-23 11:09:07" itemprop="dateCreated datePublished" datetime="2023-09-23T11:09:07+00:00">2023-09-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-09 02:41:04" itemprop="dateModified" datetime="2024-08-09T02:41:04+00:00">2024-08-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/dsp/" itemprop="url" rel="index"><span itemprop="name">dsp</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Three fast time-domain system simulation techniques:</p>
<ul>
<li><strong>single-bit response method</strong></li>
<li><strong>double-edge response method</strong></li>
<li><strong>multiple-edge response method</strong></li>
</ul>
<h2 id="single-bit-response-sbr-method">Single-Bit Response (SBR)
Method</h2>
<p>To avoid spurious glitches between consecutive ones, rising and
falling edge responses shall be <strong>symmetric</strong>. This is the
limitation of SBR method.</p>
<p>Let <span class="math inline">\(p(t)\)</span> be the SBR of the
channel, <span class="math inline">\(t_s\)</span> be the data sampling
phase, <span class="math inline">\(T\)</span> be the bit time, <span
class="math inline">\(N_c\)</span> is the number of UI in stored pulse
response and <span class="math inline">\(b_m\)</span> be the <span
class="math inline">\(m\)</span>th transmitted symbol. The voltage seen
by the receiver's data sampler at the <span
class="math inline">\(m\)</span>th data sample is determined by <span
class="math display">\[
y_m = \sum_{k=m-N_c+1}^{m}b_kp(t_s+(m-k)T)
\]</span> where <span class="math inline">\(b_k \in [0, 1]\)</span> and
<span class="math inline">\(p(t) \ge 0\)</span></p>
<p>We always prepend <span class="math inline">\(Nc-1\)</span> 0s in
random bit stream for consistency.</p>
<p><img src="/2023/09/23/sbr-der/image-20220429112902281.png"
alt="image-20220429112902281" /></p>
<p>For computation convenient, the pulse need to be positive. For
differential signal and amplitude <span
class="math inline">\(V_{peak}\)</span>, the peak to peak is <span
class="math inline">\(-V_{peak}\)</span> to <span
class="math inline">\(+V_{peak}\)</span>. After pulse added by <span
class="math inline">\(V_{peak}\)</span>, peak to peak is <span
class="math inline">\(0\)</span> to <span
class="math inline">\(+2V_{peak}\)</span>.</p>
<p><img src="/2023/09/23/sbr-der/image-20220429154336080.png"
alt="image-20220429154336080" /></p>
<p><img src="/2023/09/23/sbr-der/image-20220429154423247.png"
alt="image-20220429154423247" /></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line">yy_sum = <span class="built_in">zeros</span>(OSR*Ns, Ns);</span><br><span class="line"><span class="keyword">for</span> idxBit = <span class="number">1</span>:Ns</span><br><span class="line">    bs_split = <span class="built_in">zeros</span>(<span class="number">1</span>, Ns+Nc<span class="number">-1</span>);</span><br><span class="line">    bs_split(idxBit) = bs(idxBit);</span><br><span class="line">    yy = <span class="built_in">zeros</span>(OSR, Ns);</span><br><span class="line">    <span class="keyword">for</span> ii = Nc:Nc+Ns<span class="number">-1</span></span><br><span class="line">        bb = bs_split(ii:<span class="number">-1</span>:ii-Nc+<span class="number">1</span>);</span><br><span class="line">        yy(:,ii-Nc+<span class="number">1</span>) = sum(bb.*yrps, <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    yy_cont2 = <span class="built_in">reshape</span>(yy, [], <span class="number">1</span>);</span><br><span class="line">    h = <span class="built_in">plot</span>(yy_cont2);</span><br><span class="line">    h.Annotation.LegendInformation.IconDisplayStyle = <span class="string">&#x27;off&#x27;</span>;</span><br><span class="line">    yy_sum(:, idxBit) = yy_cont2;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">yy_sum = sum(yy_sum, <span class="number">2</span>);    <span class="comment">% merge</span></span><br><span class="line"><span class="built_in">plot</span>(yy_sum, <span class="string">&#x27;k--&#x27;</span>);</span><br><span class="line"><span class="built_in">plot</span>(yy_cont, <span class="string">&#x27;m-.&#x27;</span>);</span><br><span class="line">grid on;</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;sum&#x27;</span>, <span class="string">&#x27;syn&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;merge all single bit&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;mag&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;Time (\times Ts)&#x27;</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>The pulse response contain rising and falling edge. The <strong>1 bit
</strong> first rise from -1 to 1, then fall to -1; The <strong>0
bit</strong> just do nothing for synthesized waveform with the help of
falling edge of <strong>1 bit</strong>.</p>
<p>The DC shift help deal with continuous <strong>0 bits</strong>.</p>
</blockquote>
<p><img src="/2023/09/23/sbr-der/image-20220429174330324.png"
alt="image-20220429174330324" /></p>
<h3 id="another-sbr-example">another SBR example</h3>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">A = <span class="built_in">zeros</span>(<span class="number">10</span>,<span class="number">21</span>);</span><br><span class="line">n = [<span class="number">1</span>:<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">% post cursor</span></span><br><span class="line"><span class="keyword">for</span> m = <span class="number">1</span>:<span class="number">3</span></span><br><span class="line">    A(m, <span class="number">11</span>+n(m)) = <span class="number">0.5</span>;</span><br><span class="line">    A(m, <span class="number">11</span>-n(m)) = <span class="number">0.5</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% one</span></span><br><span class="line"><span class="keyword">for</span> m = <span class="number">4</span>:<span class="number">10</span></span><br><span class="line">    A(m, <span class="number">11</span>) = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% h0 or main cursor</span></span><br><span class="line">h0 = <span class="built_in">zeros</span>(<span class="number">1</span>, <span class="number">21</span>);</span><br><span class="line">h0(<span class="number">1</span>, <span class="number">1</span>) = <span class="number">0.5</span>;</span><br><span class="line">h0(<span class="number">1</span>, <span class="number">21</span>) = <span class="number">0.5</span>;</span><br><span class="line">out = h0;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> m = <span class="number">1</span>:<span class="number">10</span></span><br><span class="line">    out = conv(out, A(m, :), <span class="string">&quot;full&quot;</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">stem(out)</span><br></pre></td></tr></table></figure>
<p><img
src="/2023/09/23/sbr-der/143512636-0878e0fd-fe87-414c-9c73-52577eeb7593.jpg"
alt="143512636-0878e0fd-fe87-414c-9c73-52577eeb7593" /></p>
<p><img
src="/2023/09/23/sbr-der/143512677-ccefdf22-4e30-4e72-9220-bbe667671e79.png"
alt="143512677-ccefdf22-4e30-4e72-9220-bbe667671e79" /></p>
<h2 id="double-edge-response-der-method">Double-Edge Response (DER)
Method</h2>
<p>To handle the more general cases, with <strong>asymmetric rising and
falling edges</strong>, the system response can be constructed in terms
of <strong>edge transitions instead of bit responses</strong>.</p>
<p>The DER method decomposes the input data pattern, in terms of
<strong>rising and falling edge transitions</strong>. The system
response can be calculated by <em>superimposing the shifted versions of
the rising and falling edge responses</em> : <span
class="math display">\[
y_m = \sum_{k=m-N_c+1}^{m}(b_k-b_{k-1})s_k(t_s+(m-k)T) + y_{int}
\]</span> where</p>
<p><span class="math display">\[\begin{align}
s_i(t) &amp;= r(t) -V_{low} \quad \text{if} \: (b_i\gt b_{i-1}) \\
&amp;= V_{high}-f(t) \quad \text{otherwise}
\end{align}\]</span></p>
<p><span class="math inline">\(r(t)\)</span> and <span
class="math inline">\(f(t)\)</span> are the rising and falling edge
responses,respectively. <span class="math inline">\(V_{high}\)</span>
and <span class="math inline">\(V_{low}\)</span> are the steady state DC
levels, in response to a constant stream of ones and zeros,
respectively. <span class="math inline">\(y_{int}\)</span> is the
initial DC state (either <span class="math inline">\(V_{high}\)</span>
or <span class="math inline">\(V_{low}\)</span> ).</p>
<p>We always prepend <span class="math inline">\(Nc\)</span> 0s in
random bit stream for consistency.</p>
<p><img src="/2023/09/23/sbr-der/image-20220429191941805.png"
alt="image-20220429191941805" /></p>
<p><img src="/2023/09/23/sbr-der/der.drawio.svg" alt="der.drawio" /></p>
<p><img src="/2023/09/23/sbr-der/image-20220430010336977.png"
alt="image-20220430010336977" /></p>
<p><img src="/2023/09/23/sbr-der/image-20220430013715680.png"
alt="image-20220430013715680" /></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line">subplot(<span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">plot</span>(yrc);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>(yfc);</span><br><span class="line"><span class="built_in">hold</span> off;</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;rising&#x27;</span>, <span class="string">&#x27;falling&#x27;</span>)</span><br><span class="line">grid on;</span><br><span class="line">ylabel(<span class="string">&#x27;mag&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;Time (\times Ts)&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;step response&#x27;</span>);</span><br><span class="line"></span><br><span class="line">subplot(<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">stem(bs, <span class="string">&#x27;k&#x27;</span>); grid on;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">stem((idxPreRspStart:idxPreRspEnd), bs(idxPreRspStart:idxPreRspEnd), <span class="string">&quot;filled&quot;</span>, <span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">stem(idxPreRspStart, bs(idxPreRspStart), <span class="string">&#x27;go&#x27;</span>);</span><br><span class="line">stem(idxCurData, bs(idxCurData), <span class="string">&quot;filled&quot;</span>, <span class="string">&#x27;m&#x27;</span>);</span><br><span class="line">stem((idxPreRspStart:idxPreRspEnd)+<span class="number">0.5</span>, <span class="number">0.1</span>.*bd(idxPreRspStart:idxPreRspEnd), <span class="string">&#x27;bd-.&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> off;</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;Nc bits&#x27;</span>, <span class="string">&#x27;y_&#123;int&#125;&#x27;</span>, <span class="string">&#x27;Current bit&#x27;</span>, <span class="string">&#x27;Edge Transitions&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;mag&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;Time (\times UI)&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;input stream&#x27;</span>);</span><br><span class="line"></span><br><span class="line">subplot(<span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">yy_cont = <span class="built_in">reshape</span>(yy, [], <span class="number">1</span>);   <span class="comment">% continuous version</span></span><br><span class="line"><span class="built_in">plot</span>(yy_cont); grid on;</span><br><span class="line">title(<span class="string">&#x27;continuous yout&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;mag&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;Time (\times Ts)&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="keyword">for</span> idx = idxPreRspStart+<span class="number">1</span>-Nc:idxCurData+<span class="number">32</span>-Nc</span><br><span class="line">    ys = yy(:, idx);</span><br><span class="line">    tt = ((idx<span class="number">-1</span>)*OSR+<span class="number">1</span>:idx*OSR);</span><br><span class="line">    h = <span class="built_in">plot</span>(tt(:), ys(:), <span class="string">&#x27;LineWidth&#x27;</span>,<span class="number">3</span>);</span><br><span class="line">    h.Annotation.LegendInformation.IconDisplayStyle = <span class="string">&#x27;off&#x27;</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">plot</span>(yy_cont, <span class="string">&#x27;m--&#x27;</span>, <span class="string">&#x27;LineWidth&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span> off;</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;syn&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;mag&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;Time (\times Ts)&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;synthesize with step response&#x27;</span>);</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure>
<h2 id="reference">Reference</h2>
<p>Oh, Kyung Suk Dan, and Xing Chao Chuck Yuan. High-Speed Signaling:
Jitter Modeling, Analysis, and Budgeting. Prentice Hall, 2011.</p>
<p>Ren, Jihong and Kyung Suk Oh. “Multiple Edge Responses for Fast and
Accurate System Simulations.” <em>IEEE Transactions on Advanced
Packaging</em> 31 (2008): 741-748.</p>
<p>Shi, Rui. “Off-chip wire distribution and signal analysis.”
(2008).</p>
<p>X. Chu, W. Guo, J. Wang, F. Wu, Y. Luo and Y. Li, "Fast and Accurate
Estimation of Statistical Eye Diagram for Nonlinear High-Speed Links,"
in IEEE Transactions on Very Large Scale Integration (VLSI) Systems,
vol. 29, no. 7, pp. 1370-1378, July 2021, doi:
10.1109/TVLSI.2021.3082208.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/09/23/StatEye/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/23/StatEye/" class="post-title-link" itemprop="url">StatEye</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-09-23 11:03:56" itemprop="dateCreated datePublished" datetime="2023-09-23T11:03:56+00:00">2023-09-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-09 02:41:04" itemprop="dateModified" datetime="2024-08-09T02:41:04+00:00">2024-08-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/dsp/" itemprop="url" rel="index"><span itemprop="name">dsp</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="matlab---pulse2stateye">Matlab - <code>pulse2stateye</code></h2>
<blockquote>
<p>Due to this function only output PDF of eye, postprocessing is needed
which cumulative sum PDF.</p>
</blockquote>
<h3 id="probability-density-functionpdf-plot">Probability Density
Function(PDF) plot</h3>
<p><img src="/2023/09/23/StatEye/PDF.jpg" alt="PDF" /></p>
<h3 id="bit-error-rateber-plot">Bit Error Rate(BER) plot</h3>
<p><img src="/2023/09/23/StatEye/BER.jpg" alt="BER" /></p>
<h3 id="pulse-response">pulse response</h3>
<p><img src="/2023/09/23/StatEye/image-20220502134522549.png"
alt="image-20220502134522549" /></p>
<blockquote>
<p>DC shift don't affect <code>pulse2stateye</code> function
normally</p>
<p>Both pulse <code>[0 0 0 0 .. 0 1 0 0 0 0 0 ...]</code> and
<code>[1 1 1 1 ... 1 0 1 1 1 1 ...]</code> can be fed into</p>
<p><code>pulse2stateye</code> function</p>
<p><strong>CAUTION</strong>: the <code>0</code> don't mean common
voltage but bit <code>0</code> , which is <code>-Vpeak</code> in
differential link</p>
</blockquote>
<h3 id="postprocessing-function">postprocessing function</h3>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% REF: https://www.mathworks.com/help/serdes/ref/pulse2stateye.html</span></span><br><span class="line">load(<span class="string">&#x27;PulseResponseReflective100ps.mat&#x27;</span>);</span><br><span class="line">modulation = <span class="number">2</span>;</span><br><span class="line">pulsewave = <span class="built_in">zeros</span>(<span class="built_in">size</span>(pulse, <span class="number">1</span>), <span class="number">1</span>);</span><br><span class="line">pulsewave = pulse(:, <span class="number">1</span>);</span><br><span class="line">pulsewave(:,<span class="number">1</span>) = pulsewave - pulsewave(<span class="number">1</span>);  <span class="comment">% DC shift, although `pulse2stateye` shift internally</span></span><br><span class="line"></span><br><span class="line">[stateye,vh,th] = pulse2stateye(pulsewave,SamplesPerSymbol,modulation);</span><br><span class="line"><span class="comment">%stateye(1:200, 1:200) = 10000;</span></span><br><span class="line">cmap = serdes.utilities.SignalIntegrityColorMap;</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>);</span><br><span class="line">imagesc(th*SymbolTime*<span class="number">1e12</span>,vh,stateye)</span><br><span class="line">colormap(cmap)</span><br><span class="line">colorbar</span><br><span class="line">axis(<span class="string">&#x27;xy&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;ps&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;V&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;Statistical Eye PDF&#x27;</span>)</span><br><span class="line"></span><br><span class="line">[ysize, xsize] = <span class="built_in">size</span>(stateye);</span><br><span class="line">ymid = <span class="built_in">floor</span>((ysize+<span class="number">1</span>)/<span class="number">2</span>);</span><br><span class="line">upperEyePDF = stateye(ymid:<span class="keyword">end</span>,:);</span><br><span class="line">lowerEyePDF = stateye(ymid:<span class="number">-1</span>:<span class="number">1</span>,:); <span class="comment">% upside down</span></span><br><span class="line"></span><br><span class="line">upperEyeCDF = cumsum(upperEyePDF, <span class="number">1</span>);</span><br><span class="line">lowerEyeCDF = cumsum(lowerEyePDF, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">berlist = [<span class="number">1e-12</span>, <span class="number">1e-6</span>, <span class="number">0.01</span>];</span><br><span class="line">lenBer = <span class="built_in">length</span>(berlist);</span><br><span class="line">upperBERIdx = <span class="built_in">zeros</span>(lenBer, xsize);</span><br><span class="line">lowerBERIdx = <span class="built_in">zeros</span>(lenBer, xsize);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:lenBer</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:xsize</span><br><span class="line">        upperBERIdx(<span class="built_in">i</span>, <span class="built_in">j</span>) = <span class="built_in">find</span>(upperEyeCDF(:, <span class="built_in">j</span>) &gt;= berlist(<span class="built_in">i</span>), <span class="number">1</span>);</span><br><span class="line">        lowerBERIdx(<span class="built_in">i</span>, <span class="built_in">j</span>) = <span class="built_in">find</span>(lowerEyeCDF(:, <span class="built_in">j</span>) &gt;= berlist(<span class="built_in">i</span>), <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% shift idx to algin original stateye</span></span><br><span class="line">upperBERIdx = ymid - <span class="number">1</span> + upperBERIdx;</span><br><span class="line">lowerBERIdx = ymid + <span class="number">1</span> - lowerBERIdx;</span><br><span class="line"></span><br><span class="line">upperBERVal = vh(upperBERIdx);</span><br><span class="line">lowerBERVal = vh(lowerBERIdx);</span><br><span class="line"></span><br><span class="line">tticks = th*SymbolTime*<span class="number">1e12</span>;</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>);</span><br><span class="line">lgd = cell(lenBer*<span class="number">2</span>,<span class="number">1</span>) ;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:lenBer<span class="comment">% REF: https://www.mathworks.com/help/serdes/ref/pulse2stateye.html</span></span><br><span class="line">load(<span class="string">&#x27;PulseResponseReflective100ps.mat&#x27;</span>);</span><br><span class="line">modulation = <span class="number">2</span>;</span><br><span class="line">pulsewave = <span class="built_in">zeros</span>(<span class="built_in">size</span>(pulse, <span class="number">1</span>), <span class="number">1</span>);</span><br><span class="line">pulsewave = pulse(:, <span class="number">1</span>);    <span class="comment">% remove crosstalk pulse responses</span></span><br><span class="line"></span><br><span class="line">[stateye,vh,th] = pulse2stateye(pulsewave,SamplesPerSymbol,modulation);</span><br><span class="line">cmap = serdes.utilities.SignalIntegrityColorMap;</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>);</span><br><span class="line">imagesc(th*SymbolTime*<span class="number">1e12</span>,vh,stateye)</span><br><span class="line">colormap(cmap)</span><br><span class="line">colorbar</span><br><span class="line">axis(<span class="string">&#x27;xy&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;ps&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;V&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;Statistical Eye PDF&#x27;</span>)</span><br><span class="line"></span><br><span class="line">[ysize, xsize] = <span class="built_in">size</span>(stateye);</span><br><span class="line">ymid = <span class="built_in">floor</span>((ysize+<span class="number">1</span>)/<span class="number">2</span>);</span><br><span class="line">upperEyePDF = stateye(ymid:<span class="keyword">end</span>,:);</span><br><span class="line">lowerEyePDF = stateye(ymid:<span class="number">-1</span>:<span class="number">1</span>,:); <span class="comment">% upside down</span></span><br><span class="line"></span><br><span class="line">upperEyeCDF = cumsum(upperEyePDF, <span class="number">1</span>);</span><br><span class="line">lowerEyeCDF = cumsum(lowerEyePDF, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">berlist = [<span class="number">1e-12</span>, <span class="number">1e-6</span>, <span class="number">0.01</span>];</span><br><span class="line">lenBer = <span class="built_in">length</span>(berlist);</span><br><span class="line">upperBERIdx = <span class="built_in">zeros</span>(lenBer, xsize);</span><br><span class="line">lowerBERIdx = <span class="built_in">zeros</span>(lenBer, xsize);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:lenBer</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:xsize</span><br><span class="line">        upperBERIdx(<span class="built_in">i</span>, <span class="built_in">j</span>) = <span class="built_in">find</span>(upperEyeCDF(:, <span class="built_in">j</span>) &gt;= berlist(<span class="built_in">i</span>), <span class="number">1</span>);</span><br><span class="line">        lowerBERIdx(<span class="built_in">i</span>, <span class="built_in">j</span>) = <span class="built_in">find</span>(lowerEyeCDF(:, <span class="built_in">j</span>) &gt;= berlist(<span class="built_in">i</span>), <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% shift idx to algin original stateye</span></span><br><span class="line">upperBERIdx = ymid - <span class="number">1</span> + upperBERIdx;</span><br><span class="line">lowerBERIdx = ymid + <span class="number">1</span> - lowerBERIdx;</span><br><span class="line"></span><br><span class="line">upperBERVal = vh(upperBERIdx);</span><br><span class="line">lowerBERVal = vh(lowerBERIdx);</span><br><span class="line"></span><br><span class="line">tticks = th*SymbolTime*<span class="number">1e12</span>;</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>);</span><br><span class="line">lgd = cell(lenBer*<span class="number">2</span>,<span class="number">1</span>) ;</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:lenBer</span><br><span class="line">    <span class="built_in">plot</span>(tticks, upperBERVal(<span class="built_in">i</span>, :), <span class="string">&#x27;Color&#x27;</span>, cmap(<span class="built_in">i</span>*<span class="number">15</span>, :));</span><br><span class="line">    lgd&#123;<span class="built_in">i</span>*<span class="number">2</span><span class="number">-1</span>&#125; = strcat(<span class="string">&#x27;BER=&#x27;</span>,num2str(berlist(<span class="built_in">i</span>)));</span><br><span class="line">    <span class="built_in">plot</span>(tticks, lowerBERVal(<span class="built_in">i</span>, :), <span class="string">&#x27;Color&#x27;</span>, cmap(<span class="built_in">i</span>*<span class="number">15</span>, :));</span><br><span class="line">    lgd&#123;<span class="built_in">i</span>*<span class="number">2</span>&#125; = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">hold</span> off;</span><br><span class="line"><span class="built_in">legend</span>(lgd)</span><br><span class="line">axis(<span class="string">&#x27;xy&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;ps&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;V&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;Statistical Eye BER&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">3</span>)</span><br><span class="line">tt = [<span class="number">0</span>:<span class="built_in">size</span>(pulsewave, <span class="number">1</span>)<span class="number">-1</span>]*dt;</span><br><span class="line"><span class="built_in">plot</span>(tt*<span class="number">1e9</span>, pulsewave, <span class="string">&#x27;k&#x27;</span>, tt*<span class="number">1e9</span>, pulsewave-pulsewave(<span class="number">1</span>), <span class="string">&#x27;r--&#x27;</span>);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;original&#x27;</span>, <span class="string">&#x27;dc shift&#x27;</span>);</span><br><span class="line">xlim([<span class="number">0</span> <span class="number">10</span>]);</span><br><span class="line">ylim([<span class="number">-0.65</span> <span class="number">0.65</span>])</span><br><span class="line">xlabel(<span class="string">&#x27;Time (ns)&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;voltage (V)&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;pulse response&#x27;</span>);</span><br><span class="line">grid on;</span><br><span class="line">    <span class="built_in">plot</span>(tticks, upperBERVal(<span class="built_in">i</span>, :), <span class="string">&#x27;Color&#x27;</span>, cmap(<span class="built_in">i</span>*<span class="number">15</span>, :));</span><br><span class="line">    lgd&#123;<span class="built_in">i</span>*<span class="number">2</span><span class="number">-1</span>&#125; = strcat(<span class="string">&#x27;BER=&#x27;</span>,num2str(berlist(<span class="built_in">i</span>)));</span><br><span class="line">    <span class="built_in">plot</span>(tticks, lowerBERVal(<span class="built_in">i</span>, :), <span class="string">&#x27;Color&#x27;</span>, cmap(<span class="built_in">i</span>*<span class="number">15</span>, :));</span><br><span class="line">    lgd&#123;<span class="built_in">i</span>*<span class="number">2</span>&#125; = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">hold</span> off;</span><br><span class="line"><span class="built_in">legend</span>(lgd)</span><br><span class="line">axis(<span class="string">&#x27;xy&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;ps&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;V&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;Statistical Eye BER&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">3</span>)</span><br><span class="line">tt = [<span class="number">0</span>:<span class="built_in">size</span>(pulsewave, <span class="number">1</span>)<span class="number">-1</span>]*dt;</span><br><span class="line"><span class="built_in">plot</span>(tt*<span class="number">1e9</span>, pulsewave);</span><br><span class="line">xlabel(<span class="string">&#x27;Time (ns)&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;voltage (V)&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;pulse response&#x27;</span>);</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure>
<h3 id="pulse-without-isi">pulse without ISI</h3>
<blockquote>
<p>Vp2p = 1V</p>
</blockquote>
<p><img src="/2023/09/23/StatEye/image-20220502135551321.png"
alt="image-20220502135551321" /></p>
<p><img src="/2023/09/23/StatEye/image-20220502135535943.png"
alt="image-20220502135535943" /></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">modulation = <span class="number">2</span>;</span><br><span class="line">SamplesPerSymbol = <span class="number">32</span>;</span><br><span class="line">pulsewave = <span class="built_in">zeros</span>(SamplesPerSymbol*<span class="number">16</span>, <span class="number">1</span>);</span><br><span class="line">pulsewave(<span class="number">3</span>*SamplesPerSymbol:<span class="number">4</span>*SamplesPerSymbol<span class="number">-1</span>, <span class="number">1</span>) = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">[stateye,vh,th] = pulse2stateye(pulsewave,SamplesPerSymbol,modulation);</span><br><span class="line">cmap = serdes.utilities.SignalIntegrityColorMap;</span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>);</span><br><span class="line">imagesc(th*SymbolTime*<span class="number">1e12</span>,vh,stateye)</span><br><span class="line">colormap(cmap)</span><br><span class="line">colorbar</span><br><span class="line">axis(<span class="string">&#x27;xy&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;ps&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;V&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;Statistical Eye PDF&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>)</span><br><span class="line">tt = [<span class="number">0</span>:<span class="built_in">size</span>(pulsewave, <span class="number">1</span>)<span class="number">-1</span>]*dt;</span><br><span class="line"><span class="built_in">plot</span>(tt*<span class="number">1e9</span>, pulsewave, <span class="string">&#x27;k&#x27;</span>, tt*<span class="number">1e9</span>, pulsewave-pulsewave(<span class="number">1</span>), <span class="string">&#x27;r--&#x27;</span>);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;original&#x27;</span>, <span class="string">&#x27;dc shift&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;Time (ns)&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;voltage (V)&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;pulse response&#x27;</span>);</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure>
<h2 id="hspice---snpssimade">HSPICE - <code>snpsSimADE</code></h2>
<blockquote>
<p>use StatEye Analysis in HSPICE</p>
</blockquote>
<h3 id="create-netlist-with-hspiced-in-virtuoso">create netlist with
hspiceD in Virtuoso</h3>
<p><img src="/2023/09/23/StatEye/image-20220708011315422.png"
alt="image-20220708011315422" /></p>
<h3 id="modify-netlist">modify netlist</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">P1 vi 0  port=1  Z0=0 LFSR (1 0 0 100p 100p 1G 1 [5,2])</span><br><span class="line">P2 vo 0  port=2  Z0=1G</span><br><span class="line">.stateye T=1ns trf=100p incident_port=1 probe_port=2</span><br><span class="line">.probe stateye eye(2) berC(2) eyeBW(2)</span><br><span class="line">.print stateye eye(2) berC(2) eyeBW(2)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note both<code>Z0=0</code> and <code>Z0=1G</code> are used to remove
port's effect, which is used as ideal voltage source and voltage
monitor</p>
</blockquote>
<p><img src="/2023/09/23/StatEye/image-20220708012542135.png"
alt="image-20220708012542135" /></p>
<blockquote>
<p>The <code>.probe stateye</code> command generates
<code>netlist.stet#</code> and <code>netlist.stev#</code> for following
purposes:</p>
<ul>
<li>netlist.stet#: eye(t,v), eyeBW(t,v), eyeV(t), ber(t,v) and
bathtubV(t)</li>
<li>netlist.stet#: eye(t,v), eyeBW(t,v), eyeV(t), ber(t,v) and
bathtubV(t)</li>
</ul>
</blockquote>
<h3 id="setup">setup</h3>
<h4 id="cdsinit">.cdsinit</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">load( strcat( getShellEnvVar(&quot;HSPICE_HOME&quot;) &quot;/hspice/interface/snpsSimADE.ile&quot; ))</span><br></pre></td></tr></table></figure>
<h4 id="environment-variable">environment variable</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export CDS_LOAD_ENV=CSF</span><br><span class="line">export SNPSSIMADE_LOAD_MODE=HSPICE</span><br></pre></td></tr></table></figure>
<h2 id="references">references</h2>
<p>Sanders, Anthony, Michael Resso and John D'Ambrosia. “Channel
Compliance Testing Utilizing Novel Statistical Eye Methodology.”
(2004).</p>
<p>X. Chu, W. Guo, J. Wang, F. Wu, Y. Luo and Y. Li, "Fast and Accurate
Estimation of Statistical Eye Diagram for Nonlinear High-Speed Links,"
in IEEE Transactions on Very Large Scale Integration (VLSI) Systems,
vol. 29, no. 7, pp. 1370-1378, July 2021, doi:
10.1109/TVLSI.2021.3082208.</p>
<p>HSPICE® User Guide: Signal Integrity Modeling and Analysis, Version
Q-2020.03, March 2020</p>
<p>IA Title: Common Electrical I/O (CEI) - Electrical and Jitter
Interoperability agreements for 6G+ bps, 11G+ bps, 25G+ bps I/O and 56G+
bps IA # OIF-CEI-04.0 December 29, 2017 [<a
target="_blank" rel="noopener" href="https://www.oiforum.com/wp-content/uploads/2019/01/OIF-CEI-04.0.pdf">pdf</a>]</p>
<p>Chris Li Ph.D. student at the University of Toronto [<a
target="_blank" rel="noopener" href="https://github.com/ChrisZonghaoLi/pystateye">pystateye
repo</a>]</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Guo</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.1/dist/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.3.0/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>






  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
