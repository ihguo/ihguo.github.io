<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.0/css/all.min.css" integrity="sha256-yIDrPSXHZdOZhAqiBP7CKzIwMQmRCJ8UeB8Jo17YC4o=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="KNOW-HOW">
<meta property="og:url" content="http://example.com/page/6/index.html">
<meta property="og:site_name" content="KNOW-HOW">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Guo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/6/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/6/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>KNOW-HOW</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">KNOW-HOW</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Guo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">176</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/raytroop" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;raytroop" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:raytroop@gmail.com" title="E-Mail → mailto:raytroop@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/04/05/clockgating/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/05/clockgating/" class="post-title-link" itemprop="url">Clock Gating</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-04-05 22:14:09" itemprop="dateCreated datePublished" datetime="2023-04-05T22:14:09+00:00">2023-04-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-29 13:23:05" itemprop="dateModified" datetime="2024-01-29T13:23:05+00:00">2024-01-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/digital/" itemprop="url" rel="index"><span itemprop="name">digital</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><strong>Clock Gating</strong> is defined as: "Clock gating is a
technique/methodology to turn off the clock to certain parts of the
digital design when not needed".</p>
<h3 id="clock-gating-overview">Clock Gating Overview</h3>
<h4 id="and-gate-based-clock-gating">AND gate-based clock gating</h4>
<p>In <em>simplest form</em> a clock gating can be achieved by using an
<em>AND gate</em> as shown in picture below</p>
<p><img src="/2023/04/05/clockgating/AND-gate-based-clock-gating.png"
alt="clock gating" /></p>
<p>However, this simplest form of clock gating technique has some
problem of generating <strong>glitches</strong> in the clock provide to
the FF, which are not desirable.</p>
<p><img src="/2023/04/05/clockgating/Glitches-in-enable-gated-clock.png"
alt="img" /></p>
<blockquote>
<p>Glitches in enable/gated clock</p>
</blockquote>
<h4 id="latch-based-clock-gating">Latch based clock gating</h4>
<p>These glitches can be removed by introducing a negative edge
triggered FF (assuming downstream FFs are positive edge) or low-level
sensitive latch at the output of the clock enable signal.</p>
<p><img src="/2023/04/05/clockgating/Latch-based-clock-gating.png"
alt="clock gating" /></p>
<p>This will make sure that any glitch in the clock enable signal will
not be visible to the gated clock output. The Latch output will only be
updated during the negative clock cycle and thus input to AND gate will
be stable high.</p>
<p><img src="/2023/04/05/clockgating/Glitch-Free-Gated-Clock.png"
alt="clock gating" /></p>
<blockquote>
<p>Glitch Free Gated Clock</p>
</blockquote>
<h3 id="reference">reference</h3>
<p>The Ultimate Guide to Clock Gating <a
target="_blank" rel="noopener" href="https://anysilicon.com/the-ultimate-guide-to-clock-gating/">https://anysilicon.com/the-ultimate-guide-to-clock-gating/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/04/04/dspf-split-pins-emir/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/04/dspf-split-pins-emir/" class="post-title-link" itemprop="url">split pins in dspf_emir</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-04-04 23:54:26" itemprop="dateCreated datePublished" datetime="2023-04-04T23:54:26+00:00">2023-04-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-29 13:23:05" itemprop="dateModified" datetime="2024-01-29T13:23:05+00:00">2024-01-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/cad/" itemprop="url" rel="index"><span itemprop="name">cad</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="dspf-extract-using-starrc">dspf extract using starrc</h3>
<p>multiple label and rectangle in vssa net</p>
<p><img
src="/2023/04/04/dspf-split-pins-emir/image-20230405003705354.png"
alt="image-20230405003705354" /></p>
<ul>
<li><p>general dspf</p>
<p><code>SHORT_PINS: YES</code></p>
<p><img
src="/2023/04/04/dspf-split-pins-emir/image-20230405002824842.png"
alt="image-20230405002824842" /></p>
<blockquote>
<p>other pin are short together</p>
</blockquote></li>
<li><p>dspf for emir analysis</p></li>
</ul>
<p><img
src="/2023/04/04/dspf-split-pins-emir/image-20230405000013461.png"
alt="image-20230405000013461" /></p>
<p><img
src="/2023/04/04/dspf-split-pins-emir/image-20230405001944418.png"
alt="image-20230405001944418" /></p>
<p><img
src="/2023/04/04/dspf-split-pins-emir/image-20230405230611522.png"
alt="image-20230405230611522" /></p>
<blockquote>
<p>It seems that dspf_emir <strong>don't</strong> contain the
<em>rectangle pin</em> information.</p>
<p>only <strong>label</strong> is necessary</p>
</blockquote>
<table style="width:100%;">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 26%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="header">
<th>setup</th>
<th></th>
<th></th>
<th>spectre result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>netlist type</strong></td>
<td><strong>dspf option</strong></td>
<td><strong>emir analysis</strong></td>
<td></td>
</tr>
<tr class="even">
<td>dspf</td>
<td>/</td>
<td>disable</td>
<td>✓</td>
</tr>
<tr class="odd">
<td>dspf_emir</td>
<td>/</td>
<td>disable</td>
<td>✗</td>
</tr>
<tr class="even">
<td>dspf_emir</td>
<td>=shortPins=”yes”</td>
<td>disable</td>
<td>✓</td>
</tr>
<tr class="odd">
<td>dspf_emir</td>
<td>=shortPins=”no”</td>
<td>disable</td>
<td>✗</td>
</tr>
<tr class="even">
<td>dspf_emir</td>
<td>/</td>
<td>enable</td>
<td>✓</td>
</tr>
<tr class="odd">
<td>dspf_emir</td>
<td>=shortPins=”yes”</td>
<td>enable</td>
<td>✓</td>
</tr>
<tr class="even">
<td>dspf_emir</td>
<td>=shortPins=”no”</td>
<td>enable</td>
<td>✓</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>shortPins=”yes”</strong> is preferred default option for
dspf_emir, which has <strong>split pins</strong></p>
</blockquote>
<p><img
src="/2023/04/04/dspf-split-pins-emir/image-20230405005151550.png"
alt="image-20230405005151550" /></p>
<h3 id="dspf-syntax">DSPF Syntax</h3>
<ul>
<li><p><pin_def>::=*<strong>|P <pin_element>?</strong> <pin_element>
describes pins in the net. Multiple pin descriptions can be listed in
one line.</p></li>
<li><p><pin_element>::=(<pinName> <pinType> <pinCap> {<coord>}?)
<pinName> represents the name of the pin. <pinType> represents the type
of the pin. It can be any of the following: I (Input), O (Output),</p>
<p>​ B (Bidirectional), X (don’t care), S (Switch), and J (Jumper). ​
<pinCap> represents the capacitance value associated with the pin. ​
<coord> is optional. It represents the location of the pin. Multiple pin
locations are allowed</p></li>
</ul>
<h4 id="split-pins">split pins</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*|P (avss_1 O 0 207.7555 59.9170)</span><br><span class="line">*|P (avss_10 O 0 181.1610 151.1130)</span><br><span class="line">*|P (avss_11 O 0 186.6330 151.1130)</span><br><span class="line">*|P (avss_12 O 0 192.1050 151.1130)</span><br><span class="line">*|P (avss_13 O 0 197.5770 151.1130)</span><br></pre></td></tr></table></figure>
<h3 id="reference">reference</h3>
<p>Article (20467964) Title: Difference in result on running Spectre APS
with EMIR and without EMIR analysis URL: <a
target="_blank" rel="noopener" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O0V00000679GRUAY">https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O0V00000679GRUAY</a></p>
<p>StarRC User Guide and Command Reference Version O-2018.06, June
2018</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/03/29/Dynamic-specification-converter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/03/29/Dynamic-specification-converter/" class="post-title-link" itemprop="url">Dynamic Specification of Data Converter</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-03-29 23:54:37" itemprop="dateCreated datePublished" datetime="2023-03-29T23:54:37+00:00">2023-03-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-29 13:23:05" itemprop="dateModified" datetime="2024-01-29T13:23:05+00:00">2024-01-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="term-abbreviation">Term Abbreviation</h2>
<p>SNR: signal-to-noise ratio</p>
<p>SINAD: signal to noise and distortion</p>
<p>ENOB: effective number of bits</p>
<p>THD: total harmonic distortion</p>
<p>SFDR: spurious-free dynamic range</p>
<p>TTIMD: two-tone intermodulation distortion</p>
<p>MTIMD: multi-tone intermodulation distortion</p>
<p>VSWR: voltage standing-wave ratio</p>
<h2 id="coherent-sampling">Coherent Sampling</h2>
<p>To avoid <strong>spectral leakage</strong> completely, the method of
<strong>coherent sampling</strong> is recommended. Coherent sampling
requires that the input- and clock-frequency generators are
<strong>phase locked</strong>, and that the input frequency be chosen
based on the following relationship: <span class="math display">\[
\frac{f_{\text{in}}}{f_{\text{s}}}=\frac{M_C}{N_R}
\]</span></p>
<p>where:</p>
<ul>
<li><span class="math inline">\(f_{\text{in}}\)</span> = the desired
input frequency</li>
<li><span class="math inline">\(f_s\)</span> = the clock frequency of
the data converter under test</li>
<li><span class="math inline">\(M_C\)</span> = the number of cycles in
the data window (to make all samples unique, choose odd or prime
numbers)</li>
<li><span class="math inline">\(N_R\)</span> = the data record length
(for an 8192-point FFT, the data record is 8192s long)</li>
</ul>
<p><span class="math display">\[\begin{align}
f_{\text{in}} &amp;=\frac{f_s}{N_R}\cdot M_C \\
&amp;= f_{\text{res}}\cdot M_C
\end{align}\]</span></p>
<h3 id="irreducible-ratio">irreducible ratio</h3>
<p>An <strong>irreducible ratio</strong> ensures identical code
sequences not to be repeated multiple times. Unnecessary repetition of
the same code is not desirable as it increases ADC test time.</p>
<blockquote>
<p>Given that <span class="math inline">\(\frac{M_C}{N_R}\)</span> is
irreducible, and <span class="math inline">\(N_R\)</span> is a power of
2, an <strong>odd number</strong> for <span
class="math inline">\(M_C\)</span> will always produce an
<strong>irreducible ratio</strong></p>
</blockquote>
<p>Assuming there is a common factor <span
class="math inline">\(k\)</span> between <span
class="math inline">\(M_C\)</span> and <span
class="math inline">\(N_R\)</span>, i.e. <span
class="math inline">\(\frac{M_C}{N_R}=\frac{k M_C&#39;}{k
N_R&#39;}\)</span></p>
<p>The samples (<span class="math inline">\(n\in[1, N_R]\)</span>)</p>
<p><span class="math display">\[\begin{align}
y[n] &amp;= \sin\left( \omega_{\text{in}} \cdot t_n \right) \\
&amp;= \sin\left( \omega_{\text{in}} \cdot n\frac{1}{f_s} \right)  \\
&amp; = \sin\left( \omega_{\text{in}} \cdot
n\frac{1}{f_{\text{in}}}\frac{M_C}{N_R} \right) \\
&amp; = \sin\left( 2\pi n\frac{M_C}{N_R} \right)
\end{align}\]</span></p>
<p>Then</p>
<p><span class="math display">\[\begin{align}
y[n+N_R&#39;] &amp;= \sin\left( 2\pi (n+N_R&#39;)\frac{M_C}{N_R} \right)
\\
&amp; = \sin\left( 2\pi n \frac{M_C}{N_R} + 2\pi
N_R&#39;\frac{M_C}{N_R}\right) \\
&amp; = \sin\left( 2\pi n \frac{M_C}{N_R} + 2\pi
N_R&#39;\frac{kM_C&#39;}{kN_R&#39;} \right) \\
&amp; = \sin\left( 2\pi n \frac{M_C}{N_R} + 2\pi M_C&#39; \right) \\
&amp; = \sin\left( 2\pi n \frac{M_C}{N_R}\right)
\end{align}\]</span></p>
<p>So, the samples is repeated <span class="math inline">\(y[n] =
y[n+N_R&#39;]\)</span>. Usually, no additional information is gained by
repeating with the same sampling points.</p>
<h3 id="general-simulation-setup">General Simulation Setup</h3>
<p><span class="math display">\[
N \cdot \frac{1}{F_s} = M \cdot \frac{1}{F_{in}}
\]</span> where <span class="math inline">\(F_s\)</span> is sample
frequency, <span class="math inline">\(F_{in}\)</span> input signal
frequency.</p>
<p>And <span class="math inline">\(N\)</span> often is 256, 512; M is 3,
5, 7, 11.</p>
<h2 id="snr">SNR</h2>
<p><img src="/2023/03/29/Dynamic-specification-converter/VXpqU.png"
alt="VXpqU" /></p>
<p><img src="/2023/03/29/Dynamic-specification-converter/gRE1L.png"
alt="gRE1L" /></p>
<h2 id="reference">reference</h2>
<p>everynanocounts. Memos on FFT With Windowing. URL: <a
target="_blank" rel="noopener" href="https://everynanocounts.com/2018/02/01/memos-on-fft-with-windowing/">https://everynanocounts.com/2018/02/01/memos-on-fft-with-windowing/</a></p>
<p>How to choose FFT depth for ADC performance analysis (SINAD, ENOB).
URL:<a
target="_blank" rel="noopener" href="https://dsp.stackexchange.com/a/38201">https://dsp.stackexchange.com/a/38201</a></p>
<p>Computation of Effective Number of Bits, Signal to Noise Ratio, &amp;
Signal to Noise &amp; Distortion Ratio Using FFT. URL:<a
target="_blank" rel="noopener" href="https://cdn.teledynelecroy.com/files/appnotes/computation_of_effective_no_bits.pdf">https://cdn.teledynelecroy.com/files/appnotes/computation_of_effective_no_bits.pdf</a></p>
<p>Kester, Walt. (2009). Understand SINAD, ENOB, SNR, THD, THD + N, and
SFDR so You Don't Get Lost in the Noise Floor. URL:<a
target="_blank" rel="noopener" href="https://www.analog.com/media/en/training-seminars/tutorials/MT-003.pdf">https://www.analog.com/media/en/training-seminars/tutorials/MT-003.pdf</a></p>
<p>T. C. Hofner: Dynamic ADC testing part I. Defining and testing
dynamic ADC parameters, Microwaves &amp; RF, 2000, vol. 39, no. 11, pp.
75-84,162</p>
<p>T. C. Hofner: Dynamic ADC testing part 2. Measuring and evaluating
dynamic line parameters, Microwaves &amp; RF, 2000, vol. 39, no. 13, pp.
78-94</p>
<p>AN9675: A Tutorial in Coherent and Windowed Sampling with A/D
Converters <a
target="_blank" rel="noopener" href="https://www.renesas.com/us/en/document/apn/an9675-tutorial-coherent-and-windowed-sampling-ad-converters">https://www.renesas.com/us/en/document/apn/an9675-tutorial-coherent-and-windowed-sampling-ad-converters</a></p>
<p>APPLICATION NOTE 3190: Coherent Sampling Calculator (CSC) <a
target="_blank" rel="noopener" href="https://www.stg-maximintegrated.com/en/design/technical-documents/app-notes/3/3190.html">https://www.stg-maximintegrated.com/en/design/technical-documents/app-notes/3/3190.html</a></p>
<p>Coherent Sampling (Very Brief and Simple) <a
target="_blank" rel="noopener" href="https://www.dsprelated.com/thread/469/coherent-sampling-very-brief-and-simple">https://www.dsprelated.com/thread/469/coherent-sampling-very-brief-and-simple</a></p>
<p>Signal Chain Basics #160: Making sense of coherent and noncoherent
sampling in data-converter testing <a
target="_blank" rel="noopener" href="https://www.planetanalog.com/signal-chain-basics-160-making-sense-of-coherent-and-noncoherent-sampling-in-data-converter-testing/">https://www.planetanalog.com/signal-chain-basics-160-making-sense-of-coherent-and-noncoherent-sampling-in-data-converter-testing/</a></p>
<p>Signal Chain Basics #104: Understanding noise in ADCs <a
target="_blank" rel="noopener" href="https://www.planetanalog.com/signal-chain-basics-part-104-understanding-noise-in-adcs/">https://www.planetanalog.com/signal-chain-basics-part-104-understanding-noise-in-adcs/</a></p>
<p>Signal Chain Basics #101: ENOB Degradation Analysis Over Frequency
Due to Jitter <a
target="_blank" rel="noopener" href="https://www.planetanalog.com/signal-chain-basics-part-101-enob-degradation-analysis-over-frequency-due-to-jitter/">https://www.planetanalog.com/signal-chain-basics-part-101-enob-degradation-analysis-over-frequency-due-to-jitter/</a></p>
<p>Clock jitter analyzed in the time domain, Part 1, Texas Instruments
Analog Applications Journal (slyt379), Aug 2010 <a
target="_blank" rel="noopener" href="https://www.ti.com/lit/an/slyt379/slyt379.pdf">https://www.ti.com/lit/an/slyt379/slyt379.pdf</a></p>
<p>Clock jitter analyzed in the time domain, Part 2 <a
target="_blank" rel="noopener" href="https://www.ti.com/lit/slyt389">https://www.ti.com/lit/slyt389</a></p>
<p>Measurement of Total Harmonic Distortion and Its Related Parameters
using Multi-Instrument [<a
target="_blank" rel="noopener" href="https://www.virtins.com/doc/Measurement-of-Total-Harmonic-Distortion-and-Its-Related-Parameters-using-Multi-Instrument.pdf">pdf</a>]</p>
<p>Application Note AN-4: Understanding Data Converters' Frequency
Domain Specifications [<a
target="_blank" rel="noopener" href="https://www.datel.com/data/ads/adc-an4.pdf">pdf</a>]</p>
<p>Belleman, J. (2008). From analog to digital.
10.5170/CERN-2008-003.131. [<a
target="_blank" rel="noopener" href="https://cds.cern.ch/record/1100535/files/p131.pdf">pdf</a>]</p>
<p>HandWiki. Coherent sampling [<a
target="_blank" rel="noopener" href="https://handwiki.org/wiki/Coherent_sampling">link</a>]</p>
<p>Luis Chioye, TI. Leverage coherent sampling and FFT windows when
evaluating SAR ADCs (Part 1) [<a
target="_blank" rel="noopener" href="https://e2e.ti.com/blogs_/archives/b/precisionhub/posts/leverage-coherent-sampling-and-fft-windows-when-evaluating-sar-adcs-part-1">link</a>]</p>
<p>Coherent Sampling vs. Window Sampling | Analog Devices <a
target="_blank" rel="noopener" href="https://www.analog.com/en/technical-articles/coherent-sampling-vs-window-sampling.html">https://www.analog.com/en/technical-articles/coherent-sampling-vs-window-sampling.html</a></p>
<p>Understanding Effective Number of Bits <a
target="_blank" rel="noopener" href="https://robustcircuitdesign.com/signal-chain-explorer/understanding-effective-number-of-bits/">https://robustcircuitdesign.com/signal-chain-explorer/understanding-effective-number-of-bits/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/02/10/dont-touch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/02/10/dont-touch/" class="post-title-link" itemprop="url">How to preserve hand-instantiated cells</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-02-10 22:41:15" itemprop="dateCreated datePublished" datetime="2023-02-10T22:41:15+00:00">2023-02-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-29 13:23:05" itemprop="dateModified" datetime="2024-01-29T13:23:05+00:00">2024-01-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/digital/" itemprop="url" rel="index"><span itemprop="name">digital</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>To preserve the hand-instantiated cells</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_dont_touch [get_cells -hierarchical *dont_touch_*]</span><br></pre></td></tr></table></figure>
<p>The instances whose name contain "dont_touch_" shall be preserved
during synthesis</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// no performace concerns, rest sync use sync3 is enough</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">module</span> CN_resetb_sync_cell</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">input</span> resetb_in,</span><br><span class="line">    <span class="keyword">input</span> clkdst,</span><br><span class="line">    <span class="keyword">output</span> resetb_out</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="meta">`<span class="keyword">ifdef</span> USE_VERILOG</span></span><br><span class="line"><span class="keyword">reg</span> [<span class="number">2</span>:<span class="number">0</span>] resetb_dly;</span><br><span class="line"><span class="meta">`<span class="keyword">else</span></span></span><br><span class="line"><span class="keyword">wire</span> [<span class="number">2</span>:<span class="number">0</span>] resetb_dly;</span><br><span class="line"><span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">`<span class="keyword">ifdef</span> USE_VERILOG</span></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clkdst <span class="keyword">or</span> <span class="keyword">negedge</span> resetb_in)</span><br><span class="line">    <span class="keyword">if</span> (~resetb_in) resetb_dly &lt;= <span class="number">3&#x27;b000</span>;</span><br><span class="line">    <span class="keyword">else</span> resetb_dly &lt;= &#123;resetb_dly[<span class="number">1</span>:<span class="number">0</span>], <span class="number">1&#x27;b1</span>&#125;;</span><br><span class="line"><span class="meta">`<span class="keyword">else</span></span></span><br><span class="line">SDFCNQD4 dont_touch_sync_flop0 (</span><br><span class="line">    <span class="variable">.SI</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="variable">.SE</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="variable">.CP</span>(clkdst),</span><br><span class="line">    <span class="variable">.CDN</span>(resetb_in),</span><br><span class="line">    <span class="variable">.D</span>(<span class="number">1&#x27;b1</span>),</span><br><span class="line">    <span class="variable">.Q</span>(resetb_dly[<span class="number">0</span>])</span><br><span class="line">);</span><br><span class="line">SDFCNQD4 dont_touch_sync_flop1 (</span><br><span class="line">    <span class="variable">.SI</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="variable">.SE</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="variable">.CP</span>(clkdst),</span><br><span class="line">    <span class="variable">.CDN</span>(resetb_in),</span><br><span class="line">    <span class="variable">.D</span>(resetb_dly[<span class="number">0</span>]),</span><br><span class="line">    <span class="variable">.Q</span>(resetb_dly[<span class="number">1</span>])</span><br><span class="line">);</span><br><span class="line">SDFCNQD4 dont_touch_sync_flop2 (</span><br><span class="line">    <span class="variable">.SI</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="variable">.SE</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="variable">.CP</span>(clkdst),</span><br><span class="line">    <span class="variable">.CDN</span>(resetb_in),</span><br><span class="line">    <span class="variable">.D</span>(resetb_dly[<span class="number">1</span>]),</span><br><span class="line">    <span class="variable">.Q</span>(resetb_dly[<span class="number">2</span>])</span><br><span class="line">);</span><br><span class="line"><span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">assign</span> resetb_out = resetb_dly[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/29/dspf-in-corner/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/29/dspf-in-corner/" class="post-title-link" itemprop="url">different DSPF files for each corner</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-01-29 22:25:20" itemprop="dateCreated datePublished" datetime="2023-01-29T22:25:20+00:00">2023-01-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-29 13:23:05" itemprop="dateModified" datetime="2024-01-29T13:23:05+00:00">2024-01-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/cad/" itemprop="url" rel="index"><span itemprop="name">cad</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Create a new file with an extension <strong>scs</strong> like
<em>myDSPF_Files.scs</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* DSPF files to use with Corner Definitions</span><br><span class="line">* This is an example file showing how to define different dspf files for different corners</span><br><span class="line">* using model files for individual components as the</span><br><span class="line">* building blocks.</span><br><span class="line">simulator lang=spectre</span><br><span class="line">library dspf_files_corners</span><br><span class="line"></span><br><span class="line">section rctyp_25</span><br><span class="line">dspf_include &quot;DSPF_RC_TYPNOM25.spf&quot;</span><br><span class="line">endsection rctyp_25</span><br><span class="line"></span><br><span class="line">section rctyp_125</span><br><span class="line">dspf_include &quot;DSPF_RC_TYP125.spf&quot;</span><br><span class="line">endsection rctyp_125</span><br><span class="line"></span><br><span class="line">section rcworst_25</span><br><span class="line">dspf_include &quot;DSPF_RC_WORSE25.spf&quot;</span><br><span class="line">end section rcworst_25</span><br><span class="line"></span><br><span class="line">section rcworst_125</span><br><span class="line">dspf_include &quot;DSPF_RC_WORSE125.spf&quot;</span><br><span class="line">end section rcworst_125</span><br><span class="line"></span><br><span class="line">endlibrary dspf_files_corners</span><br></pre></td></tr></table></figure>
<p>Add the file created above ‘<em>myDSPF_File.scs</em>’ in
‘<em>Add/Edit Model Files</em>’ of Corners setup form</p>
<p><img src="/2023/01/29/dspf-in-corner/image-20230129223248655.png"
alt="image-20230129223248655" /></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/14/ModelLibrarySetup/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/14/ModelLibrarySetup/" class="post-title-link" itemprop="url">Model Library Setup</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-01-14 21:59:30" itemprop="dateCreated datePublished" datetime="2023-01-14T21:59:30+00:00">2023-01-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-29 13:23:05" itemprop="dateModified" datetime="2024-01-29T13:23:05+00:00">2024-01-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/cad/" itemprop="url" rel="index"><span itemprop="name">cad</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>In order to set up model files automatically in the <em>Model Library
Setup</em> form for Spectre or AMS simulator in ADE Explorer or ADE
Assembler</p>
<p>Add the following line in your <code>.cdsinit</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">envSetVal( &quot;spectre.envOpts&quot; &quot;modelFiles&quot; &#x27;string &quot;&lt;path_to model_file&gt;/myModels.scs&quot;)</span><br></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">envSetVal(&quot;spectre.envOpts&quot; &quot;modelFiles&quot; &#x27;string &quot;moreModels;ff mymodels;tt&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/2023/01/14/ModelLibrarySetup/image-20230114220458438.png"
alt="image-20230114220458438" /></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/06/ClockedComparators/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/06/ClockedComparators/" class="post-title-link" itemprop="url">Noise and Offset in Dynamic Comparators</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-01-06 23:13:29" itemprop="dateCreated datePublished" datetime="2023-01-06T23:13:29+00:00">2023-01-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-29 13:23:05" itemprop="dateModified" datetime="2024-01-29T13:23:05+00:00">2024-01-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/noise/" itemprop="url" rel="index"><span itemprop="name">noise</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="offset">Offset</h2>
<h2 id="noise">Noise</h2>
<h3 id="transient-noise-method">transient noise method</h3>
<h3 id="pss-method">PSS method</h3>
<p><span class="math display">\[
\overline{V^2_{n,in}}=\frac{\overline{V^2_{n,out}}}{A_v}
\]</span></p>
<p><img src="/2023/01/06/ClockedComparators/image-20230106232724903.png"
alt="image-20230106232724903" /></p>
<h2 id="rx-sensitivity-and-input-referred-noise">RX sensitivity and
input referred noise</h2>
<h2 id="reference">reference</h2>
<p>J. Silva, D. Brito, G. Rodrigues, T. Rabuske, A. C. Pinto and J.
Fernandes, "Methods for Fast Characterization of Noise and Offset in
Dynamic Comparators," 2021 19th IEEE International New Circuits and
Systems Conference (NEWCAS), 2021, pp. 1-4, doi:
10.1109/NEWCAS50681.2021.9462744.</p>
<p>P. Lund, “Comparator Design for High-Speed ADCs,” Dissertation, 2022.
URL: <a
target="_blank" rel="noopener" href="https://www.diva-portal.org/smash/get/diva2:1688161/FULLTEXT01.pdf">https://www.diva-portal.org/smash/get/diva2:1688161/FULLTEXT01.pdf</a></p>
<p>Art Schaldenbrand, Senior Product Manager, Keeping Things Quiet: A
New Methodology for Dynamic Comparator Noise Analysis URL:<a
target="_blank" rel="noopener" href="https://www.cadence.com/content/dam/cadence-www/global/en_US/videos/tools/custom-_ic_analog_rf_design/NoiseAnalyisposting201612Chalk%20Talk.pdf">https://www.cadence.com/content/dam/cadence-www/global/en_US/videos/tools/custom-_ic_analog_rf_design/NoiseAnalyisposting201612Chalk%20Talk.pdf</a></p>
<p>Masaya Miyahara, Yusuke Asada, Daehwa Paik and Akira Matsuzawa, "A
low-noise self-calibrating dynamic comparator for high-speed ADCs," 2008
IEEE Asian Solid-State Circuits Conference, 2008, pp. 269-272, doi:
10.1109/ASSCC.2008.4708780.</p>
<p>J. Kim, B. S. Leibowitz, J. Ren and C. J. Madden, "Simulation and
Analysis of Random Decision Errors in Clocked Comparators," in IEEE
Transactions on Circuits and Systems I: Regular Papers, vol. 56, no. 8,
pp. 1844-1857, Aug. 2009, doi: 10.1109/TCSI.2009.2028449. URL:<a
target="_blank" rel="noopener" href="https://people.engr.tamu.edu/spalermo/ecen689/simulation_analysis_clocked_comparators_kim_tcas1_2009.pdf">https://people.engr.tamu.edu/spalermo/ecen689/simulation_analysis_clocked_comparators_kim_tcas1_2009.pdf</a></p>
<p>Jaeha Kim, Lecture 12. Aperture and Noise Analysis of Clocked
Comparators URL:<a
target="_blank" rel="noopener" href="https://ocw.snu.ac.kr/sites/default/files/NOTE/7038.pdf">https://ocw.snu.ac.kr/sites/default/files/NOTE/7038.pdf</a></p>
<p>Shanthi Pavan, NOC:Introduction to Time - Varying Electrical
Networks, IIT Madras <a
target="_blank" rel="noopener" href="https://youtube.com/playlist?list=PLyqSpQzTE6M8qllAtp9TTODxNfaoxRLp9">https://youtube.com/playlist?list=PLyqSpQzTE6M8qllAtp9TTODxNfaoxRLp9</a></p>
<p>Rabuske, Taimur &amp; Fernandes, Jorge. (2014). Noise-aware
simulation-based sizing and optimization of clocked comparators. Analog
Integr. Circuits Signal Process.. 81. 723-728.
10.1007/s10470-014-0428-4.</p>
<p>Rabuske, Taimur &amp; Fernandes, Jorge. (2017), Chapter 5 Noise-Aware
Synthesis and Optimization of Voltage Comparators, "Charge-Sharing SAR
ADCs for Low-Voltage Low-Power Applications"</p>
<p>Eric Chang, EE240B Discussion 9 <a
target="_blank" rel="noopener" href="https://inst.eecs.berkeley.edu/~ee240b/sp18/discussions/dis9.pdf">https://inst.eecs.berkeley.edu/~ee240b/sp18/discussions/dis9.pdf</a></p>
<p>Y. Luo, A. Jain, J. Wagner and M. Ortmanns, "Input Referred
Comparator Noise in SAR ADCs," in IEEE Transactions on Circuits and
Systems II: Express Briefs, vol. 66, no. 5, pp. 718-722, May 2019, doi:
10.1109/TCSII.2019.2909429.</p>
<p>E. Gillen, G. Panchanan, B. Lawton and D. O'Hare, "Comparison of
transient and PNOISE simulation techniques for the design of a dynamic
comparator," 2022 33rd Irish Signals and Systems Conference (ISSC),
Cork, Ireland, 2022, pp. 1-5, doi: 10.1109/ISSC55427.2022.9826195.</p>
<p>Sam Palermo Lecture 6: RX Circuits URL:<a
target="_blank" rel="noopener" href="https://people.engr.tamu.edu/spalermo/ecen689/lecture6_ee689_rx_circuits.pdf">https://people.engr.tamu.edu/spalermo/ecen689/lecture6_ee689_rx_circuits.pdf</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/03/pole-splitting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/03/pole-splitting/" class="post-title-link" itemprop="url">pole splitting</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-01-03 22:31:41" itemprop="dateCreated datePublished" datetime="2023-01-03T22:31:41+00:00">2023-01-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-29 13:23:05" itemprop="dateModified" datetime="2024-01-29T13:23:05+00:00">2024-01-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="generic-circuit-in-textbook">Generic circuit in textbook</h3>
<p>In addition to <em>lowering</em> the required capacitor value, Miller
compensation entails a very important property: it moves the output pole
<em>away from the origin</em>. This effect is called <strong>pole
splitting</strong></p>
<p><img src="/2023/01/03/pole-splitting/image-20230103223438823.png"
alt="image-20230103223438823" /></p>
<p>The 1st stage is replaced with Thevenin equivalent circuit , <span
class="math inline">\(V_i \cong V_i \cdot g_{m1}R_{o1}\)</span></p>
<p><span class="math display">\[\begin{align}
\frac{V_i-V_{o1}}{R_{o1}} &amp;= V_{o1}\cdot sC_{o1}+(V_{o1}-V_o)\cdot
sC_c \\
V_{o1} &amp;= \frac{V_i+sR_{o1}C_cV_o}{1+sR_{o1}(C_{o1}+C_c)}
\end{align}\]</span> <span class="math display">\[
(V_{o1}-V_o)sC_c=g_{m2}V_{o1}+V_o(\frac{1}{R_{o2}+sC_L})
\]</span> substitute <span class="math inline">\(V_{o1}\)</span>, we
get</p>
<p><span class="math display">\[\begin{align}
\frac{V_o}{V_i} &amp;=
\frac{(sC_c-g_{m2})R_{o2}}{s^2R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)+s\left\{
R_{o1}C_c\cdot g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c) \right\}
+1} \\
&amp;=
\frac{g_{m2}R_{o2}(s\frac{C_c}{g_{m2}}-1)}{s^2R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)+s\left\{
R_{o1}C_c\cdot g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c) \right\}
+1}
\end{align}\]</span></p>
<p>left hand plane poles</p>
<p><span class="math display">\[\begin{align}
\omega_1 &amp;= \frac{1}{R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c)} \\
\omega_2 &amp;= \frac{R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c)}{R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)}
\end{align}\]</span></p>
<p>and RHP (<em>right</em>-<em>hand plane</em>) zero <span
class="math display">\[
\omega_z=\frac{g_{m2}}{C_c}
\]</span></p>
<h3 id="the-circuit-with-series-switch">The circuit with series
switch</h3>
<p><img src="/2023/01/03/pole-splitting/image-20230103230122637.png"
alt="image-20230103230122637" /></p>
<p>replace <span class="math inline">\(sC_L\)</span> with <span
class="math inline">\(1/(R_{sw}+\frac{1}{sC_L})\)</span> <span
class="math display">\[\begin{align}
\frac{V_{o2}}{V_i} &amp;=
\frac{g_{m2}R_{o2}(s\frac{C_c}{g_{m2}}-1)(1+sR_{sw}C_L)}{s^3R_{o1}R_{o2}R_{sw}C_{o1}C_cC_L+s^2\left\{R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)+
\left[ R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+0)+R_{o1}(C_{o1}+C_c)\right]R_{sw}C_L
\right\}+s\left\{ R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c) +R_{sw}C_L\right\} +1}
\end{align}\]</span> Due to <span class="math display">\[
\frac{V_o}{V_{o2}} =
\frac{\frac{1}{sC_L}}{R_{sw}+\frac{1}{sC_L}}=\frac{1}{1+sR_{sw}C_L}
\]</span> Then <span class="math display">\[\begin{align}
\frac{V_o}{V_i} &amp;= \frac{V_{o2}}{V_i} \cdot \frac{V_o}{V_{o2}} \\
&amp;=
\frac{g_{m2}R_{o2}(s\frac{C_c}{g_{m2}}-1)}{s^3R_{o1}R_{o2}R_{sw}C_{o1}C_cC_L+s^2\left\{R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)+
\left[ R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+0)+R_{o1}(C_{o1}+C_c)\right]R_{sw}C_L
\right\}+s\left\{ R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c) +R_{sw}C_L\right\} +1}
\end{align}\]</span></p>
<h3 id="r_sw-and-r_c"><span class="math inline">\(R_{sw}\)</span> and
<span class="math inline">\(R_c\)</span></h3>
<p><img src="/2023/01/03/pole-splitting/image-20230103232837318.png"
alt="image-20230103232837318" /></p>
<p><span class="math display">\[\begin{align}
\frac{V_{o2}}{V_i}
&amp;=-g_{m2}R_{o2}\frac{sC_c(R_c-1/g_{m2})+1}{(1+sR_{o1}C_{o1})sR_{o2}C_c+sR_{o1}\cdot
g_{m2}R_{o2}C_c+\frac{s(R_{o2}+R_{sw})C_L+1}{sR_{sw}C_L+1}\left[(1+sR_{o1}C_{o1})(1+sR_cC_c)+sR_{o1}C_c
\right]} \\
&amp;=-g_{m2}R_{o2}\frac{sC_c(R_c-1/g_{m2})+1}{s^2R_{o1}R_{o2}C_{o1}C_c+sR_{o2}C_c+sR_{o1}\cdot
g_{m2}R_{o2}C_c+\frac{s(R_{o2}+R_{sw})C_L+1}{sR_{sw}C_L+1}\left[(1+sR_{o1}C_{o1})(1+sR_cC_c)+sR_{o1}C_c
\right]} \\
&amp;=-g_{m2}R_{o2}\frac{\left[ sC_c(R_c-1/g_{m2})+1
\right](sR_{sw}C_L+1)}{s^2R_{o1}R_{o2}C_{o1}C_c(sR_{sw}C_L+1)+sR_{o2}C_c(sR_{sw}C_L+1)+sR_{o1}\cdot
g_{m2}R_{o2}C_c(sR_{sw}C_L+1)+\left[s(R_{o2}+R_{sw})C_L+1\right]\left[(1+sR_{o1}C_{o1})(1+sR_cC_c)+sR_{o1}C_c
\right]}
\end{align}\]</span></p>
<p><span class="math inline">\(s^3\)</span> terms in denominator <span
class="math display">\[
H_3 = s^3\cdot(R_{o1}R_{o2}R_c+R_{o1}R_{o2}R_{sw} +R_{o1}R_cR_{sw})\cdot
C_{o1}C_cC_L
\]</span> <span class="math inline">\(s^2\)</span> terms in denominator
<span class="math display">\[\begin{align}
H_2
&amp;=s^2\cdot(R_{o1}R_{o2}C_{o1}C_c+R_{o1}R_{o2}C_{o1}C_L+R_{o2}R_cC_cC_L+R_{o1}R_{o2}C_cC_L+R_{o1}R_cC_{o1}C_c\\
&amp;+R_{o2}R_{sw}C_cC_L+R_{o1}R_{sw}C_cC_L\cdot
g_{m2}R_{o2}+R_{o1}R_{sw}C_{o1}C_L+R_{sw}R_cC_cC_L+R_{o1}R_{sw}C_cC_L)
\end{align}\]</span></p>
<p><span class="math inline">\(s^1\)</span> term in denominator <span
class="math display">\[
H_1=s(R_{o1}\cdot
g_{m2}R_{o2}C_c+R_{o1}C_{o1}+R_cC_c+R_{o1}C_c+R_{o2}C_c+R_{o2}C_L+R_{sw}C_L)
\]</span> <span class="math inline">\(s^0\)</span> term in denominator
<span class="math display">\[
H_0=1
\]</span> set <span class="math inline">\(R_c=0\)</span> and <span
class="math inline">\(R_{sw}=0\)</span>, the <span
class="math inline">\(H_*\)</span> reduced to <span
class="math display">\[\begin{align}
H_3 &amp;= 0 \\
H_2 &amp;=s^2R_{o1}R_{o2}(C_{o1}C_c+C_{o1}C_L+C_cC_L) \\
H_1&amp;=s(R_{o1}\cdot
g_{m2}R_{o2}C_c+R_{o1}C_{o1}+R_{o1}C_c+R_{o2}C_c+R_{o2}C_L) \\
H_0&amp;=1
\end{align}\]</span> That is <span class="math display">\[
H=s^2R_{o1}R_{o2}(C_{o1}C_c+C_{o1}C_L+C_cC_L)+s(R_{o1}\cdot
g_{m2}R_{o2}C_c+R_{o1}C_{o1}+R_{o1}C_c+R_{o2}C_c+R_{o2}C_L)+1
\]</span></p>
<p>which is same with our previous analysis of <em>Generic circuit in
textbook</em></p>
<p>And we know <span class="math display">\[
\frac{V_o}{V_{o2}}=\frac{1}{1+sR_{sw}C_L}
\]</span> Finally, we get <span
class="math inline">\(\frac{V_o}{V_i}\)</span> <span
class="math display">\[\begin{align}
\frac{V_o}{V_i} &amp;= \frac{V_{o2}}{V_i} \cdot \frac{V_o}{V_{o2}} \\
&amp;= -g_{m2}R_{o2}\frac{\left[ sC_c(R_c-1/g_{m2})+1
\right](sR_{sw}C_L+1)}{H_3+H_2+H_1+1} \cdot \frac{1}{1+sR_{sw}C_L} \\
&amp;= -g_{m2}R_{o2}\frac{ sC_c(R_c-1/g_{m2})+1}{H_3+H_2+H_1+1}
\end{align}\]</span></p>
<p>The loop transfer function is <span class="math display">\[
\frac{V_o}{V_i} =-g_{m1}R_{o1}g_{m2}R_{o2}\frac{
sC_c(R_c-1/g_{m2})+1}{H_3+H_2+H_1+1}
\]</span></p>
<h4 id="vccs-model">vccs model</h4>
<p><img src="/2023/01/03/pole-splitting/image-20230106214027323.png"
alt="image-20230106214027323" /></p>
<h4 id="simplify-the-transfer-function">simplify the transfer
function</h4>
<h5 id="omit-c_o1">omit <span class="math inline">\(C_{o1}\)</span></h5>
<p>We omit <span class="math inline">\(C_{o1}\)</span> in frequency
range of interest</p>
<p><span class="math display">\[\begin{align}
H_3 &amp;= 0 \\
H_2 &amp;=s^2(R_{o2}R_c+R_{o1}R_{o2}+R_{o2}R_{sw}+R_{o1}R_{sw}\cdot
g_{m2}R_{o2}+R_{sw}R_c+R_{o1}R_{sw})\cdot C_cC_L \\
H_1 &amp;=s(R_{o1}\cdot
g_{m2}R_{o2}C_c+R_cC_c+R_{o1}C_c+R_{o2}C_c+R_{o2}C_L+R_{sw}C_L) \\
H_0 &amp;= 1
\end{align}\]</span></p>
<blockquote>
<p>two poles and 1 zero</p>
</blockquote>
<p><img src="/2023/01/03/pole-splitting/image-20230105221058404.png"
alt="image-20230105221058404" /></p>
<h5 id="more-simplification">more simplification</h5>
<p>Then, some terms can be omitted</p>
<p><span class="math display">\[\begin{align}
H_2 &amp;=s^2R_{o1}R_{o2}(1+g_{m2}R_{sw})\cdot C_cC_L \\
H_1 &amp;=sR_{o1}\cdot g_{m2}R_{o2}C_c \\
H_0 &amp;= 1
\end{align}\]</span></p>
<p>The poles can be deduced <span class="math display">\[\begin{align}
\omega_1 &amp;= \frac{1}{R_{o1}\cdot g_{m2}R_{o2}C_c} \\
\omega_2 &amp;= \frac{1}{1+g_{m2}R_{sw}}\cdot \frac{g_{m2}}{C_L} \\
&amp;= \frac{1}{(gm_2^{-1}+R_{sw})C_L}
\end{align}\]</span></p>
<p>The pole <span
class="math inline">\(\omega_2=\frac{1}{gm_2^{-1}C_L}\)</span> is
changed to <span
class="math inline">\(\omega_2=\frac{1}{(gm_2^{-1}+R_{sw})C_L}\)</span></p>
<blockquote>
<p>In order to cancell <span class="math inline">\(\omega_2\)</span>
with <span class="math inline">\(\omega_z\)</span>, <span
class="math inline">\(R_c\)</span> shall be increased</p>
</blockquote>
<p><span class="math display">\[
R_{eq}=g_{m2}^{-1}+R_{sw}
\]</span> <img src="/2023/01/03/pole-splitting/fndRsw.drawio.svg"
alt="fndRsw.drawio.svg" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105221201876.png"
alt="image-20230105221201876" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105220034632.png"
alt="image-20230105220034632" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105220102170.png"
alt="image-20230105220102170" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105220119502.png"
alt="image-20230105220119502" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105221805322.png"
alt="image-20230105221805322" /></p>
<blockquote>
<p><strong>omit <span class="math inline">\(C_{o1}\)</span></strong> is
same with <strong>2nd system</strong> simplification</p>
</blockquote>
<h3 id="non-dominant-pole-in-sansens-book">non-dominant pole in Sansen's
book</h3>
<p><img src="/2023/01/03/pole-splitting/image-20230103231300609.png"
alt="image-20230103231300609" /></p>
<p>Following demonstrate how derive <span
class="math inline">\(f_{nd}\)</span> from Razavi's equation. We copy
<span class="math inline">\(\omega_2\)</span> here <span
class="math display">\[
\omega_2 = \frac{R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c)}{R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)}
\]</span> which can be reduced as below</p>
<p><span class="math display">\[\begin{align}
\omega_2 &amp;= \frac{R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c)}{R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)}
\\
&amp;= \frac{R_{o1}C_c\cdot
g_{m2}R_{o2}}{R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)} \\
&amp;= \frac{C_c\cdot g_{m2}}{C_cC_{o1}+C_LC_{o1}+C_LC_c} \\
&amp;= \frac{g_{m2}}{C_{o1}+C_L\frac{C_{o1}}{C_c}+C_L} \\
&amp;= \frac{g_{m2}}{C_L\frac{C_{o1}}{C_c}+C_L} \\
&amp;= \frac{g_{m2}}{C_L} \cdot \frac{1}{1+\frac{C_{o1}}{C_c}}
\end{align}\]</span></p>
<p><img src="/2023/01/03/pole-splitting/image-20230129221424763.png"
alt="image-20230129221424763" /></p>
<h3 id="exercise-of-2-stage-opamp">Exercise of 2-stage opamp</h3>
<p><img src="/2023/01/03/pole-splitting/image-20230105001747174.png"
alt="image-20230105001747174" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105001758050.png"
alt="image-20230105001758050" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105001812304.png"
alt="image-20230105001812304" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105001849554.png"
alt="image-20230105001849554" /></p>
<blockquote>
<p><span class="math inline">\(R_{o1}\)</span> and <span
class="math inline">\(R_{o2}\)</span> don't affect stability, if <span
class="math inline">\(f_{nd}&gt;3\text{GBW}\)</span></p>
<p>DC gain: <span
class="math inline">\(g_{m1}g_{m2}R_{o1}R_{o2}\)</span></p>
<p>dominant pole: <span
class="math inline">\(\omega_d=\frac{1}{R_{o1}\cdot
g_{m2}R_{o2}C_c}\)</span></p>
</blockquote>
<p><img src="/2023/01/03/pole-splitting/image-20230105001923985.png"
alt="image-20230105001923985" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105002653735.png"
alt="image-20230105002653735" /></p>
<blockquote>
<p><span
class="math inline">\(20log_{10}(1.414^2)=6\text{dB}\)</span></p>
</blockquote>
<h3 id="reference">reference</h3>
<p>Razavi, Behzad. Design of Analog CMOS Integrated Circuits. India:
McGraw-Hill, 2017.</p>
<p>Sansen, Willy M. Analog Design Essentials. Germany: Springer US,
2006.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/01/insight/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/01/insight/" class="post-title-link" itemprop="url">Circuit insight</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-01-01 17:50:13" itemprop="dateCreated datePublished" datetime="2023-01-01T17:50:13+00:00">2023-01-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-29 13:23:05" itemprop="dateModified" datetime="2024-01-29T13:23:05+00:00">2024-01-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="rc-charge-and-discharge">RC charge and discharge</h2>
<ul>
<li><p>charge: <span class="math display">\[
V_o(t) = V_{X}(1-e^{-\frac{t}{\tau}}) + V_{o,0}\cdot
e^{-\frac{-t}{\tau}}
\]</span></p></li>
<li><p>discharge: <span class="math display">\[
V_o(t) = V_{o,0}\cdot e^{-\frac{t}{\tau}} +
V_{o,\infty}\cdot(1-e^{-\frac{t}{\tau}})
\]</span></p></li>
</ul>
<blockquote>
<ol type="1">
<li><span class="math inline">\(e^{-\frac{t}{\tau}}\)</span> item
determine the <strong>initial state </strong></li>
<li><span class="math inline">\((1-e^{-\frac{t}{\tau}})\)</span> item
determine the <strong>final state</strong></li>
</ol>
</blockquote>
<p><img src="/2023/01/01/insight/image-20231104231640290.png"
alt="image-20231104231640290" /></p>
<p><img src="/2023/01/01/insight/image-20231104232000036.png"
alt="image-20231104232000036" /></p>
<h3 id="ac-coupling">AC coupling</h3>
<p><img src="/2023/01/01/insight/image-20231121224940814.png"
alt="image-20231121224940814" /></p>
<p><img src="/2023/01/01/insight/image-20231121225358509.png"
alt="image-20231121225358509" /></p>
<hr />
<p><span class="math display">\[
\tau = 200 \text{nF} \times (50+50)\text{ohm} = 20 \mu s
\]</span></p>
<p>high level envelope:</p>
<p><img src="/2023/01/01/insight/image-20231121230155083.png"
alt="image-20231121230155083" /></p>
<p><img src="/2023/01/01/insight/image-20231121230225895.png"
alt="image-20231121230225895" /></p>
<h2 id="switched-capacitor-resistor">switched-capacitor resistor</h2>
<p><img src="/2023/01/01/insight/image-20231104212333555.png"
alt="image-20231104212333555" /></p>
<p><img src="/2023/01/01/insight/image-20231104212343670.png"
alt="image-20231104212343670" /></p>
<blockquote>
<p>Switching the capacitor moves a charge proportional to the voltage
difference. The resistor achieves the same function only in a continuous
manner.</p>
<p>Using a water analogy, we can imagine a couple of scenarios:</p>
<ol type="1">
<li>a steady water flow,</li>
<li>or 2) the same water delivered rapidly in buckets. Both create the
same flow of water - <strong>on average!</strong></li>
</ol>
</blockquote>
<h2 id="current-mirror-with-source-degeneration">Current mirror with
source degeneration</h2>
<p><img src="/2023/01/01/insight/image-20231103213308081.png"
alt="image-20231103213308081" /></p>
<p><img src="/2023/01/01/insight/image-20231103213327501.png"
alt="image-20231103213327501" /></p>
<p><img
src="/2023/01/01/insight/current_mirror_with_res_degeneration.jpg"
alt="degeneration" /></p>
<blockquote>
<p>Razavi 2nd, problem 14.15</p>
</blockquote>
<h2 id="sinusoidal-steady-state-and-frequency-response">Sinusoidal
steady-state and frequency response</h2>
<p><img src="/2023/01/01/insight/image-20231104104933781.png"
alt="image-20231104104933781" /></p>
<p><img src="/2023/01/01/insight/image-20231104104946203.png"
alt="image-20231104104946203" /></p>
<p><img src="/2023/01/01/insight/image-20231104105056345.png"
alt="image-20231104105056345" /></p>
<p><img src="/2023/01/01/insight/image-20231104105139814.png"
alt="image-20231104105139814" /></p>
<p><img src="/2023/01/01/insight/image-20231104105223549.png"
alt="image-20231104105223549" /></p>
<p>Due to KCL and <span class="math inline">\(u(t)=e^{j\omega
t}\)</span> and <span class="math inline">\(y(t)=H(j\omega)e^{j\omega
t}\)</span>, we have ODE:</p>
<p><span class="math display">\[\begin{align}
\frac{u(t) - y(t)}{R} = C \frac{dy(t)}{dt} \\
e^{j\omega t} - H(j\omega) e^{j\omega t} = H(j\omega)\cdot j\omega
e^{j\omega t} \\
\end{align}\]</span></p>
<p><span class="math inline">\(H(j\omega)\)</span> is obtained as below
<span class="math display">\[
H(j\omega) = \frac{1}{1+j\omega}
\]</span></p>
<p><img src="/2023/01/01/insight/image-20231104135855739.png"
alt="image-20231104135855739" /></p>
<h2 id="monitored-analog-critical-parameters">Monitored Analog Critical
Parameters</h2>
<p><img src="/2023/01/01/insight/monitor_parameters.drawio.svg"
alt="monitor_parameters.drawio" /></p>
<p>Parameter Definition:</p>
<p><span class="math display">\[\begin{align}
I_{\text{D,lin}} &amp;= I_D \mid _{V_G=V_{DD},V_D=0.05V} \\
I_{\text{D,sat}} &amp;= I_D \mid _{V_G=V_D=V_{DD}} \\
V_{\text{t,lin}} &amp;= V_G \mid _{I_D=I_{\text{thx}}\cdot
\frac{W}{L}@\{V_D=0.05V\}}
\end{align}\]</span></p>
<blockquote>
<p><span class="math inline">\(I_{\text{thx}}\)</span> could be
different for technologies. (For N16, <span
class="math inline">\(I_{\text{thx}}=10\)</span>nA)</p>
</blockquote>
<h2 id="demystifying-stb-and-pstb-in-spectre">Demystifying stb and pstb
in Spectre</h2>
<p>All credits to my colleague, Zhang Wenpian.</p>
<h3 id="spectres-stb-analysis">Spectre's stb analysis</h3>
<p>Spectre <strong>stb</strong>'s "loopgain" is negative of "T" in
paper<sup>[1]</sup> <span class="math display">\[
T = \frac{2(AD-BC) - A + D}{2(AD-BC)-A+D-1}
\]</span></p>
<p>AC simulation testbench, shown as below,</p>
<p><img src="/2023/01/01/insight/stb_pstb.drawio.svg"
alt="stb_pstb.drawio" /></p>
<ol type="1">
<li><p><span class="math inline">\(I_{inj}\)</span> = 0, <span
class="math inline">\(V_{inj}\)</span> = 1</p>
<p>B = if, D = ve</p></li>
<li><p><span class="math inline">\(I_{inj}\)</span> = 1, <span
class="math inline">\(V_{inj}\)</span> = 0</p>
<p>A = if, C = ve</p></li>
</ol>
<h3 id="spectres-pstb-analysis">Spectre's pstb analysis</h3>
<p>Spectre <strong>pstb</strong> is similar to stb, just set
<strong>pac</strong> as <strong>1</strong> instead of
<strong>ac</strong> in current source and voltage source.</p>
<p>This analysis just use <strong>harmonic 0</strong> transfer function
in pac analysis, which has limitation.</p>
<h2 id="thevenin-and-norton-equivalent-circuits">Thevenin and Norton
Equivalent Circuits</h2>
<h3 id="戴维南定理">戴维南定理</h3>
<p><img src="/2023/01/01/insight/image-20231021084850078.png"
alt="image-20231021084850078" /></p>
<h3 id="等效电阻的计算方法">等效电阻的计算方法</h3>
<p><img src="/2023/01/01/insight/image-20231021085151943.png"
alt="image-20231021085151943" /></p>
<blockquote>
<p>使用<strong>外加电源法</strong>时， 全部独立电源需要置零</p>
</blockquote>
<h3 id="诺顿定理">诺顿定理</h3>
<p><img src="/2023/01/01/insight/image-20231021090448282.png"
alt="image-20231021090448282" /></p>
<h4 id="lemma-of-razavi">Lemma of Razavi</h4>
<p><span class="math display">\[
A_V = -G_m R_{out}
\]</span></p>
<p><img src="/2023/01/01/insight/image-20231021092407849.png"
alt="image-20231021092407849" /></p>
<blockquote>
<p><em>Design of Analog CMOS Integrated Circuits, Second Edition -
Behzad Razavi</em></p>
</blockquote>
<h2 id="millers-approximation-right-half-plane-zero">Miller's
Approximation: right-half-plane zero</h2>
<p><img src="/2023/01/01/insight/image-20231021101204165.png"
alt="image-20231021101204165" /></p>
<p>A quick inspection of this circuit reveals that a
<strong>zero</strong> lies at a frequency where the current through
<span class="math inline">\(C_{12}\)</span> becomes equal to <span
class="math inline">\(g_2V_1\)</span>.</p>
<p>When this occurs, the current through the parallel combination of
<span class="math inline">\(C_2\)</span> and <span
class="math inline">\(R_2\)</span> becomes zero, creating a zero in the
transfer function.</p>
<p>In other words, we can write</p>
<p><span class="math display">\[\begin{align}
g_2V_1 &amp;= V_1sC_{12} \\
s &amp;= \frac{g_2}{C_{12}}
\end{align}\]</span></p>
<h2 id="how-to-mitigate-impact-of-zero">How to Mitigate Impact of
Zero</h2>
<h3 id="lectures">Lectures</h3>
<p>EE 240B: Advanced Analog Circuit Design, Prof. Bernhard E. Boser [<a
target="_blank" rel="noopener" href="https://people.eecs.berkeley.edu/~boser/courses/240B/lectures/M07%20OTA%20II.pdf">OTA
II, Multi-Stage</a>]</p>
<h3 id="papers">Papers</h3>
<p>B. K. Ahuja, "An improved frequency compensation technique for CMOS
operational amplifiers," in IEEE Journal of Solid-State Circuits, vol.
18, no. 6, pp. 629-633, Dec. 1983, doi: 10.1109/JSSC.1983.1052012.</p>
<p>D. B. Ribner and M. A. Copeland, "Design techniques for cascoded CMOS
op amps with improved PSRR and common-mode input range," in IEEE Journal
of Solid-State Circuits, vol. 19, no. 6, pp. 919-925, Dec. 1984, doi:
10.1109/JSSC.1984.1052246.</p>
<p>Abo, Andrew &amp; Gray, Paul. (1999). A 1.5V, 10-bit, 14MS/s CMOS
Pipeline Analog-to-Digital Converter.</p>
<h3 id="books-chapters">Book's chapters</h3>
<p>Design of analog CMOS integrated circuits, Behzad Razavi</p>
<ul>
<li>10.5 Compensation of Two-Stage Op Amps</li>
<li>10.7 Other Compensation Techniques</li>
</ul>
<p>Analog Design Essentials, Willy M.C. Sansen</p>
<ul>
<li>chapter #5 Stability of operational amplifiers - Compensation of
positive zero</li>
</ul>
<p>Analysis and Design of Analog Integrated Circuits 5th Edition, Paul
R. Gray, Paul J. Hurst, Stephen H. Lewis, Robert G. Meyer</p>
<ul>
<li>9.4.3 Two-Stage MOS Amplifier Compensation</li>
</ul>
<p>CMOS Analog Circuit Design 3rd Edition, Phillip E. Allen, Douglas R.
Holberg</p>
<ul>
<li>6.2.2 Miller Compensation of the Two-Stage Op Amp</li>
</ul>
<h3 id="example---cascode-compensation">Example - cascode
compensation</h3>
<p><img src="/2023/01/01/insight/cascode_compensation.PNG"
alt="cascode_compensation" /> <span class="math display">\[\begin{align}
\omega_{p1} &amp;= \frac {1} {R_{eq}g_{m9}R_{L}C_{c}} \\
\omega_{p2} &amp;= \frac {g_{m4}R_{eq}g_{m9}} {C_L} \\
\omega_z &amp;= (g_{m4}R_{eq})(\frac {g_{m9}} {C_c})
\end{align}\]</span></p>
<blockquote>
<p>Figure 10.46 in Razavi's book</p>
</blockquote>
<h2 id="non-overlapping-clock">Non Overlapping Clock</h2>
<div class="pdf-container" data-target="/pdfs/nonoverlapping_clocks.pdf" data-height="500px"></div>
<h2 id="single-ended-amplifier-offset-voltage">Single ended Amplifier
Offset Voltage</h2>
<h3 id="unity-gain-buffer">unity gain buffer</h3>
<p><img src="/2023/01/01/insight/image-20220917115231508.png"
alt="image-20220917115231508" /></p>
<p><span class="math display">\[\begin{align}
V_o &amp;= V_{o,dc}+A(V_p-V_m) \\
V_o&#39; &amp;= V_{o,dc}+A(V_p+V_{os}-V_m&#39;)
\end{align}\]</span></p>
<p>Then, we get <span class="math display">\[
V_{os}=\frac{V_o&#39;-V_o}{A}+(V_m&#39;-V_m)
\]</span> Due to <span class="math inline">\(V_o=V_m\)</span> and <span
class="math inline">\(V_o&#39;=V_m&#39;\)</span> <span
class="math display">\[
V_{os}=(1/A+1)\Delta{V_m}
\]</span> or <span class="math display">\[
V_{os}=(1/A+1)\Delta{V_o}
\]</span> if <span class="math inline">\(A \gg 1\)</span> <span
class="math display">\[
V_{os}=\Delta{V_o}
\]</span></p>
<h3 id="non-inverting-amplifier">non-inverting amplifier</h3>
<p><img src="/2023/01/01/insight/image-20220917115308699.png"
alt="image-20220917115308699" /> <span
class="math display">\[\begin{align}
V_o &amp;= V_{o,dc}+A(V_p-V_m) \\
V_o&#39; &amp;= V_{o,dc}+A(V_p+V_{os}-V_m&#39;) \\
V_m &amp;= \beta V_o \\
V_m&#39; &amp;= \beta V_o&#39;
\end{align}\]</span></p>
<p>we get <span class="math display">\[
V_{os}=\frac{V_o&#39;-V_o}{A}+(V_m&#39;-V_m)
\]</span> or <span class="math display">\[
V_{os}=\frac{\Delta V_o}{A}+\beta \Delta V_o
\]</span> if <span class="math inline">\(A \gg 1\)</span> <span
class="math display">\[
V_{os}=\beta \Delta V_o
\]</span> or <span class="math display">\[
V_{os}=\Delta V_m
\]</span></p>
<hr />
<p><strong>Lecture 22 Variability and Mismatch of Dr. Hesham A. Omran's
Analog IC Design</strong></p>
<p><img src="/2023/01/01/insight/image-20221022010448797.png"
alt="image-20221022010448797" /></p>
<blockquote>
<p>URL: <a
target="_blank" rel="noopener" href="https://www.master-micro.com/professional-courses/analog-ic-design/course-resources">https://www.master-micro.com/professional-courses/analog-ic-design/course-resources</a></p>
</blockquote>
<h2 id="gotcha-mos-ron">Gotcha MOS ron</h2>
<p>There is discrepancy between model operating point and <span
class="math inline">\(V_{ds}/I_{ds}\)</span></p>
<p>I believe that the equation <span
class="math inline">\(V_{ds}/I_{ds}\)</span> is more appropriate where
mos is used as switch, though <span
class="math inline">\(V_{ds}=0\)</span> is an outlier.</p>
<p><img src="/2023/01/01/insight/image-20230104230757729.png"
alt="image-20230104230757729" /></p>
<p><img src="/2023/01/01/insight/image-20230104230837829.png"
alt="image-20230104230837829" /></p>
<p><img src="/2023/01/01/insight/image-20230104230851475.png"
alt="image-20230104230851475" /></p>
<h2 id="channel-length-modulation">Channel-length modulation</h2>
<blockquote>
<p>short-channel effects</p>
</blockquote>
<p><span class="math display">\[\begin{align}
I_D
&amp;=\frac{1}{2}\mu_nC_{ox}\frac{W}{L}(V_{GS}-V_{TH})^2(1+\frac{\Delta
L}{L}) \\
I_D &amp;=\frac{1}{2}\mu_nC_{ox}\frac{W}{L}(V_{GS}-V_{TH})^2(1+\lambda
V_{DS}) \\
I_D
&amp;=\frac{1}{2}\mu_nC_{ox}\frac{W}{L}(V_{GS}-V_{TH})^2(1+\frac{V_{DS}}{V_A})
\end{align}\]</span></p>
<p>where <span class="math inline">\(\frac{\Delta L}{L}=\lambda
V_{DS}\)</span> and <span
class="math inline">\(V_A=\frac{1}{\lambda}\)</span></p>
<p><span class="math inline">\(\lambda\)</span> is channel length
modulation parameter</p>
<p><span class="math inline">\(V_A\)</span>, i.e. Early voltage is equal
to inverse of channel length modulation parameter</p>
<p>The output resistance <span class="math inline">\(r_o\)</span></p>
<p><span class="math display">\[\begin{align}
r_o &amp;= \frac{\partial V_{DS}}{\partial I_D} \\
&amp;= \frac{1}{\partial I_D/\partial V_{DS}} \\
&amp;= \frac{1}{\lambda I_D} \\
&amp;= \frac{V_A}{I_D}
\end{align}\]</span></p>
<p>Due to <span class="math inline">\(\lambda \propto 1/L\)</span>, i.e.
<span class="math inline">\(V_A \propto L\)</span> <span
class="math display">\[
r_o \propto \frac{L}{I_D}
\]</span> <img src="/2023/01/01/insight/image-20220930001909262.png"
alt="image-20220930001909262" /></p>
<p><img src="/2023/01/01/insight/image-20220930002003924.png"
alt="image-20220930002003924" /></p>
<p><img src="/2023/01/01/insight/image-20220930002157365.png"
alt="image-20220930002157365" /></p>
<p>The output resistance is almost doubled using Stacked FET in
<em>saturation region</em></p>
<blockquote>
<p><span class="math inline">\(V_t\)</span> and mobility <span
class="math inline">\(\mu_{n,p}\)</span> are sensitive to
temperature</p>
<ul>
<li><span class="math inline">\(V_t\)</span> decreases by 2-mV for every
1<span class="math inline">\(^oC\)</span> rise in temperature</li>
<li>mobility <span class="math inline">\(\mu_{n,p}\)</span> decreases
with temperature</li>
</ul>
<p>Overall, increase in temperature results in lower drain currents</p>
</blockquote>
<h2
id="biasing-current-source-and-global-variation-monte-carlo-simulation">Biasing
current source and global variation Monte Carlo simulation</h2>
<p><img src="/2023/01/01/insight/image-20221020225334767.png"
alt="image-20221020225334767" /></p>
<p><img src="/2023/01/01/insight/image-20221020225502503.png"
alt="image-20221020225502503" /></p>
<p><strong>iwl</strong>: biased by mirror</p>
<p><strong>iwl_ideal</strong>: biased by <em>vdc</em> source, whose
value is <em>typical corner</em></p>
<hr />
<p>For <strong>local variation</strong>, constant voltage bias
(<em>vb_const</em> in schematic) help reduce variation from <span
class="math inline">\(\sqrt{2}\Delta V_{th}\)</span> to <span
class="math inline">\(\Delta V_{th}\)</span></p>
<p>For <strong>global variation</strong>, <em>all device have same
variation</em>, mirror help reduce variation by sharing same <span
class="math inline">\(V_{gs}\)</span></p>
<ol type="1">
<li>global variation + local variation (All MC)</li>
</ol>
<p><img src="/2023/01/01/insight/image-20221020225615633.png"
alt="image-20221020225615633" /></p>
<ol start="2" type="1">
<li>local variation (Mismatch MC)</li>
</ol>
<p><img src="/2023/01/01/insight/image-20221020225701218.png"
alt="image-20221020225701218" /></p>
<ol start="3" type="1">
<li>global variation (Process MC)</li>
</ol>
<p><img src="/2023/01/01/insight/image-20221020232515420.png"
alt="image-20221020232515420" /></p>
<blockquote>
<p>We had better bias mos gate with mirror rather than the <em>vdc</em>
source while simulating sub-block.</p>
<p>This is real situation due to current source are always biased by
mirror and <em>vdc</em> biasing don't give the right result in global
variation Monte Carlo simulation (<em>542.8n</em> is too pessimistic,
<em>13.07p</em> is right result)</p>
</blockquote>
<h2 id="schmitt-inverter">Schmitt Inverter</h2>
<p><img src="/2023/01/01/insight/image-20231021232912529.png"
alt="image-20231021232912529" /></p>
<h2 id="gmid-adt">gm/ID: ADT</h2>
<p><img src="/2023/01/01/insight/image-20230101175707586.png"
alt="image-20230101175707586" /></p>
<p><img src="/2023/01/01/insight/image-20230101191928423.png"
alt="image-20230101191928423" /></p>
<p><img src="/2023/01/01/insight/image-20230101212125344.png"
alt="image-20230101212125344" /></p>
<p><img src="/2023/01/01/insight/image-20230101234936702.png"
alt="image-20230101234936702" /></p>
<p><img src="/2023/01/01/insight/image-20230101235655601.png"
alt="image-20230101235655601" /></p>
<p><img src="/2023/01/01/insight/image-20230102000059723.png"
alt="image-20230102000059723" /></p>
<p><img src="/2023/01/01/insight/image-20230103220933081.png"
alt="image-20230103220933081" /></p>
<blockquote>
<p>small gm/ID for High ro, or high Early voltage <span
class="math inline">\(V_A\)</span></p>
</blockquote>
<h2 id="transit-frequency-f_t">Transit Frequency <span
class="math inline">\(f_T\)</span></h2>
<p>Defined as the frequency at which the <strong>small-signal current
gain</strong> of a device is <strong>unity</strong></p>
<p><img src="/2023/01/01/insight/image-20231213234524075.png"
alt="image-20231213234524075" /></p>
<hr />
<p><img src="/2023/01/01/insight/image-20240116233951006.png"
alt="image-20240116233951006" /></p>
<h2 id="spectral-content-of-nrz">Spectral content of NRZ</h2>
<p><img src="/2023/01/01/insight/image-20231111100420675.png"
alt="image-20231111100420675" /></p>
<p><img src="/2023/01/01/insight/image-20231111101322771.png"
alt="image-20231111101322771" /></p>
<p><img src="/2023/01/01/insight/image-20231110224237933.png"
alt="image-20231110224237933" /></p>
<blockquote>
<p>Lecture 26 Autocorrelation Functions of Random Binary Processes [<a
target="_blank" rel="noopener" href="https://bpb-us-w2.wpmucdn.com/sites.gatech.edu/dist/a/578/files/2003/12/ECE3075A-26.pdf">https://bpb-us-w2.wpmucdn.com/sites.gatech.edu/dist/a/578/files/2003/12/ECE3075A-26.pdf</a>]</p>
<p>Lecture 32 Correlation Functions &amp; Power Density Spectrum,
Cross-spectral Density [<a
target="_blank" rel="noopener" href="https://bpb-us-w2.wpmucdn.com/sites.gatech.edu/dist/a/578/files/2003/12/ECE3075A-32.pdf">https://bpb-us-w2.wpmucdn.com/sites.gatech.edu/dist/a/578/files/2003/12/ECE3075A-32.pdf</a>]</p>
</blockquote>
<h2 id="g_m-vs-v_textds"><span class="math inline">\(g_m\)</span> vs
<span class="math inline">\(V_{\text{DS}}\)</span></h2>
<p><img src="/2023/01/01/insight/image-20231125224714658.png"
alt="image-20231125224714658" /></p>
<h2 id="operating-points-small-gain-theorem">Operating points &amp;
Small gain theorem</h2>
<blockquote>
<p>Dr. Degang Chen, <strong>EE 501:</strong> <strong>CMOS Analog
Integrated Circuit Design</strong> [<a
target="_blank" rel="noopener" href="https://class.ece.iastate.edu/djchen/ee501/2020/References.ppt">https://class.ece.iastate.edu/djchen/ee501/2020/References.ppt</a>]</p>
</blockquote>
<p><img src="/2023/01/01/insight/image-20231202102259692.png"
alt="image-20231202102259692" /></p>
<p>For any given constant values of <em>u</em> and <em>v</em>, the
constant values of variables that solve the the feed back relationship
are called the <strong>operating points</strong>, or <strong>equilibrium
points</strong>.</p>
<blockquote>
<p><em>Operating points</em> can be either <em>stable</em> or
<em>unstable</em>.</p>
<p>An operating point is unstable if any or some small perturbation near
it causes divergence away from that operating point.</p>
</blockquote>
<p>If the loop gain evaluated at an operating point is <strong>less than
one</strong>, that operating point is <strong>stable</strong>.</p>
<blockquote>
<p>This is a sufficient condition</p>
</blockquote>
<p><img src="/2023/01/01/insight/image-20231202105749888.png"
alt="image-20231202105749888" /></p>
<p><img src="/2023/01/01/insight/image-20231202105621385.png"
alt="image-20231202105621385" /></p>
<p>With <span class="math inline">\(m_{1\to 2} = 1\)</span> <span
class="math display">\[
\text{Loop Gain} \simeq \frac{V_{BN}-V_{T2}}{V_{BN}-V_{T2} + V_R}
\tag{LG\_0}
\]</span> Assuming all MOS in strong inv operation, <span
class="math inline">\(I\)</span>, <span
class="math inline">\(V_{BN}\)</span> and <span
class="math inline">\(V_R\)</span> is obtain <span
class="math display">\[\begin{align}
I &amp;= \frac{2\beta _1 + 2\beta _2 - 4\sqrt{\beta _1 \beta
_2}}{R^2\beta _1 \beta _2} \\
V_{BN} &amp;= V_{T2} + \frac{2}{R\beta _2}(1- \sqrt{\frac{\beta
_2}{\beta _1}}) \\
IR &amp;= \frac{2}{R}\left( \frac{1}{\sqrt{\beta_2}}
-  \frac{1}{\sqrt{\beta_1}} \right)
\end{align}\]</span></p>
<p>Substitute <span class="math inline">\(V_{BN}\)</span> and <span
class="math inline">\(V_R\)</span> of <span
class="math inline">\((LG\_0)\)</span> <span
class="math display">\[\begin{align}
\text{Loop Gain} &amp; \simeq
\frac{1-\sqrt{\frac{\beta_2}{\beta_1}}}{\frac{\beta_2}{\beta_1} -
3\sqrt{\frac{\beta_2}{\beta_1}}+2} \\
&amp;= \frac{1}{2-\sqrt{\frac{\beta_2}{\beta_1}}} \tag{LG\_1}
\end{align}\]</span></p>
<h3 id="alternative-approach-for-loop-gain">Alternative approach for
Loop Gain</h3>
<blockquote>
<p>using derivation of large signal</p>
</blockquote>
<p><img src="/2023/01/01/insight/image-20231202132310478.png"
alt="image-20231202132310478" /></p>
<p><img src="/2023/01/01/insight/image-20231202134138319.png"
alt="image-20231202134138319" /></p>
<hr />
<blockquote>
<p>❗❗❗ R should <strong>not</strong> be on the other side</p>
</blockquote>
<p><img src="/2023/01/01/insight/image-20231202104505264.png"
alt="image-20231202104505264" /></p>
<h2 id="bias-circuit">Bias Circuit</h2>
<h3 id="cascode-with-switch">cascode with switch</h3>
<p><img src="/2023/01/01/insight/image-20231212145336401.png"
alt="image-20231212145336401" /></p>
<h3 id="cascode-with-single-current-input">cascode with single current
input</h3>
<p><img src="/2023/01/01/insight/image-20231212153054247.png"
alt="image-20231212153054247" /></p>
<h3 id="supply-independent-biasing">Supply Independent Biasing</h3>
<h4 id="constant-gm">constant-gm</h4>
<blockquote>
<p>aka. <strong>Beta-multiplier reference</strong></p>
</blockquote>
<p><img src="/2023/01/01/insight/image-20231213235846243.png"
alt="image-20231213235846243" /></p>
<h2 id="mosfet-ztc-condition-analysis">MOSFET ZTC Condition
Analysis</h2>
<blockquote>
<p>zero temperature coefficient (ZTC)</p>
</blockquote>
<p><img src="/2023/01/01/insight/image-20231212195536754.png"
alt="image-20231212195536754" /></p>
<h2 id="mom-cap-of-wo_mx">MOM cap of wo_mx</h2>
<p>Monte Carlo model:</p>
<ul>
<li><span class="math inline">\(C_{pa}=C_{pa1}\)</span>, <span
class="math inline">\(C_{pb}=C_{pb1}\)</span> for each iteration during
<em>Process Variation</em></li>
<li>different variation is applied to <span
class="math inline">\(C_{ab}\)</span> and <span
class="math inline">\(C_{a1b1}\)</span> each iteration during
<em>Mismatch Variation</em>, though <span
class="math inline">\(C_{pa}\)</span>, <span
class="math inline">\(C_{pb}\)</span>, <span
class="math inline">\(C_{pa1}\)</span> and <span
class="math inline">\(C_{pb1}\)</span> remain constant</li>
</ul>
<p><img src="/2023/01/01/insight/image-20230220230434891.png"
alt="image-20230220230434891" /></p>
<p><img src="/2023/01/01/insight/image-20230220230331505.png"
alt="image-20230220230331505" /></p>
<h2 id="active-inductor">Active Inductor</h2>
<p><img src="/2023/01/01/insight/activeInd.svg" alt="activeInd" /></p>
<p><span class="math display">\[\begin{align}
A &amp;= \frac{g_mR_L}{1+(g_\text{m_dio}+ g_\text{ds_tot})R_L}\cdot
\frac{1+R_pC_Ps}{1+\frac{(1+g_\text{ds_tot}R_L)R_PC_P+C_PR_L+R_LC_L}{1+(g_\text{m_dio}+g_\text{ds_tot})R_L}s
+ \frac{R_LC_LR_PC_P}{1+(g_\text{m_dio}+g_\text{ds_tot})R_L}s^2} \\
&amp;= \frac{g_mR_L}{1+(g_\text{m_dio}+ g_\text{ds_tot})R_L}\cdot
\frac{R_PC_P}{
\frac{R_LC_LR_PC_P}{1+(g_\text{m_dio}+g_\text{ds_tot})R_L}}\cdot
\frac{1/(R_PC_P)+s}{s^2 +
\frac{(1+g_\text{ds_tot}R_L)R_PC_P+C_PR_L+R_LC_L}{R_PC_P}s +
\frac{1+(g_\text{m_dio}+g_\text{ds_tot})R_L}{R_LC_LR_PC_P}} \\
&amp;= A_0 \cdot A(s)
\end{align}\]</span></p>
<p><span class="math display">\[\begin{align}
\omega_z &amp;= \frac{1}{R_PC_P} \tag{1} \\
\omega_n &amp;=
\sqrt{\frac{1+(g_\text{m_dio}+g_\text{ds_tot})R_L}{R_LC_LR_PC_P}} =
\sqrt{\omega_{p0}\omega_z} \\
\zeta &amp; = \frac{(1+g_\text{ds_tot}R_L)R_PC_P+C_PR_L+R_LC_L}{R_PC_P}
\frac{1}{2 \omega_n}
\end{align}\]</span></p>
<p>Where <span class="math display">\[ \begin{align}
\omega_{p0} &amp;=
\frac{1}{(R_L||\frac{1}{g_\text{m_dio}}||\frac{1}{g_\text{ds_tot}})C_L}  \tag{2}
\end{align}\]</span></p>
<p>Here, relate <span class="math inline">\(\omega_{p0}\)</span> and
<span class="math inline">\(\omega_z\)</span> by coefficient <span
class="math inline">\(\alpha\)</span> <span class="math display">\[
\omega_{p0} = \alpha \cdot  \omega_z \tag{3}
\]</span> This way <span class="math display">\[
\omega_n= \sqrt{\alpha}\cdot \omega_z
\]</span></p>
<p><span class="math display">\[
\zeta = \frac{1}{2}(K\sqrt{\alpha}+\frac{1+C_P/C_L}{\sqrt{\alpha}})
\tag{4}
\]</span> where <span class="math display">\[
K =
\frac{R_L||\frac{1}{g_\text{m\_dio}}||\frac{1}{g_\text{ds\_tot}}}{R_L||g_\text{ds\_tot}}
\\
\]</span></p>
<p>And <span class="math inline">\(A(s)\)</span> can be expressed as
<span class="math display">\[
A(s) =
\frac{\frac{s}{\omega_z}+1}{\frac{s^2}{\omega_n^2}+2\frac{\zeta}{\omega_n}s+1}
\]</span> It magnitude in dB <span class="math display">\[
A_\text{dB} =
10\log\frac{1+(\omega/\omega_z)^2}{1+(\omega/\omega_n)^4+2\omega^2(2\zeta^2-1)/\omega_n^2}
\]</span> Substitute <span class="math inline">\(\omega_n\)</span> with
Eq (2), followed is obtained <span class="math display">\[
A_\text{dB} = 10\log{\frac{\alpha^2(\omega_z^4 +
\omega_z^2\omega^2)}{\alpha^2\omega_z^4+\omega^4+2\alpha\omega_z^2(2\zeta^2-1)\omega^2}}
\]</span> peaking frequency <span class="math display">\[
\omega_\text{peak} = \omega_z\cdot \sqrt{\sqrt{(\alpha+1)^2 - 4\alpha
\zeta^2}-1}
\]</span> If <span class="math inline">\(\zeta=1\)</span> <span
class="math display">\[\begin{align}
\omega_{A_\text{dB = 0dB} }&amp;= \sqrt{1-2/\alpha}\cdot \omega_{p0} \\
\omega_\text{peak} &amp;= \omega_z\sqrt{\alpha-2} \\
A_\text{dB,peak} &amp;= 10\log\frac{\alpha^2}{4(\alpha-1)}
\end{align}\]</span></p>
<h2 id="miller-multiplication-of-capacitor">Miller multiplication of
Capacitor</h2>
<h3 id="positive-cap">Positive Cap</h3>
<p><img src="/2023/01/01/insight/image-20231220225508580.png"
alt="image-20231220225508580" /></p>
<p><img src="/2023/01/01/insight/image-20231220225450481.png"
alt="image-20231220225450481" /></p>
<h3 id="negative-cap">Negative Cap</h3>
<p><img src="/2023/01/01/insight/image-20231220225910283.png"
alt="image-20231220225910283" /></p>
<p><img src="/2023/01/01/insight/image-20231220230015868.png"
alt="image-20231220230015868" /></p>
<h2 id="ds-small-signal-model">D/S small signal model</h2>
<p><img src="/2023/01/01/insight/image-20240106161059584.png"
alt="image-20240106161059584" /></p>
<blockquote>
<p>The <code>Drain</code> and <code>Source</code> of MOS are determined
in <em>DC operating point</em>, i.e. large signal.</p>
</blockquote>
<p>That is, top of <span class="math inline">\(M_2\)</span> is
<code>drain</code> and bottom is <code>source</code>, <span
class="math display">\[\begin{align}
R_\text{eq2} &amp;= \frac{r_\text{o2}+R_L}{1+g_\text{m2}r_\text{o2}} \\
&amp; \simeq  \frac{1}{g_\text{m2}}
\end{align}\]</span></p>
<h2 id="pmos-small-signal-model-polarity">PMOS small signal model
polarity</h2>
<blockquote>
<p>The small-signal models of NMOS and PMOS transistors are
<strong>identical</strong></p>
</blockquote>
<p>A negative <span class="math inline">\(\Delta V_\text{GS}\)</span>
leads to a negative <span class="math inline">\(\Delta I_D\)</span>.</p>
<blockquote>
<p>Recall that <span class="math inline">\(I_D\)</span>, in the
direction shown here, is negative because the actual current of holes
flows from the source to the drain.</p>
<p><img src="/2023/01/01/insight/image-20240106170315177.png"
alt="image-20240106170315177" /></p>
</blockquote>
<p>Conversely, a positive <span class="math inline">\(\Delta
V_\text{GS}\)</span> produces a positive <span
class="math inline">\(\Delta I_D\)</span>, as is the case for an NMOS
device.</p>
<p><img src="/2023/01/01/insight/image-20240106164923917.png"
alt="image-20240106164923917" /></p>
<h2 id="initial-value-theorem-final-value-theorem">Initial Value Theorem
&amp; Final Value Theorem</h2>
<p>Two valuable <em>Laplace transform</em> theorem</p>
<ul>
<li><p>Initial Value Theorem, which states that it is always possible to
determine the <strong>initial value</strong> of the time function <span
class="math inline">\(f(t)\)</span> from its Laplace transform <span
class="math display">\[
\lim _{s\to \infty}sF(s) = f(0^+)
\]</span></p></li>
<li><p>Final Value Theorem allows us to compute the <strong>constant
steady-state value</strong> of a time function given its Laplace
transform <span class="math display">\[
\lim _{s\to 0}sF(s) = f(\infty)
\]</span></p>
<blockquote>
<p>If <span class="math inline">\(f(t)\)</span> is step response, then
<span class="math inline">\(f(0^+) = H(\infty)\)</span> and <span
class="math inline">\(f(\infty) = H(0)\)</span>, where <span
class="math inline">\(H(s)\)</span> is transfer function</p>
</blockquote></li>
</ul>
<h2 id="current-mirror-mismatch">current mirror mismatch</h2>
<p>The current mismatch consists of two components.</p>
<ul>
<li>The first depends on threshold voltage mismatch and increases as the
overdrive <span class="math inline">\((V_{GS} − V_t)\)</span> is
reduced.</li>
<li>The second is geometry dependent and contributes a fractional
current mismatch that is independent of bias point.</li>
</ul>
<p><span class="math display">\[
\Delta I_D = g_m\cdot \Delta V_{TH}+I_D\cdot \frac{\Delta(W/L)}{W/L}
\]</span></p>
<p>where mismatches in <span class="math inline">\(\mu_nC_{ox}\)</span>
are neglected</p>
<p><span class="math display">\[\begin{align}
\Delta V_{TH} &amp;= \frac{A_{VTH}}{\sqrt{WL}} \\
\frac{\Delta(W/L)}{W/L} &amp;= \frac{A_{WL}}{\sqrt{WL}}
\end{align}\]</span></p>
<h3 id="summary">summary</h3>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 7%" />
<col style="width: 8%" />
<col style="width: 14%" />
<col style="width: 28%" />
<col style="width: 4%" />
</colgroup>
<thead>
<tr class="header">
<th>Size</th>
<th><span class="math inline">\(g_m\)</span></th>
<th><span class="math inline">\(\Delta V_{TH}\)</span></th>
<th><span class="math inline">\(\frac{\Delta(W/L)}{W/L}\)</span></th>
<th>mismatch (%)</th>
<th>simu (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>W, L</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td><span
class="math inline">\(I_{\Delta_{V_{TH}}}+I_{\Delta_{WL}}\)</span></td>
<td>3.44</td>
</tr>
<tr class="even">
<td>W, 2L</td>
<td><span class="math inline">\(1/\sqrt{2}\)</span></td>
<td><span class="math inline">\(1/\sqrt{2}\)</span></td>
<td><span class="math inline">\(1/\sqrt{2}\)</span></td>
<td><span
class="math inline">\(I_{\Delta_{V_{TH}}}/2+I_{\Delta_{WL}}/\sqrt{2}\)</span></td>
<td>1.98</td>
</tr>
<tr class="odd">
<td>2W, L</td>
<td><span class="math inline">\(\sqrt{2}\)</span></td>
<td><span class="math inline">\(1/\sqrt{2}\)</span></td>
<td><span class="math inline">\(1/\sqrt{2}\)</span></td>
<td><span
class="math inline">\(I_{\Delta_{V_{TH}}}+I_{\Delta_{WL}}/\sqrt{2}\)</span></td>
<td>2.93</td>
</tr>
<tr class="even">
<td>We get <span class="math inline">\(I_{\Delta_{V_{TH}}}\simeq
1.71\%\)</span> and <span class="math inline">\(I_{\Delta_{WL}} \simeq
1.73\%\)</span></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="/2023/01/01/insight/image-20221003001056211.png"
alt="image-20221003001056211" /></p>
<p><img src="/2023/01/01/insight/image-20221002215942456.png"
alt="image-20221002215942456" /></p>
<h2 id="reference">reference</h2>
<p>M. Tian, V. Visvanathan, J. Hantgan and K. Kundert, "Striving for
small-signal stability," in IEEE Circuits and Devices Magazine, vol. 17,
no. 1, pp. 31-41, Jan. 2001, doi: 10.1109/101.900125.</p>
<p>Open loop gain analysis and "STB" method [<a
target="_blank" rel="noopener" href="https://www.linkedin.com/pulse/open-loop-gain-analysis-stb-method-jean-francois-debroux">https://www.linkedin.com/pulse/open-loop-gain-analysis-stb-method-jean-francois-debroux</a>]</p>
<p>The Analog Designer's Toolbox (ADT) | Invited Talk by IEEE Santa
Clara Valley Section CAS Society, <a
target="_blank" rel="noopener" href="https://youtu.be/FT6kKC5OdE0">https://youtu.be/FT6kKC5OdE0</a></p>
<p>ESSCIRC2023 Circuit Insights Ali Sheikholeslami [<a
target="_blank" rel="noopener" href="https://youtu.be/2xFIZM5_FPw?si=XWwSzDgKWZGB0rX1">https://youtu.be/2xFIZM5_FPw?si=XWwSzDgKWZGB0rX1</a>]</p>
<p>Ali Sheikholeslami, Circuit Intuitions: Thevenin and Norton
Equivalent Circuits, Part 3 IEEE Solid-State Circuits Magazine, Vol. 10,
Issue 4, pp. 7-8, Fall 2018.</p>
<p>Ali Sheikholeslami, Circuit Intuitions: Thevenin and Norton
Equivalent Circuits, Part 2 IEEE Solid-State Circuits Magazine, Vol. 10,
Issue 3, pp. 7-8, Summer 2018.</p>
<p>Ali Sheikholeslami, Circuit Intuitions: Thevenin and Norton
Equivalent Circuits, Part 1 IEEE Solid-State Circuits Magazine, Vol. 10,
Issue 2, pp. 7-8, Spring 2018.</p>
<p>Ali Sheikholeslami, Circuit Intuitions: Miller's Approximation IEEE
Solid-State Circuits Magazine, Vol. 7, Issue 4, pp. 7-8, Fall 2015.</p>
<p>Ali Sheikholeslami, Circuit Intuitions: Miller's Theorem IEEE
Solid-State Circuits Magazine, Vol. 7, Issue 3, pp. 8-10, Summer
2015.</p>
<p>Stephen P. Boyd. EE102 Lecture 10 Sinusoidal steady-state and
frequency response [<a
target="_blank" rel="noopener" href="https://web.stanford.edu/~boyd/ee102/freq.pdf">https://web.stanford.edu/~boyd/ee102/freq.pdf</a>]</p>
<p>Shanthi Pavan, "Demystifying Linear Time Varying Circuits"</p>
<p>ecircuitcenter. Switched-Capacitor Resistor [<a
target="_blank" rel="noopener" href="http://www.ecircuitcenter.com/Circuits/SWCap/SWCap.htm">http://www.ecircuitcenter.com/Circuits/SWCap/SWCap.htm</a>]</p>
<p>Jørgen Andreas Michaelsen. INF4420 Switched-Capacitor Circuits. [<a
target="_blank" rel="noopener" href="https://www.uio.no/studier/emner/matnat/ifi/INF4420/v13/undervisningsmateriale/inf4420_v13_07_switchedcapacitor_print.pdf">https://www.uio.no/studier/emner/matnat/ifi/INF4420/v13/undervisningsmateriale/inf4420_v13_07_switchedcapacitor_print.pdf</a>]</p>
<p>chembiyan T. OC Lecture 10: A very basic introduction to switched
capacitor circuits [<a
target="_blank" rel="noopener" href="https://youtu.be/SaYtemYp4rQ?si=q2qovTKJrLy65pnu">https://youtu.be/SaYtemYp4rQ?si=q2qovTKJrLy65pnu</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/VMwareDiskShrink/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/16/VMwareDiskShrink/" class="post-title-link" itemprop="url">VMware Disk Shrink</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-12-16 15:36:35" itemprop="dateCreated datePublished" datetime="2022-12-16T15:36:35+00:00">2022-12-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-01-29 13:23:05" itemprop="dateModified" datetime="2024-01-29T13:23:05+00:00">2024-01-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>In Guest OS and run</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vmware-toolbox-cmd disk shrink /</span><br></pre></td></tr></table></figure>
<p><a
target="_blank" rel="noopener" href="https://superuser.com/q/211798">https://superuser.com/q/211798</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Guo</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.1/dist/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.2.12/pdfobject.min.js","integrity":"sha256-g2xji1rlE3KsGVClvuxTbcR0Kn2+wtQADSff2Tbb4zA="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>






  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
