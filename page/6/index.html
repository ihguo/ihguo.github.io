<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="KNOW-HOW">
<meta property="og:url" content="http://example.com/page/6/index.html">
<meta property="og:site_name" content="KNOW-HOW">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Guo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/6/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/6/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>KNOW-HOW</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">KNOW-HOW</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Guo</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">163</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/raytroop" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;raytroop" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:raytroop@gmail.com" title="E-Mail → mailto:raytroop@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/04/16/RC-corner/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/16/RC-corner/" class="post-title-link" itemprop="url">RC corner</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-04-16 10:33:42" itemprop="dateCreated datePublished" datetime="2023-04-16T10:33:42+00:00">2023-04-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-27 04:12:03" itemprop="dateModified" datetime="2024-08-27T04:12:03+00:00">2024-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="traditional-rc-corners">Traditional RC Corners</h3>
<p><img src="/2023/04/16/RC-corner/image-20230511232521956.png"
alt="image-20230511232521956" /></p>
<h3 id="dpt-effect">DPT effect</h3>
<p>When using two masks per layer (<strong>Double Patterning Technology,
DPT</strong>) there is an issue of mask alignment where any
mis-alignment will cause layer spacing values to change, therefore
changing the parasitic coupling capacitance values.</p>
<p><img src="/2023/04/16/RC-corner/img_5d04516986340.jpg" /></p>
<p><img src="/2023/04/16/RC-corner/img_5d04516a3ac8b.jpg" /></p>
<blockquote>
<p>Misalignment scale and direction are not deterministic facts:
coupling cap and total cap may be increased or decreased.</p>
</blockquote>
<p><em>Five new corners</em> are added in a <em>DPT</em> flow to account
for RC variations accurately:</p>
<p><img src="/2023/04/16/RC-corner/img_5d04516b03e69.jpg" /></p>
<blockquote>
<p>sapced-dependent side-wall dielectric constant also affect coupling
cap</p>
<p>and <em>CC_worst</em> means to increase both K1 and K2</p>
<p><em>CC_best</em> means to decrease both K1 and K2</p>
</blockquote>
<ul>
<li><p>Setup time sign-off would use:</p>
<p>Cworst_CCworst / RCworst_CCworst</p></li>
<li><p>Hold time sign-off would use:</p>
<p>Cbest_CCbest / RCbest_CCbest / Cworst_CCworst /
RCworst_CCworst</p></li>
</ul>
<p><img src="/2023/04/16/RC-corner/img_5d04516c76593.jpg" /></p>
<p><img src="/2023/04/16/RC-corner/image-20230416143108231.png"
alt="image-20230416143108231" /></p>
<h3 id="signoff-corner">Signoff corner</h3>
<table>
<thead>
<tr class="header">
<th><strong>with misalignment effect</strong></th>
<th>without misalignment effect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>cworst_CCworst, cworst_CCworst_T</td>
<td>cworst, cworst_T</td>
</tr>
<tr class="even">
<td>cbest_CCbest, cbest_CCbest_T</td>
<td>cbest, cbest_T</td>
</tr>
<tr class="odd">
<td>rcworst_CCworst, rcworst_CCworst_T</td>
<td>rcworst, rcworst_T</td>
</tr>
<tr class="even">
<td>rcbest_CCbest, rcbest_CCbest_T</td>
<td>rcbest, rcbest_T</td>
</tr>
</tbody>
</table>
<blockquote>
<p>BEOL Target: typical</p>
</blockquote>
<p>The recommended RC corner:</p>
<p>​ <em>cworst_CCworst, cbest_CCbest, rcworst_CCworst, rcbest_CCbest
and typical</em></p>
<p>The others are for <em>pre-color</em> RC calculation purpose</p>
<p>**_T** stands for <strong>"Tighten DPT corner"</strong>; these are
less pessimistic <strong>1.5 sigma</strong> corners</p>
<p><img src="/2023/04/16/RC-corner/image-20230513001426737.png"
alt="image-20230513001426737" /></p>
<p><img src="/2023/04/16/RC-corner/tmp_fohu0q4.PNG"
alt="tmp_fohu0q4" /></p>
<blockquote>
<p>Below table is caputre of Aragio's TSMC16: LVDS datasheet</p>
<p><img src="/2023/04/16/RC-corner/image-20230416130433181.png"
alt="image-20230416130433181" /></p>
</blockquote>
<h3 id="beol-corner">BEOL corner</h3>
<p><img src="/2023/04/16/RC-corner/image-20230416160822811.png"
alt="image-20230416144136870" /></p>
<blockquote>
<p>Spacing variation is implicitly defined by <span
class="math inline">\(\Delta W_m\)</span>.</p>
</blockquote>
<p>We denote the conductor <em>width and thickness</em> of the layer m
by <span class="math inline">\(W_m\)</span> and <span
class="math inline">\(T_m\)</span>, respectively.</p>
<p>Similarly, we denote the <em>thickness</em> of the layer's interlayer
dielectric (i.e., the distance between layer m and layer m +1) by <span
class="math inline">\(H_m\)</span></p>
<ul>
<li>C-based means <strong>worst and best caps</strong></li>
<li>RC-based means <strong>worst and best R</strong> in <em>adjustment
with C</em> (RC product)</li>
</ul>
<p>Based on experience, it was found that <strong>C-based
extraction</strong> provides worst and best case over RC for internal
timing paths because <em>Capacitance</em> dominates <strong>short
wire</strong>.</p>
<p>However, for large design, inter-block timing paths were often worst
with <strong>RC worst</strong> parasitic since <em>R</em> dominates for
<strong>long wires</strong>.</p>
<p><img src="/2023/04/16/RC-corner/image-20230416155654008.png"
alt="image-20230416155654008" /></p>
<h4 id="signoff-corners-for-setup-and-hold">signoff corners for setup
and hold</h4>
<p><img src="/2023/04/16/RC-corner/tmpwlgwrlq0.PNG"
alt="tmpwlgwrlq0" /></p>
<h3 id="reference">reference</h3>
<p>Modeling Sub-90nm On-Chip Variation Using Monte Carlo Method for DFM
<a
target="_blank" rel="noopener" href="https://www.aspdac.com/aspdac2007/pdf/archive/2D-1.pdf">https://www.aspdac.com/aspdac2007/pdf/archive/2D-1.pdf</a></p>
<p>Double Patterning for IC Design, Extraction and Signoff <a
target="_blank" rel="noopener" href="https://semiwiki.com/eda/synopsys/1974-double-patterning-for-ic-design-extraction-and-signoff/">https://semiwiki.com/eda/synopsys/1974-double-patterning-for-ic-design-extraction-and-signoff/</a></p>
<p>抽刀断水水更流，RC Corner不再愁：STA之RC Corner URL: <a
target="_blank" rel="noopener" href="http://mp.weixin.qq.com/s?__biz=MzUzODczODg2NQ==&amp;mid=2247484115&amp;idx=1&amp;sn=de99f27aadf58ea316c284dad9000b7c&amp;chksm=fad26b0dcda5e21b8c9750f738b55053f695843a66c3c202ff0ba586c738f45aa270254c3722&amp;scene=21#wechat_redirect">http://mp.weixin.qq.com/s?__biz=MzUzODczODg2NQ==&amp;mid=2247484115&amp;idx=1&amp;sn=de99f27aadf58ea316c284dad9000b7c&amp;chksm=fad26b0dcda5e21b8c9750f738b55053f695843a66c3c202ff0ba586c738f45aa270254c3722&amp;scene=21#wechat_redirect</a></p>
<p>一曲新词酒一杯，RC Corner继续飞: STA之RC Corner拾遗 URL:<a
target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzUzODczODg2NQ==&amp;mid=2247484135&amp;idx=2&amp;sn=bddc632850bd10c32b5688fd7af46218&amp;chksm=fad26b39cda5e22f1c3970f8c8c2e1287c9492c526c4caf02b61f61faffdf829381c392d6ea1&amp;scene=21#wechat_redirect">https://mp.weixin.qq.com/s?__biz=MzUzODczODg2NQ==&amp;mid=2247484135&amp;idx=2&amp;sn=bddc632850bd10c32b5688fd7af46218&amp;chksm=fad26b39cda5e22f1c3970f8c8c2e1287c9492c526c4caf02b61f61faffdf829381c392d6ea1&amp;scene=21#wechat_redirect</a></p>
<p>且将新火试新茶，深究趁年华：STA之RC Corner再论 URL:<a
target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzUzODczODg2NQ==&amp;mid=2247484144&amp;idx=1&amp;sn=059843381e77cd4008d25166db388d02&amp;chksm=fad26b2ecda5e23816b33b3a949f34d4ca09118bad76f1089dfcb228b7da6491f423a5f4e703&amp;cur_album_id=1326356275000705025&amp;scene=189#wechat_redirect">https://mp.weixin.qq.com/s?__biz=MzUzODczODg2NQ==&amp;mid=2247484144&amp;idx=1&amp;sn=059843381e77cd4008d25166db388d02&amp;chksm=fad26b2ecda5e23816b33b3a949f34d4ca09118bad76f1089dfcb228b7da6491f423a5f4e703&amp;cur_album_id=1326356275000705025&amp;scene=189#wechat_redirect</a></p>
<p>LDP_IN_800_25V_DN: 1.2GHz LVDS Receiver <a
target="_blank" rel="noopener" href="http://aragiosolutions.com/pdf/rgo_tsmc16_18v25_lvds_product_brief_rev_1a.pdf">http://aragiosolutions.com/pdf/rgo_tsmc16_18v25_lvds_product_brief_rev_1a.pdf</a></p>
<p>Parasitic extraction technologies Advanced node and 3D-IC design <a
target="_blank" rel="noopener" href="https://static.sw.cdn.siemens.com/siemens-disw-assets/public/81845/en-US/Siemens-SW-Parasitic-extraction-technologies-for-advanced-WP-81845-C2.pdf">https://static.sw.cdn.siemens.com/siemens-disw-assets/public/81845/en-US/Siemens-SW-Parasitic-extraction-technologies-for-advanced-WP-81845-C2.pdf</a></p>
<p>New Game, New Goal Posts: A Recent History of Timing Closure <a
target="_blank" rel="noopener" href="https://pdfs.semanticscholar.org/9360/5ce48f9bd3b7527ae8979f41a9c7e310efa4.pdf">https://pdfs.semanticscholar.org/9360/5ce48f9bd3b7527ae8979f41a9c7e310efa4.pdf</a></p>
<p>The Evolution, Pitfalls, and Cargo Cult Engineering of Advanced
Digital Timing Sign-off <a
target="_blank" rel="noopener" href="https://www.tauworkshop.com/2021/speaker_slides/christian_l.pdf">https://www.tauworkshop.com/2021/speaker_slides/christian_l.pdf</a></p>
<p>T. -B. Chan, S. Dobre and A. B. Kahng, "Improved signoff methodology
with tightened BEOL corners," 2014 IEEE 32nd International Conference on
Computer Design (ICCD), Seoul, Korea (South), 2014, pp. 311-316, doi:
10.1109/ICCD.2014.6974699.</p>
<p>Chan, T. (2014). Mitigation of Variability and Reliability Margins in
IC Implementation /. <em>UC San Diego</em>. ProQuest ID:
Chan_ucsd_0033D_14269. Merritt ID: ark:/20775/bb52916761. Retrieved from
<a
target="_blank" rel="noopener" href="https://escholarship.org/uc/item/35r1m001">https://escholarship.org/uc/item/35r1m001</a></p>
<p>Dr. Adam Temanm, Digital VLSI Design:Lecture 10: Routing <a
target="_blank" rel="noopener" href="https://www.eng.biu.ac.il/temanad/files/2017/02/Lecture-10-Routing.pdf">https://www.eng.biu.ac.il/temanad/files/2017/02/Lecture-10-Routing.pdf</a></p>
<p>Article (20487193) Title: Setting Pegasus - LVS to Quantus
av_extracted view Flow with TSMC16 packages URL:
https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O0V000009MprZUAS</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/04/05/clockgating/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/05/clockgating/" class="post-title-link" itemprop="url">Clock Gating</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-04-05 22:14:09" itemprop="dateCreated datePublished" datetime="2023-04-05T22:14:09+00:00">2023-04-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-27 04:12:03" itemprop="dateModified" datetime="2024-08-27T04:12:03+00:00">2024-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/digital/" itemprop="url" rel="index"><span itemprop="name">digital</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><strong>Clock Gating</strong> is defined as: "Clock gating is a
technique/methodology to turn off the clock to certain parts of the
digital design when not needed".</p>
<h3 id="clock-gating-overview">Clock Gating Overview</h3>
<h4 id="and-gate-based-clock-gating">AND gate-based clock gating</h4>
<p>In <em>simplest form</em> a clock gating can be achieved by using an
<em>AND gate</em> as shown in picture below</p>
<p><img src="/2023/04/05/clockgating/AND-gate-based-clock-gating.png"
alt="clock gating" /></p>
<p>However, this simplest form of clock gating technique has some
problem of generating <strong>glitches</strong> in the clock provide to
the FF, which are not desirable.</p>
<p><img src="/2023/04/05/clockgating/Glitches-in-enable-gated-clock.png"
alt="img" /></p>
<blockquote>
<p>Glitches in enable/gated clock</p>
</blockquote>
<h4 id="latch-based-clock-gating">Latch based clock gating</h4>
<p>These glitches can be removed by introducing a negative edge
triggered FF (assuming downstream FFs are positive edge) or low-level
sensitive latch at the output of the clock enable signal.</p>
<p><img src="/2023/04/05/clockgating/Latch-based-clock-gating.png"
alt="clock gating" /></p>
<p>This will make sure that any glitch in the clock enable signal will
not be visible to the gated clock output. The Latch output will only be
updated during the negative clock cycle and thus input to AND gate will
be stable high.</p>
<p><img src="/2023/04/05/clockgating/Glitch-Free-Gated-Clock.png"
alt="clock gating" /></p>
<blockquote>
<p>Glitch Free Gated Clock</p>
</blockquote>
<h3 id="reference">reference</h3>
<p>The Ultimate Guide to Clock Gating <a
target="_blank" rel="noopener" href="https://anysilicon.com/the-ultimate-guide-to-clock-gating/">https://anysilicon.com/the-ultimate-guide-to-clock-gating/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/04/04/dspf-split-pins-emir/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/04/dspf-split-pins-emir/" class="post-title-link" itemprop="url">split pins in dspf_emir</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-04-04 23:54:26" itemprop="dateCreated datePublished" datetime="2023-04-04T23:54:26+00:00">2023-04-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-27 04:12:03" itemprop="dateModified" datetime="2024-08-27T04:12:03+00:00">2024-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/cad/" itemprop="url" rel="index"><span itemprop="name">cad</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="dspf-extract-using-starrc">dspf extract using starrc</h3>
<p>multiple label and rectangle in vssa net</p>
<p><img
src="/2023/04/04/dspf-split-pins-emir/image-20230405003705354.png"
alt="image-20230405003705354" /></p>
<ul>
<li><p>general dspf</p>
<p><code>SHORT_PINS: YES</code></p>
<p><img
src="/2023/04/04/dspf-split-pins-emir/image-20230405002824842.png"
alt="image-20230405002824842" /></p>
<blockquote>
<p>other pin are short together</p>
</blockquote></li>
<li><p>dspf for emir analysis</p></li>
</ul>
<p><img
src="/2023/04/04/dspf-split-pins-emir/image-20230405000013461.png"
alt="image-20230405000013461" /></p>
<p><img
src="/2023/04/04/dspf-split-pins-emir/image-20230405001944418.png"
alt="image-20230405001944418" /></p>
<p><img
src="/2023/04/04/dspf-split-pins-emir/image-20230405230611522.png"
alt="image-20230405230611522" /></p>
<blockquote>
<p>It seems that dspf_emir <strong>don't</strong> contain the
<em>rectangle pin</em> information.</p>
<p>only <strong>label</strong> is necessary</p>
</blockquote>
<table style="width:100%;">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 26%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="header">
<th>setup</th>
<th></th>
<th></th>
<th>spectre result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>netlist type</strong></td>
<td><strong>dspf option</strong></td>
<td><strong>emir analysis</strong></td>
<td></td>
</tr>
<tr class="even">
<td>dspf</td>
<td>/</td>
<td>disable</td>
<td>✓</td>
</tr>
<tr class="odd">
<td>dspf_emir</td>
<td>/</td>
<td>disable</td>
<td>✗</td>
</tr>
<tr class="even">
<td>dspf_emir</td>
<td>=shortPins=”yes”</td>
<td>disable</td>
<td>✓</td>
</tr>
<tr class="odd">
<td>dspf_emir</td>
<td>=shortPins=”no”</td>
<td>disable</td>
<td>✗</td>
</tr>
<tr class="even">
<td>dspf_emir</td>
<td>/</td>
<td>enable</td>
<td>✓</td>
</tr>
<tr class="odd">
<td>dspf_emir</td>
<td>=shortPins=”yes”</td>
<td>enable</td>
<td>✓</td>
</tr>
<tr class="even">
<td>dspf_emir</td>
<td>=shortPins=”no”</td>
<td>enable</td>
<td>✓</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>shortPins=”yes”</strong> is preferred default option for
dspf_emir, which has <strong>split pins</strong></p>
</blockquote>
<p><img
src="/2023/04/04/dspf-split-pins-emir/image-20230405005151550.png"
alt="image-20230405005151550" /></p>
<h3 id="dspf-syntax">DSPF Syntax</h3>
<ul>
<li><p><pin_def>::=*<strong>|P <pin_element>?</strong> <pin_element>
describes pins in the net. Multiple pin descriptions can be listed in
one line.</p></li>
<li><p><pin_element>::=(<pinName> <pinType> <pinCap> {<coord>}?)
<pinName> represents the name of the pin. <pinType> represents the type
of the pin. It can be any of the following: I (Input), O (Output),</p>
<p>​ B (Bidirectional), X (don’t care), S (Switch), and J (Jumper). ​
<pinCap> represents the capacitance value associated with the pin. ​
<coord> is optional. It represents the location of the pin. Multiple pin
locations are allowed</p></li>
</ul>
<h4 id="split-pins">split pins</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*|P (avss_1 O 0 207.7555 59.9170)</span><br><span class="line">*|P (avss_10 O 0 181.1610 151.1130)</span><br><span class="line">*|P (avss_11 O 0 186.6330 151.1130)</span><br><span class="line">*|P (avss_12 O 0 192.1050 151.1130)</span><br><span class="line">*|P (avss_13 O 0 197.5770 151.1130)</span><br></pre></td></tr></table></figure>
<h3 id="reference">reference</h3>
<p>Article (20467964) Title: Difference in result on running Spectre APS
with EMIR and without EMIR analysis URL: <a
target="_blank" rel="noopener" href="https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O0V00000679GRUAY">https://support.cadence.com/apex/ArticleAttachmentPortal?id=a1O0V00000679GRUAY</a></p>
<p>StarRC User Guide and Command Reference Version O-2018.06, June
2018</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/02/10/dont-touch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/02/10/dont-touch/" class="post-title-link" itemprop="url">How to preserve hand-instantiated cells</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-02-10 22:41:15" itemprop="dateCreated datePublished" datetime="2023-02-10T22:41:15+00:00">2023-02-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-27 04:12:03" itemprop="dateModified" datetime="2024-08-27T04:12:03+00:00">2024-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/digital/" itemprop="url" rel="index"><span itemprop="name">digital</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>To preserve the hand-instantiated cells</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_dont_touch [get_cells -hierarchical *dont_touch_*]</span><br></pre></td></tr></table></figure>
<p>The instances whose name contain "dont_touch_" shall be preserved
during synthesis</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// no performace concerns, rest sync use sync3 is enough</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">module</span> CN_resetb_sync_cell</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">input</span> resetb_in,</span><br><span class="line">    <span class="keyword">input</span> clkdst,</span><br><span class="line">    <span class="keyword">output</span> resetb_out</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="meta">`<span class="keyword">ifdef</span> USE_VERILOG</span></span><br><span class="line"><span class="keyword">reg</span> [<span class="number">2</span>:<span class="number">0</span>] resetb_dly;</span><br><span class="line"><span class="meta">`<span class="keyword">else</span></span></span><br><span class="line"><span class="keyword">wire</span> [<span class="number">2</span>:<span class="number">0</span>] resetb_dly;</span><br><span class="line"><span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">`<span class="keyword">ifdef</span> USE_VERILOG</span></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clkdst <span class="keyword">or</span> <span class="keyword">negedge</span> resetb_in)</span><br><span class="line">    <span class="keyword">if</span> (~resetb_in) resetb_dly &lt;= <span class="number">3&#x27;b000</span>;</span><br><span class="line">    <span class="keyword">else</span> resetb_dly &lt;= &#123;resetb_dly[<span class="number">1</span>:<span class="number">0</span>], <span class="number">1&#x27;b1</span>&#125;;</span><br><span class="line"><span class="meta">`<span class="keyword">else</span></span></span><br><span class="line">SDFCNQD4 dont_touch_sync_flop0 (</span><br><span class="line">    <span class="variable">.SI</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="variable">.SE</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="variable">.CP</span>(clkdst),</span><br><span class="line">    <span class="variable">.CDN</span>(resetb_in),</span><br><span class="line">    <span class="variable">.D</span>(<span class="number">1&#x27;b1</span>),</span><br><span class="line">    <span class="variable">.Q</span>(resetb_dly[<span class="number">0</span>])</span><br><span class="line">);</span><br><span class="line">SDFCNQD4 dont_touch_sync_flop1 (</span><br><span class="line">    <span class="variable">.SI</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="variable">.SE</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="variable">.CP</span>(clkdst),</span><br><span class="line">    <span class="variable">.CDN</span>(resetb_in),</span><br><span class="line">    <span class="variable">.D</span>(resetb_dly[<span class="number">0</span>]),</span><br><span class="line">    <span class="variable">.Q</span>(resetb_dly[<span class="number">1</span>])</span><br><span class="line">);</span><br><span class="line">SDFCNQD4 dont_touch_sync_flop2 (</span><br><span class="line">    <span class="variable">.SI</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="variable">.SE</span>(<span class="number">1&#x27;b0</span>),</span><br><span class="line">    <span class="variable">.CP</span>(clkdst),</span><br><span class="line">    <span class="variable">.CDN</span>(resetb_in),</span><br><span class="line">    <span class="variable">.D</span>(resetb_dly[<span class="number">1</span>]),</span><br><span class="line">    <span class="variable">.Q</span>(resetb_dly[<span class="number">2</span>])</span><br><span class="line">);</span><br><span class="line"><span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">assign</span> resetb_out = resetb_dly[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/29/dspf-in-corner/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/29/dspf-in-corner/" class="post-title-link" itemprop="url">different DSPF files for each corner</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-01-29 22:25:20" itemprop="dateCreated datePublished" datetime="2023-01-29T22:25:20+00:00">2023-01-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-27 04:12:03" itemprop="dateModified" datetime="2024-08-27T04:12:03+00:00">2024-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/cad/" itemprop="url" rel="index"><span itemprop="name">cad</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Create a new file with an extension <strong>scs</strong> like
<em>myDSPF_Files.scs</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">* DSPF files to use with Corner Definitions</span><br><span class="line">* This is an example file showing how to define different dspf files for different corners</span><br><span class="line">* using model files for individual components as the</span><br><span class="line">* building blocks.</span><br><span class="line">simulator lang=spectre</span><br><span class="line">library dspf_files_corners</span><br><span class="line"></span><br><span class="line">section rctyp_25</span><br><span class="line">dspf_include &quot;DSPF_RC_TYPNOM25.spf&quot;</span><br><span class="line">endsection rctyp_25</span><br><span class="line"></span><br><span class="line">section rctyp_125</span><br><span class="line">dspf_include &quot;DSPF_RC_TYP125.spf&quot;</span><br><span class="line">endsection rctyp_125</span><br><span class="line"></span><br><span class="line">section rcworst_25</span><br><span class="line">dspf_include &quot;DSPF_RC_WORSE25.spf&quot;</span><br><span class="line">end section rcworst_25</span><br><span class="line"></span><br><span class="line">section rcworst_125</span><br><span class="line">dspf_include &quot;DSPF_RC_WORSE125.spf&quot;</span><br><span class="line">end section rcworst_125</span><br><span class="line"></span><br><span class="line">endlibrary dspf_files_corners</span><br></pre></td></tr></table></figure>
<p>Add the file created above ‘<em>myDSPF_File.scs</em>’ in
‘<em>Add/Edit Model Files</em>’ of Corners setup form</p>
<p><img src="/2023/01/29/dspf-in-corner/image-20230129223248655.png"
alt="image-20230129223248655" /></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/14/ModelLibrarySetup/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/14/ModelLibrarySetup/" class="post-title-link" itemprop="url">Model Library Setup</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-01-14 21:59:30" itemprop="dateCreated datePublished" datetime="2023-01-14T21:59:30+00:00">2023-01-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-27 04:12:03" itemprop="dateModified" datetime="2024-08-27T04:12:03+00:00">2024-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/cad/" itemprop="url" rel="index"><span itemprop="name">cad</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>In order to set up model files automatically in the <em>Model Library
Setup</em> form for Spectre or AMS simulator in ADE Explorer or ADE
Assembler</p>
<p>Add the following line in your <code>.cdsinit</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">envSetVal( &quot;spectre.envOpts&quot; &quot;modelFiles&quot; &#x27;string &quot;&lt;path_to model_file&gt;/myModels.scs&quot;)</span><br></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">envSetVal(&quot;spectre.envOpts&quot; &quot;modelFiles&quot; &#x27;string &quot;moreModels;ff mymodels;tt&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="/2023/01/14/ModelLibrarySetup/image-20230114220458438.png"
alt="image-20230114220458438" /></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/03/pole-splitting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/03/pole-splitting/" class="post-title-link" itemprop="url">pole splitting</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-01-03 22:31:41" itemprop="dateCreated datePublished" datetime="2023-01-03T22:31:41+00:00">2023-01-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-27 04:12:03" itemprop="dateModified" datetime="2024-08-27T04:12:03+00:00">2024-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="generic-circuit-in-textbook">Generic circuit in textbook</h3>
<p>In addition to <em>lowering</em> the required capacitor value, Miller
compensation entails a very important property: it moves the output pole
<em>away from the origin</em>. This effect is called <strong>pole
splitting</strong></p>
<p><img src="/2023/01/03/pole-splitting/image-20230103223438823.png"
alt="image-20230103223438823" /></p>
<p>The 1st stage is replaced with Thevenin equivalent circuit , <span
class="math inline">\(V_i \cong V_i \cdot g_{m1}R_{o1}\)</span></p>
<p><span class="math display">\[\begin{align}
\frac{V_i-V_{o1}}{R_{o1}} &amp;= V_{o1}\cdot sC_{o1}+(V_{o1}-V_o)\cdot
sC_c \\
V_{o1} &amp;= \frac{V_i+sR_{o1}C_cV_o}{1+sR_{o1}(C_{o1}+C_c)}
\end{align}\]</span> <span class="math display">\[
(V_{o1}-V_o)sC_c=g_{m2}V_{o1}+V_o(\frac{1}{R_{o2}+sC_L})
\]</span> substitute <span class="math inline">\(V_{o1}\)</span>, we
get</p>
<p><span class="math display">\[\begin{align}
\frac{V_o}{V_i} &amp;=
\frac{(sC_c-g_{m2})R_{o2}}{s^2R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)+s\left\{
R_{o1}C_c\cdot g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c) \right\}
+1} \\
&amp;=
\frac{g_{m2}R_{o2}(s\frac{C_c}{g_{m2}}-1)}{s^2R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)+s\left\{
R_{o1}C_c\cdot g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c) \right\}
+1}
\end{align}\]</span></p>
<p>left hand plane poles</p>
<p><span class="math display">\[\begin{align}
\omega_1 &amp;= \frac{1}{R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c)} \\
\omega_2 &amp;= \frac{R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c)}{R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)}
\end{align}\]</span></p>
<p>and RHP (<em>right</em>-<em>hand plane</em>) zero <span
class="math display">\[
\omega_z=\frac{g_{m2}}{C_c}
\]</span></p>
<h3 id="the-circuit-with-series-switch">The circuit with series
switch</h3>
<p><img src="/2023/01/03/pole-splitting/image-20230103230122637.png"
alt="image-20230103230122637" /></p>
<p>replace <span class="math inline">\(sC_L\)</span> with <span
class="math inline">\(1/(R_{sw}+\frac{1}{sC_L})\)</span> <span
class="math display">\[\begin{align}
\frac{V_{o2}}{V_i} &amp;=
\frac{g_{m2}R_{o2}(s\frac{C_c}{g_{m2}}-1)(1+sR_{sw}C_L)}{s^3R_{o1}R_{o2}R_{sw}C_{o1}C_cC_L+s^2\left\{R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)+
\left[ R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+0)+R_{o1}(C_{o1}+C_c)\right]R_{sw}C_L
\right\}+s\left\{ R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c) +R_{sw}C_L\right\} +1}
\end{align}\]</span> Due to <span class="math display">\[
\frac{V_o}{V_{o2}} =
\frac{\frac{1}{sC_L}}{R_{sw}+\frac{1}{sC_L}}=\frac{1}{1+sR_{sw}C_L}
\]</span> Then <span class="math display">\[\begin{align}
\frac{V_o}{V_i} &amp;= \frac{V_{o2}}{V_i} \cdot \frac{V_o}{V_{o2}} \\
&amp;=
\frac{g_{m2}R_{o2}(s\frac{C_c}{g_{m2}}-1)}{s^3R_{o1}R_{o2}R_{sw}C_{o1}C_cC_L+s^2\left\{R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)+
\left[ R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+0)+R_{o1}(C_{o1}+C_c)\right]R_{sw}C_L
\right\}+s\left\{ R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c) +R_{sw}C_L\right\} +1}
\end{align}\]</span></p>
<h3 id="r_sw-and-r_c"><span class="math inline">\(R_{sw}\)</span> and
<span class="math inline">\(R_c\)</span></h3>
<p><img src="/2023/01/03/pole-splitting/image-20230103232837318.png"
alt="image-20230103232837318" /></p>
<p><span class="math display">\[\begin{align}
\frac{V_{o2}}{V_i}
&amp;=-g_{m2}R_{o2}\frac{sC_c(R_c-1/g_{m2})+1}{(1+sR_{o1}C_{o1})sR_{o2}C_c+sR_{o1}\cdot
g_{m2}R_{o2}C_c+\frac{s(R_{o2}+R_{sw})C_L+1}{sR_{sw}C_L+1}\left[(1+sR_{o1}C_{o1})(1+sR_cC_c)+sR_{o1}C_c
\right]} \\
&amp;=-g_{m2}R_{o2}\frac{sC_c(R_c-1/g_{m2})+1}{s^2R_{o1}R_{o2}C_{o1}C_c+sR_{o2}C_c+sR_{o1}\cdot
g_{m2}R_{o2}C_c+\frac{s(R_{o2}+R_{sw})C_L+1}{sR_{sw}C_L+1}\left[(1+sR_{o1}C_{o1})(1+sR_cC_c)+sR_{o1}C_c
\right]} \\
&amp;=-g_{m2}R_{o2}\frac{\left[ sC_c(R_c-1/g_{m2})+1
\right](sR_{sw}C_L+1)}{s^2R_{o1}R_{o2}C_{o1}C_c(sR_{sw}C_L+1)+sR_{o2}C_c(sR_{sw}C_L+1)+sR_{o1}\cdot
g_{m2}R_{o2}C_c(sR_{sw}C_L+1)+\left[s(R_{o2}+R_{sw})C_L+1\right]\left[(1+sR_{o1}C_{o1})(1+sR_cC_c)+sR_{o1}C_c
\right]}
\end{align}\]</span></p>
<p><span class="math inline">\(s^3\)</span> terms in denominator <span
class="math display">\[
H_3 = s^3\cdot(R_{o1}R_{o2}R_c+R_{o1}R_{o2}R_{sw} +R_{o1}R_cR_{sw})\cdot
C_{o1}C_cC_L
\]</span> <span class="math inline">\(s^2\)</span> terms in denominator
<span class="math display">\[\begin{align}
H_2
&amp;=s^2\cdot(R_{o1}R_{o2}C_{o1}C_c+R_{o1}R_{o2}C_{o1}C_L+R_{o2}R_cC_cC_L+R_{o1}R_{o2}C_cC_L+R_{o1}R_cC_{o1}C_c\\
&amp;+R_{o2}R_{sw}C_cC_L+R_{o1}R_{sw}C_cC_L\cdot
g_{m2}R_{o2}+R_{o1}R_{sw}C_{o1}C_L+R_{sw}R_cC_cC_L+R_{o1}R_{sw}C_cC_L)
\end{align}\]</span></p>
<p><span class="math inline">\(s^1\)</span> term in denominator <span
class="math display">\[
H_1=s(R_{o1}\cdot
g_{m2}R_{o2}C_c+R_{o1}C_{o1}+R_cC_c+R_{o1}C_c+R_{o2}C_c+R_{o2}C_L+R_{sw}C_L)
\]</span> <span class="math inline">\(s^0\)</span> term in denominator
<span class="math display">\[
H_0=1
\]</span> set <span class="math inline">\(R_c=0\)</span> and <span
class="math inline">\(R_{sw}=0\)</span>, the <span
class="math inline">\(H_*\)</span> reduced to <span
class="math display">\[\begin{align}
H_3 &amp;= 0 \\
H_2 &amp;=s^2R_{o1}R_{o2}(C_{o1}C_c+C_{o1}C_L+C_cC_L) \\
H_1&amp;=s(R_{o1}\cdot
g_{m2}R_{o2}C_c+R_{o1}C_{o1}+R_{o1}C_c+R_{o2}C_c+R_{o2}C_L) \\
H_0&amp;=1
\end{align}\]</span> That is <span class="math display">\[
H=s^2R_{o1}R_{o2}(C_{o1}C_c+C_{o1}C_L+C_cC_L)+s(R_{o1}\cdot
g_{m2}R_{o2}C_c+R_{o1}C_{o1}+R_{o1}C_c+R_{o2}C_c+R_{o2}C_L)+1
\]</span></p>
<p>which is same with our previous analysis of <em>Generic circuit in
textbook</em></p>
<p>And we know <span class="math display">\[
\frac{V_o}{V_{o2}}=\frac{1}{1+sR_{sw}C_L}
\]</span> Finally, we get <span
class="math inline">\(\frac{V_o}{V_i}\)</span> <span
class="math display">\[\begin{align}
\frac{V_o}{V_i} &amp;= \frac{V_{o2}}{V_i} \cdot \frac{V_o}{V_{o2}} \\
&amp;= -g_{m2}R_{o2}\frac{\left[ sC_c(R_c-1/g_{m2})+1
\right](sR_{sw}C_L+1)}{H_3+H_2+H_1+1} \cdot \frac{1}{1+sR_{sw}C_L} \\
&amp;= -g_{m2}R_{o2}\frac{ sC_c(R_c-1/g_{m2})+1}{H_3+H_2+H_1+1}
\end{align}\]</span></p>
<p>The loop transfer function is <span class="math display">\[
\frac{V_o}{V_i} =-g_{m1}R_{o1}g_{m2}R_{o2}\frac{
sC_c(R_c-1/g_{m2})+1}{H_3+H_2+H_1+1}
\]</span></p>
<h4 id="vccs-model">vccs model</h4>
<p><img src="/2023/01/03/pole-splitting/image-20230106214027323.png"
alt="image-20230106214027323" /></p>
<h4 id="simplify-the-transfer-function">simplify the transfer
function</h4>
<h5 id="omit-c_o1">omit <span class="math inline">\(C_{o1}\)</span></h5>
<p>We omit <span class="math inline">\(C_{o1}\)</span> in frequency
range of interest</p>
<p><span class="math display">\[\begin{align}
H_3 &amp;= 0 \\
H_2 &amp;=s^2(R_{o2}R_c+R_{o1}R_{o2}+R_{o2}R_{sw}+R_{o1}R_{sw}\cdot
g_{m2}R_{o2}+R_{sw}R_c+R_{o1}R_{sw})\cdot C_cC_L \\
H_1 &amp;=s(R_{o1}\cdot
g_{m2}R_{o2}C_c+R_cC_c+R_{o1}C_c+R_{o2}C_c+R_{o2}C_L+R_{sw}C_L) \\
H_0 &amp;= 1
\end{align}\]</span></p>
<blockquote>
<p>two poles and 1 zero</p>
</blockquote>
<p><img src="/2023/01/03/pole-splitting/image-20230105221058404.png"
alt="image-20230105221058404" /></p>
<h5 id="more-simplification">more simplification</h5>
<p>Then, some terms can be omitted</p>
<p><span class="math display">\[\begin{align}
H_2 &amp;=s^2R_{o1}R_{o2}(1+g_{m2}R_{sw})\cdot C_cC_L \\
H_1 &amp;=sR_{o1}\cdot g_{m2}R_{o2}C_c \\
H_0 &amp;= 1
\end{align}\]</span></p>
<p>The poles can be deduced <span class="math display">\[\begin{align}
\omega_1 &amp;= \frac{1}{R_{o1}\cdot g_{m2}R_{o2}C_c} \\
\omega_2 &amp;= \frac{1}{1+g_{m2}R_{sw}}\cdot \frac{g_{m2}}{C_L} \\
&amp;= \frac{1}{(gm_2^{-1}+R_{sw})C_L}
\end{align}\]</span></p>
<p>The pole <span
class="math inline">\(\omega_2=\frac{1}{gm_2^{-1}C_L}\)</span> is
changed to <span
class="math inline">\(\omega_2=\frac{1}{(gm_2^{-1}+R_{sw})C_L}\)</span></p>
<blockquote>
<p>In order to cancell <span class="math inline">\(\omega_2\)</span>
with <span class="math inline">\(\omega_z\)</span>, <span
class="math inline">\(R_c\)</span> shall be increased</p>
</blockquote>
<p><span class="math display">\[
R_{eq}=g_{m2}^{-1}+R_{sw}
\]</span> <img src="/2023/01/03/pole-splitting/fndRsw.drawio.svg"
alt="fndRsw.drawio.svg" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105221201876.png"
alt="image-20230105221201876" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105220034632.png"
alt="image-20230105220034632" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105220102170.png"
alt="image-20230105220102170" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105220119502.png"
alt="image-20230105220119502" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105221805322.png"
alt="image-20230105221805322" /></p>
<blockquote>
<p><strong>omit <span class="math inline">\(C_{o1}\)</span></strong> is
same with <strong>2nd system</strong> simplification</p>
</blockquote>
<h3 id="non-dominant-pole-in-sansens-book">non-dominant pole in Sansen's
book</h3>
<p><img src="/2023/01/03/pole-splitting/image-20230103231300609.png"
alt="image-20230103231300609" /></p>
<p>Following demonstrate how derive <span
class="math inline">\(f_{nd}\)</span> from Razavi's equation. We copy
<span class="math inline">\(\omega_2\)</span> here <span
class="math display">\[
\omega_2 = \frac{R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c)}{R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)}
\]</span> which can be reduced as below</p>
<p><span class="math display">\[\begin{align}
\omega_2 &amp;= \frac{R_{o1}C_c\cdot
g_{m2}R_{o2}+R_{o2}(C_c+C_L)+R_{o1}(C_{o1}+C_c)}{R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)}
\\
&amp;= \frac{R_{o1}C_c\cdot
g_{m2}R_{o2}}{R_{o1}R_{o2}(C_cC_{o1}+C_LC_{o1}+C_LC_c)} \\
&amp;= \frac{C_c\cdot g_{m2}}{C_cC_{o1}+C_LC_{o1}+C_LC_c} \\
&amp;= \frac{g_{m2}}{C_{o1}+C_L\frac{C_{o1}}{C_c}+C_L} \\
&amp;= \frac{g_{m2}}{C_L\frac{C_{o1}}{C_c}+C_L} \\
&amp;= \frac{g_{m2}}{C_L} \cdot \frac{1}{1+\frac{C_{o1}}{C_c}}
\end{align}\]</span></p>
<p><img src="/2023/01/03/pole-splitting/image-20230129221424763.png"
alt="image-20230129221424763" /></p>
<h3 id="exercise-of-2-stage-opamp">Exercise of 2-stage opamp</h3>
<p><img src="/2023/01/03/pole-splitting/image-20230105001747174.png"
alt="image-20230105001747174" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105001758050.png"
alt="image-20230105001758050" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105001812304.png"
alt="image-20230105001812304" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105001849554.png"
alt="image-20230105001849554" /></p>
<blockquote>
<p><span class="math inline">\(R_{o1}\)</span> and <span
class="math inline">\(R_{o2}\)</span> don't affect stability, if <span
class="math inline">\(f_{nd}&gt;3\text{GBW}\)</span></p>
<p>DC gain: <span
class="math inline">\(g_{m1}g_{m2}R_{o1}R_{o2}\)</span></p>
<p>dominant pole: <span
class="math inline">\(\omega_d=\frac{1}{R_{o1}\cdot
g_{m2}R_{o2}C_c}\)</span></p>
</blockquote>
<p><img src="/2023/01/03/pole-splitting/image-20230105001923985.png"
alt="image-20230105001923985" /></p>
<p><img src="/2023/01/03/pole-splitting/image-20230105002653735.png"
alt="image-20230105002653735" /></p>
<blockquote>
<p><span
class="math inline">\(20log_{10}(1.414^2)=6\text{dB}\)</span></p>
</blockquote>
<h3 id="reference">reference</h3>
<p>Razavi, Behzad. Design of Analog CMOS Integrated Circuits. India:
McGraw-Hill, 2017.</p>
<p>Sansen, Willy M. Analog Design Essentials. Germany: Springer US,
2006.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/01/insight/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/01/insight/" class="post-title-link" itemprop="url">Circuit insight</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-01-01 17:50:13" itemprop="dateCreated datePublished" datetime="2023-01-01T17:50:13+00:00">2023-01-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-27 04:12:03" itemprop="dateModified" datetime="2024-08-27T04:12:03+00:00">2024-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="transmission-lines">Transmission Lines</h2>
<p>Distributed ESD Protection</p>
<p><em>TODO</em> 📅</p>
<h2 id="r-2r-c-2c">R-2R &amp; C-2C</h2>
<p><em>TODO</em> 📅</p>
<blockquote>
<p>B. Razavi, "The R-2R and C-2C Ladders [A Circuit for All Seasons],"
in <em>IEEE Solid-State Circuits Magazine</em>, vol. 11, no. 3, pp.
10-15, Summer 2019 [<a
target="_blank" rel="noopener" href="https://www.seas.ucla.edu/brweb/papers/Journals/BR_SSCM_3_2019.pdf">https://www.seas.ucla.edu/brweb/papers/Journals/BR_SSCM_3_2019.pdf</a>]</p>
</blockquote>
<h2 id="early-voltage-indicator">Early Voltage indicator</h2>
<p><span class="math display">\[
g_m r_o = \frac{g_m}{I_D}I_D\frac{V_A}{I_D} =  \frac{g_m}{I_D} \cdot V_A
\]</span></p>
<p>$g_m r_o $ is the indicator of <span
class="math inline">\(V_A\)</span>, if <span
class="math inline">\(\frac{g_m}{I_D}\)</span> is same</p>
<h2 id="resonator">Resonator</h2>
<p><img src="/2023/01/01/insight/image-20240826223955851.png"
alt="image-20240826223955851" /></p>
<p><img src="/2023/01/01/insight/image-20240826224132736.png"
alt="image-20240826224132736" /></p>
<p><img src="/2023/01/01/insight/image-20240826224317197.png"
alt="image-20240826224317197" /></p>
<hr />
<p><img src="/2023/01/01/insight/image-20240826224651954.png"
alt="image-20240826224651954" /></p>
<p><img src="/2023/01/01/insight/image-20240826224823886.png"
alt="image-20240826224823886" /></p>
<p><em>bandpass filter</em></p>
<blockquote>
<p>Hossein Hashemi, RF Circuits, [<a
target="_blank" rel="noopener" href="https://youtu.be/0f3yZMvD2Jg?si=2c1Q4y6WJq8Jj8oN">https://youtu.be/0f3yZMvD2Jg?si=2c1Q4y6WJq8Jj8oN</a>]</p>
</blockquote>
<h2 id="linearization-of-resistive-degeneration">Linearization of
resistive degeneration</h2>
<p><em>Resistive degeneration</em> in differential pairs serves as one
major technique for linear amplifier</p>
<p><img src="/2023/01/01/insight/image-20240824132739726.png"
alt="image-20240824132739726" /></p>
<p>The linear region for CMOS differential pair would be extended by
<span class="math inline">\(±I_{SS}R/2\)</span> as all of <span
class="math inline">\(I_{SS}/2\)</span> flows through <span
class="math inline">\(R\)</span>. <span
class="math display">\[\begin{align}
V_{in}^+ -V_{in}^-  &amp;= V_{OV} + V_{TH}+\frac{I_{SS}}{2}R - V_{TH} \\
&amp;= \sqrt{\frac{2I_{SS}}{\mu_nC_{OX}\frac{W}{L}}} + \frac{I_{SS}R}{2}
\end{align}\]</span></p>
<blockquote>
<p><strong>Jri Lee</strong>, "Communication Integrated Circuits." <a
target="_blank" rel="noopener" href="https://cc.ee.ntu.edu.tw/~jrilee/publications/Comm_IC.pdf">https://cc.ee.ntu.edu.tw/~jrilee/publications/Comm_IC.pdf</a></p>
</blockquote>
<h2 id="tia">TIA</h2>
<p><img src="/2023/01/01/insight/image-20240824111517140.png"
alt="image-20240824111517140" /></p>
<p><span class="math display">\[\begin{align}
I_{in} &amp;= \frac{V_i}{R_S} + \frac{V_i - V_o}{R_F} \\
\frac{V_i - V_o}{R_F} &amp;= g_m V_i
\end{align}\]</span></p>
<p>Then</p>
<p><span class="math display">\[\begin{align}
V_o &amp;= \frac{I_{in}R_F}{\frac{R_S+R_F}{R_S}\frac{1}{1-g_mR_F}- 1} \\
V_i &amp;= \frac{I_{in}R_F}{\frac{R_F}{R_S}+g_mR_F}
\end{align}\]</span> If <span class="math inline">\(R_S \gg R_F\)</span>
<span class="math display">\[\begin{align}
V_o &amp;= \frac{I_{in}}{g_m}(1-g_mR_F) \\
V_i &amp;= \frac{I_{in}}{g_m}
\end{align}\]</span></p>
<h2 id="cgd-of-common-source-stage">Cgd of Common-Source Stage</h2>
<p>pay attention to Miller effect of Cgd during <em>layout</em></p>
<h2 id="nonlinearity-of-differential-circuits">Nonlinearity of
Differential Circuits</h2>
<p><img src="/2023/01/01/insight/image-20240804173949430.png"
alt="image-20240804173949430" /></p>
<blockquote>
<p><img src="/2023/01/01/insight/image-20240804174042088.png"
alt="image-20240804174042088" /></p>
</blockquote>
<h2 id="vco-varactor">VCO varactor</h2>
<blockquote>
<p>Two methods: 1. pss + pac; 2. pss+psp</p>
</blockquote>
<h3 id="pss-pac">PSS + PAC</h3>
<p><img src="/2023/01/01/insight/image-20220510192206354.png"
alt="image-20220510192206354" /></p>
<p>pss time domain</p>
<p><img src="/2023/01/01/insight/image-20220510192351590.png"
alt="image-20220510192351590" /></p>
<p>using the <strong>0-harmonic</strong></p>
<p><img src="/2023/01/01/insight/image-20220510192447040.png"
alt="image-20220510192447040" /></p>
<h3 id="pss-psp">PSS + PSP</h3>
<p><img src="/2023/01/01/insight/image-20220510192753324.png"
alt="image-20220510192753324" /></p>
<p>using <strong>Y11</strong> of <code>psp</code></p>
<p><img src="/2023/01/01/insight/image-20220510192639080.png"
alt="image-20220510192639080" /></p>
<h3 id="results">results</h3>
<p><img src="/2023/01/01/insight/image-20220510193036717.png"
alt="image-20220510193036717" /></p>
<blockquote>
<p>which are same</p>
</blockquote>
<h2 id="zero-in-differential-pair-with-active-current-mirror">Zero in
differential pair with active current mirror</h2>
<p><img src="/2023/01/01/insight/image-20240629103021286.png"
alt="image-20240629103021286" /></p>
<p>Noting the circuit consists of a "slow path" (M1, M3, M4) in parallel
with a "fast path" (M2)</p>
<ul>
<li><p>"slow path" <span class="math display">\[
H_\text{slow}(s) = \frac{A_0}{(1+s/\omega _{pE})(1+s/\omega _{pO})}
\]</span></p></li>
<li><p>"fast path" <span class="math display">\[
H_\text{fast}(s) = \frac{A_0}{1+s/\omega _{pO}}
\]</span></p></li>
</ul>
<p>Then <span class="math display">\[\begin{align}
\frac{V_\text{out}}{V_\text{in}} &amp;= H_\text{slow}(s) +
H_\text{fast}(s) \\
&amp;= \frac{A_0}{1+s/\omega _{pO}}\left(\frac{1}{1+s/\omega _{pE}} + 1
\right) \\
&amp;= \frac{A_0(1+s/2\omega _{pE})}{(1+s/\omega _{pO})(1+s/\omega
_{pE})}
\end{align}\]</span></p>
<p>That is, the system exhibits a zero at <span
class="math inline">\(2\omega_{pE}\)</span></p>
<hr />
<p>signals traveling through <em>two paths</em> within an amplifier may
cancel each other at one frequency, creating a <em>zero</em> in the
transfer function</p>
<p><img src="/2023/01/01/insight/image-20240629104408168.png"
alt="image-20240629104408168" /></p>
<p><span class="math display">\[
\omega_z =
\frac{(A_1+A_2)\omega_{p1}\omega_{p2}}{A_1\omega_{p1}+A_2\omega_{p2}}
\]</span> noting <span class="math inline">\(\omega_{p1}\lt \omega_z \lt
\omega_{p2}\)</span></p>
<h2 id="random-offset">Random offset</h2>
<p>The dependence of offset voltage and current mismatches upon the
overdrive voltage is similar to our observations for corresponding
<em>noise quantities</em></p>
<h3 id="differential-pair">differential pair</h3>
<p><img src="/2023/01/01/insight/image-20240624222306837.png"
alt="image-20240624222306837" /></p>
<p>In reality, since mismatches are independent statistical
variables</p>
<p><img src="/2023/01/01/insight/image-20240624222417564.png"
alt="image-20240624222417564" /></p>
<blockquote>
<p>Above shows that the input transistors must be designed for <em>high
gain</em> (<span class="math inline">\(g_mr_o =
\frac{2}{V_{OV}\lambda}\)</span>), which means they must be designed for
<em>small</em> <span class="math inline">\(V_{GS}-V_{TH}\)</span>.</p>
<p>It is desirable to minimize <span
class="math inline">\(V_{GS}-V_{TH}\)</span> by <em>lowering the tail
current</em> or <em>increasing the transistor widths</em></p>
</blockquote>
<hr />
<p>For <span class="math inline">\(\frac{\Delta K}{K}\)</span></p>
<p><span class="math display">\[\begin{align}
v_{os} g_m &amp;= \Delta K \frac{W}{L}(V_{GS}-V_{TH})^2 \\
v_{os} 2K\frac{W}{L}(V_{GS}-V_{TH}) &amp;= \Delta K
\frac{W}{L}(V_{GS}-V_{TH})^2 \\
v_{os} &amp;= \frac{V_{GS}-V_{TH}}{2} \frac{\Delta K}{K}
\end{align}\]</span></p>
<blockquote>
<p>The derivation for <span class="math inline">\(\frac{\Delta
W/L}{W/L}\)</span> is same with <span class="math inline">\(\frac{\Delta
K}{K}\)</span></p>
</blockquote>
<hr />
<p><strong>alternative derivation</strong></p>
<p><span class="math display">\[\begin{align}
\Delta V_\beta \cdot g_m &amp;= \frac{\partial I_D}{\partial \beta}
\Delta \beta \\
&amp;= I_D \frac{\Delta \beta}{\beta}
\end{align}\]</span></p>
<p>That is <span class="math inline">\(\Delta V_\beta =
\frac{I_D}{g_m}\frac{\Delta \beta}{\beta}\)</span></p>
<p><span class="math display">\[
\Delta V_R \cdot g_m R = I_D \cdot \Delta R
\]</span></p>
<p>That is <span class="math inline">\(\Delta V_R = \frac{I_D}{ g_m}
\cdot \frac{\Delta R}{R}\)</span></p>
<blockquote>
<p>[<a
target="_blank" rel="noopener" href="https://electronicengineering.phd.upc.edu/en/courses-and-seminars/courses-materials/2008-2009/slides-makinwa-1">https://electronicengineering.phd.upc.edu/en/courses-and-seminars/courses-materials/2008-2009/slides-makinwa-1</a>]</p>
</blockquote>
<hr />
<h3 id="current-mirror">current mirror</h3>
<p><img src="/2023/01/01/insight/image-20240624224944377.png"
alt="image-20240624224944377" /></p>
<p><img src="/2023/01/01/insight/image-20240624225010443.png"
alt="image-20240624225010443" /></p>
<blockquote>
<p>To minimize current mismatch, the overdrive voltage must be
maximized, a trend opposite to that in differential pair.</p>
<p>This is because as <span class="math inline">\(V_{GS}-V_{TH}\)</span>
increases, threshold mismatch has a lesser effect on the device
currents</p>
<p><span class="math inline">\(\Delta I_D= g_m \Delta V_{TH} =
\frac{2I_D}{V_{OV}}\Delta V_{TH}\)</span></p>
</blockquote>
<h2 id="effect-of-feedback-on-noise">Effect of Feedback on Noise</h2>
<blockquote>
<p>Feedback does <strong>not improve</strong> the noise performance of
circuits.</p>
</blockquote>
<p><img src="/2023/01/01/insight/image-20240508205903213.png"
alt="image-20240508205903213" /></p>
<blockquote>
<p>The input-referred noise voltage and current remain the same if the
feedback network introduces no noise.</p>
</blockquote>
<h2 id="burn-in-high-temperature-operating-life-htol">Burn-in &amp;
High-temperature operating life (HTOL)</h2>
<ul>
<li><strong>HTOL</strong>:
<ul>
<li>characterization test</li>
<li>characterize the life expectancy</li>
</ul></li>
<li><strong>Burn-in</strong>:
<ul>
<li>production test</li>
<li>weed out defective products</li>
</ul></li>
</ul>
<blockquote>
<p>HTOL and Burn-in Testing capture the two ends of the reliability
characterization graph known as the "bathtub curve"</p>
</blockquote>
<p><img src="/2023/01/01/insight/importance-of-htol-figure-1.png"
alt="importance-of-htol-figure-1" /></p>
<blockquote>
<p>[<a
target="_blank" rel="noopener" href="https://arworld.us/the-importance-of-htol-and-burn-in-testing-methods/">https://arworld.us/the-importance-of-htol-and-burn-in-testing-methods/</a>]</p>
</blockquote>
<h2 id="perc">PERC</h2>
<ul>
<li><p>CD: current density checks</p></li>
<li><p>P2P: point to point resistance checks</p></li>
<li><p>LDL: logic driven layout checks, latch up related</p></li>
<li><p>TOPO: topology, circuit connection and device size
checks</p></li>
</ul>
<blockquote>
<p>database</p>
<ul>
<li><p>CD, P2P, LDL : dfmdb</p></li>
<li><p>TOPO: svdb</p></li>
</ul>
</blockquote>
<blockquote>
<p>Frank Feng. New Approach For Full Chip Electrical Reliability
Verification [<a
target="_blank" rel="noopener" href="https://cse.nsysu.edu.tw/app/index.php?Action=downloadfile&amp;file=WVhSMFlXTm9MelV3TDNCMFlWOHhOamN6TnpWZk5qYzFNVGd6TjE4NE5ESXlOQzV3WkdZPQ==&amp;fname=1454FCFGGCPO45YTNOJCJGJGMKPKHC3534FG35YSA1GDXWFC34QOA0OOQOOKZWCDSSPOGDMP20NO4124YWB4B4LKYSMOQL0400YT34PKUWNK20FG00POUSXXYWXWOO15JCLKSWXWDCOKHG2050JCQKHCXTNPNOVSUSB4JCVW20HGJGTTWW40ZXIH5004A4GDMKJG5020OPMOJDLOML51NOFCSWROB454DGKKFCSTGCDCTXNPA4TWRKGDWW30CGKKDGB0YWLKIH05ML44WSFGQOTWOOECYWGHRKCCDD15A4XSFC14FCJGOO25WXROQLNK00JD31PKWSEC50A4SSOKHHTT">pdf</a>]</p>
</blockquote>
<h2 id="strap">STRAP</h2>
<p>A "strap" refers to a low-impedance connection</p>
<p><img src="/2023/01/01/insight/image-20230518001007350.png"
alt="image-20230518001007350" /></p>
<p>NWDMY = NWDMY1, NWDMY2</p>
<p>STRAP = NWSTRAP or PWSTRAP</p>
<p>NWSTRAP = {NP &amp; OD} &amp; {NW not {NW INTERACT NWDMY}}</p>
<p>PWSTRAP = {PP &amp; OD} not NW</p>
<table>
<thead>
<tr class="header">
<th>cell  pin</th>
<th>PLUS</th>
<th>MINUS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>N diode</strong></td>
<td>PWSTRAP</td>
<td>\</td>
</tr>
<tr class="even">
<td><strong>P diode</strong></td>
<td>\</td>
<td>NWSTRAP</td>
</tr>
</tbody>
</table>
<h3 id="calibre-rulenot">Calibre Rule::NOT</h3>
<p><img src="/2023/01/01/insight/image-20230518005758993.png"
alt="image-20230518005758993" /></p>
<h3 id="calibre-ruleinteract">Calibre Rule::INTERACT</h3>
<p><img src="/2023/01/01/insight/image-20230518010124496.png"
alt="image-20230518010124496" /></p>
<p><img src="/2023/01/01/insight/image-20230518010758342.png"
alt="image-20230518010758342" /></p>
<h2 id="rc-charge-and-discharge">RC charge and discharge</h2>
<ul>
<li><p>charge: <span class="math display">\[
V_o(t) = V_{X}(1-e^{-\frac{t}{\tau}}) + V_{o,0}\cdot
e^{-\frac{-t}{\tau}}
\]</span></p></li>
<li><p>discharge: <span class="math display">\[
V_o(t) = V_{o,0}\cdot e^{-\frac{t}{\tau}} +
V_{o,\infty}\cdot(1-e^{-\frac{t}{\tau}})
\]</span></p></li>
</ul>
<blockquote>
<ol type="1">
<li><span class="math inline">\(e^{-\frac{t}{\tau}}\)</span> item
determine the <strong>initial state </strong></li>
<li><span class="math inline">\((1-e^{-\frac{t}{\tau}})\)</span> item
determine the <strong>final state</strong></li>
</ol>
</blockquote>
<p><img src="/2023/01/01/insight/image-20231104231640290.png"
alt="image-20231104231640290" /></p>
<p><img src="/2023/01/01/insight/image-20231104232000036.png"
alt="image-20231104232000036" /></p>
<h3 id="ac-coupling">AC coupling</h3>
<p><img src="/2023/01/01/insight/image-20231121224940814.png"
alt="image-20231121224940814" /></p>
<p><img src="/2023/01/01/insight/image-20231121225358509.png"
alt="image-20231121225358509" /></p>
<hr />
<p><span class="math display">\[
\tau = 200 \text{nF} \times (50+50)\text{ohm} = 20 \mu s
\]</span></p>
<p>high level envelope:</p>
<p><img src="/2023/01/01/insight/image-20231121230155083.png"
alt="image-20231121230155083" /></p>
<p><img src="/2023/01/01/insight/image-20231121230225895.png"
alt="image-20231121230225895" /></p>
<h2 id="switched-capacitor-resistor">switched-capacitor resistor</h2>
<p><img src="/2023/01/01/insight/image-20231104212333555.png"
alt="image-20231104212333555" /></p>
<p><img src="/2023/01/01/insight/image-20231104212343670.png"
alt="image-20231104212343670" /></p>
<blockquote>
<p>Switching the capacitor moves a charge proportional to the voltage
difference. The resistor achieves the same function only in a continuous
manner.</p>
<p>Using a water analogy, we can imagine a couple of scenarios:</p>
<ol type="1">
<li>a steady water flow,</li>
<li>or 2) the same water delivered rapidly in buckets. Both create the
same flow of water - <strong>on average!</strong></li>
</ol>
</blockquote>
<h2 id="current-mirror-with-source-degeneration">Current mirror with
source degeneration</h2>
<p><img src="/2023/01/01/insight/image-20231103213308081.png"
alt="image-20231103213308081" /></p>
<p><img src="/2023/01/01/insight/image-20231103213327501.png"
alt="image-20231103213327501" /></p>
<p><img
src="/2023/01/01/insight/current_mirror_with_res_degeneration.jpg"
alt="degeneration" /></p>
<blockquote>
<p>Razavi 2nd, problem 14.15</p>
</blockquote>
<h2 id="monitored-analog-critical-parameters">Monitored Analog Critical
Parameters</h2>
<p><img src="/2023/01/01/insight/monitor_parameters.drawio.svg"
alt="monitor_parameters.drawio" /></p>
<p>Parameter Definition:</p>
<p><span class="math display">\[\begin{align}
I_{\text{D,lin}} &amp;= I_D \mid _{V_G=V_{DD},V_D=0.05V} \\
I_{\text{D,sat}} &amp;= I_D \mid _{V_G=V_D=V_{DD}} \\
V_{\text{t,lin}} &amp;= V_G \mid _{I_D=I_{\text{thx}}\cdot
\frac{W}{L}@\{V_D=0.05V\}}
\end{align}\]</span></p>
<blockquote>
<p><span class="math inline">\(I_{\text{thx}}\)</span> could be
different for technologies. (For N16, <span
class="math inline">\(I_{\text{thx}}=10\)</span>nA)</p>
</blockquote>
<h2 id="demystifying-stb-and-pstb-in-spectre">Demystifying stb and pstb
in Spectre</h2>
<p>All credits to my colleague, Zhang Wenpian.</p>
<h3 id="spectres-stb-analysis">Spectre's stb analysis</h3>
<p>Spectre <strong>stb</strong>'s "loopgain" is negative of "T" in
paper<sup>[1]</sup> <span class="math display">\[
T = \frac{2(AD-BC) - A + D}{2(AD-BC)-A+D-1}
\]</span></p>
<p>AC simulation testbench, shown as below,</p>
<p><img src="/2023/01/01/insight/stb_pstb.drawio.svg"
alt="stb_pstb.drawio" /></p>
<ol type="1">
<li><p><span class="math inline">\(I_{inj}\)</span> = 0, <span
class="math inline">\(V_{inj}\)</span> = 1</p>
<p>B = if, D = ve</p></li>
<li><p><span class="math inline">\(I_{inj}\)</span> = 1, <span
class="math inline">\(V_{inj}\)</span> = 0</p>
<p>A = if, C = ve</p></li>
</ol>
<h3 id="spectres-pstb-analysis">Spectre's pstb analysis</h3>
<p>Spectre <strong>pstb</strong> is similar to stb, just set
<strong>pac</strong> as <strong>1</strong> instead of
<strong>ac</strong> in current source and voltage source.</p>
<p>This analysis just use <strong>harmonic 0</strong> transfer function
in pac analysis, which has limitation.</p>
<h2 id="thevenin-and-norton-equivalent-circuits">Thevenin and Norton
Equivalent Circuits</h2>
<h3 id="戴维南定理">戴维南定理</h3>
<p><img src="/2023/01/01/insight/image-20231021084850078.png"
alt="image-20231021084850078" /></p>
<h3 id="等效电阻的计算方法">等效电阻的计算方法</h3>
<p><img src="/2023/01/01/insight/image-20231021085151943.png"
alt="image-20231021085151943" /></p>
<blockquote>
<p>使用<strong>外加电源法</strong>时， 全部独立电源需要置零</p>
</blockquote>
<h3 id="诺顿定理">诺顿定理</h3>
<p><img src="/2023/01/01/insight/image-20231021090448282.png"
alt="image-20231021090448282" /></p>
<h4 id="lemma-of-razavi">Lemma of Razavi</h4>
<p><span class="math display">\[
A_V = -G_m R_{out}
\]</span></p>
<p><img src="/2023/01/01/insight/image-20231021092407849.png"
alt="image-20231021092407849" /></p>
<blockquote>
<p><em>Design of Analog CMOS Integrated Circuits, Second Edition -
Behzad Razavi</em></p>
</blockquote>
<h2 id="millers-approximation-right-half-plane-zero">Miller's
Approximation: right-half-plane zero</h2>
<p><img src="/2023/01/01/insight/image-20231021101204165.png"
alt="image-20231021101204165" /></p>
<p>A quick inspection of this circuit reveals that a
<strong>zero</strong> lies at a frequency where the current through
<span class="math inline">\(C_{12}\)</span> becomes equal to <span
class="math inline">\(g_2V_1\)</span>.</p>
<p>When this occurs, the current through the parallel combination of
<span class="math inline">\(C_2\)</span> and <span
class="math inline">\(R_2\)</span> becomes zero, creating a zero in the
transfer function.</p>
<p>In other words, we can write</p>
<p><span class="math display">\[\begin{align}
g_2V_1 &amp;= V_1sC_{12} \\
s &amp;= \frac{g_2}{C_{12}}
\end{align}\]</span></p>
<h2 id="non-overlapping-clock">Non Overlapping Clock</h2>
<div class="pdf-container" data-target="/pdfs/nonoverlapping_clocks.pdf" data-height="500px"></div>
<h2 id="single-ended-amplifier-offset-voltage">Single ended Amplifier
Offset Voltage</h2>
<h3 id="unity-gain-buffer">unity gain buffer</h3>
<p><img src="/2023/01/01/insight/image-20220917115231508.png"
alt="image-20220917115231508" /></p>
<p><span class="math display">\[\begin{align}
V_o &amp;= V_{o,dc}+A(V_p-V_m) \\
V_o&#39; &amp;= V_{o,dc}+A(V_p+V_{os}-V_m&#39;)
\end{align}\]</span></p>
<p>Then, we get <span class="math display">\[
V_{os}=\frac{V_o&#39;-V_o}{A}+(V_m&#39;-V_m)
\]</span> Due to <span class="math inline">\(V_o=V_m\)</span> and <span
class="math inline">\(V_o&#39;=V_m&#39;\)</span> <span
class="math display">\[
V_{os}=(1/A+1)\Delta{V_m}
\]</span> or <span class="math display">\[
V_{os}=(1/A+1)\Delta{V_o}
\]</span> if <span class="math inline">\(A \gg 1\)</span> <span
class="math display">\[
V_{os}=\Delta{V_o}
\]</span></p>
<h3 id="non-inverting-amplifier">non-inverting amplifier</h3>
<p><img src="/2023/01/01/insight/image-20220917115308699.png"
alt="image-20220917115308699" /> <span
class="math display">\[\begin{align}
V_o &amp;= V_{o,dc}+A(V_p-V_m) \\
V_o&#39; &amp;= V_{o,dc}+A(V_p+V_{os}-V_m&#39;) \\
V_m &amp;= \beta V_o \\
V_m&#39; &amp;= \beta V_o&#39;
\end{align}\]</span></p>
<p>we get <span class="math display">\[
V_{os}=\frac{V_o&#39;-V_o}{A}+(V_m&#39;-V_m)
\]</span> or <span class="math display">\[
V_{os}=\frac{\Delta V_o}{A}+\beta \Delta V_o
\]</span> if <span class="math inline">\(A \gg 1\)</span> <span
class="math display">\[
V_{os}=\beta \Delta V_o
\]</span> or <span class="math display">\[
V_{os}=\Delta V_m
\]</span></p>
<hr />
<p><strong>Lecture 22 Variability and Mismatch of Dr. Hesham A. Omran's
Analog IC Design</strong></p>
<p><img src="/2023/01/01/insight/image-20221022010448797.png"
alt="image-20221022010448797" /></p>
<blockquote>
<p>URL: <a
target="_blank" rel="noopener" href="https://www.master-micro.com/professional-courses/analog-ic-design/course-resources">https://www.master-micro.com/professional-courses/analog-ic-design/course-resources</a></p>
</blockquote>
<h2 id="gotcha-mos-ron">Gotcha MOS ron</h2>
<p>There is discrepancy between model operating point and <span
class="math inline">\(V_{ds}/I_{ds}\)</span></p>
<p>I believe that the equation <span
class="math inline">\(V_{ds}/I_{ds}\)</span> is more appropriate where
mos is used as switch, though <span
class="math inline">\(V_{ds}=0\)</span> is an outlier.</p>
<p><img src="/2023/01/01/insight/image-20230104230757729.png"
alt="image-20230104230757729" /></p>
<p><img src="/2023/01/01/insight/image-20230104230837829.png"
alt="image-20230104230837829" /></p>
<p><img src="/2023/01/01/insight/image-20230104230851475.png"
alt="image-20230104230851475" /></p>
<h2 id="schmitt-inverter">Schmitt Inverter</h2>
<p><img src="/2023/01/01/insight/image-20231021232912529.png"
alt="image-20231021232912529" /></p>
<h2 id="gmid-intuition">gm/ID Intuition</h2>
<p><img src="/2023/01/01/insight/image-20230103220933081.png"
alt="image-20230103220933081" /></p>
<blockquote>
<p>small gm/ID for High ro, or high Early voltage <span
class="math inline">\(V_A\)</span></p>
</blockquote>
<h2 id="transit-frequency-f_t">Transit Frequency <span
class="math inline">\(f_T\)</span></h2>
<p>Defined as the frequency at which the <strong>small-signal current
gain</strong> of a device is <strong>unity</strong></p>
<p><img src="/2023/01/01/insight/image-20231213234524075.png"
alt="image-20231213234524075" /></p>
<hr />
<p><img src="/2023/01/01/insight/image-20240116233951006.png"
alt="image-20240116233951006" /></p>
<h2 id="mosfet-ztc-condition-analysis">MOSFET ZTC Condition
Analysis</h2>
<blockquote>
<p>zero temperature coefficient (ZTC)</p>
</blockquote>
<p><img src="/2023/01/01/insight/image-20231212195536754.png"
alt="image-20231212195536754" /></p>
<h2 id="mom-cap-of-wo_mx">MOM cap of wo_mx</h2>
<p>Monte Carlo model:</p>
<ul>
<li><span class="math inline">\(C_{pa}=C_{pa1}\)</span>, <span
class="math inline">\(C_{pb}=C_{pb1}\)</span> for each iteration during
<em>Process Variation</em></li>
<li>different variation is applied to <span
class="math inline">\(C_{ab}\)</span> and <span
class="math inline">\(C_{a1b1}\)</span> each iteration during
<em>Mismatch Variation</em>, though <span
class="math inline">\(C_{pa}\)</span>, <span
class="math inline">\(C_{pb}\)</span>, <span
class="math inline">\(C_{pa1}\)</span> and <span
class="math inline">\(C_{pb1}\)</span> remain constant</li>
</ul>
<p><img src="/2023/01/01/insight/image-20230220230434891.png"
alt="image-20230220230434891" /></p>
<p><img src="/2023/01/01/insight/image-20230220230331505.png"
alt="image-20230220230331505" /></p>
<h2 id="active-inductor">Active Inductor</h2>
<p><img src="/2023/01/01/insight/activeInd.svg" alt="activeInd" /></p>
<p><span class="math display">\[\begin{align}
A &amp;= \frac{g_mR_L}{1+(g_\text{m\_dio}+ g_\text{ds\_tot})R_L}\cdot
\frac{1+R_pC_Ps}{1+\frac{(1+g_\text{ds\_tot}R_L)R_PC_P+C_PR_L+R_LC_L}{1+(g_\text{m\_dio}+g_\text{ds\_tot})R_L}s
+ \frac{R_LC_LR_PC_P}{1+(g_\text{m\_dio}+g_\text{ds\_tot})R_L}s^2} \\
&amp;= \frac{g_mR_L}{1+(g_\text{m\_dio}+ g_\text{ds\_tot})R_L}\cdot
\frac{R_PC_P}{
\frac{R_LC_LR_PC_P}{1+(g_\text{m\_dio}+g_\text{ds\_tot})R_L}}\cdot
\frac{1/(R_PC_P)+s}{s^2 +
\frac{(1+g_\text{ds\_tot}R_L)R_PC_P+C_PR_L+R_LC_L}{R_PC_P}s +
\frac{1+(g_\text{m\_dio}+g_\text{ds\_tot})R_L}{R_LC_LR_PC_P}} \\
&amp;= A_0 \cdot A(s)
\end{align}\]</span></p>
<p>That is</p>
<p><span class="math display">\[\begin{align}
\omega_z &amp;= \frac{1}{R_PC_P} \tag{1} \\
\omega_n &amp;=
\sqrt{\frac{1+(g_\text{m\_dio}+g_\text{ds\_tot})R_L}{R_LC_LR_PC_P}} =
\sqrt{\omega_{p0}\omega_z} \\
\zeta &amp; = \frac{(1+g_\text{ds\_tot}R_L)R_PC_P+C_PR_L+R_LC_L}{R_PC_P}
\frac{1}{2 \omega_n}
\end{align}\]</span></p>
<p>Where <span class="math display">\[\begin{align}
\omega_{p0} &amp;=
\frac{1}{(R_L||\frac{1}{g_\text{m\_dio}}||\frac{1}{g_\text{ds\_tot}})C_L}  \tag{2}
\end{align}\]</span></p>
<p>Here, relate <span class="math inline">\(\omega_{p0}\)</span> and
<span class="math inline">\(\omega_z\)</span> by coefficient <span
class="math inline">\(\alpha\)</span> <span class="math display">\[
\omega_{p0} = \alpha \cdot  \omega_z \tag{3}
\]</span> This way <span class="math display">\[
\omega_n= \sqrt{\alpha}\cdot \omega_z
\]</span></p>
<p><span class="math display">\[
\zeta = \frac{1}{2}(K\sqrt{\alpha}+\frac{1+C_P/C_L}{\sqrt{\alpha}})
\tag{4}
\]</span> where <span class="math display">\[
K =
\frac{R_L||\frac{1}{g_\text{m\_dio}}||\frac{1}{g_\text{ds\_tot}}}{R_L||g_\text{ds\_tot}}
\]</span></p>
<p>And <span class="math inline">\(A(s)\)</span> can be expressed as
<span class="math display">\[
A(s) =
\frac{\frac{s}{\omega_z}+1}{\frac{s^2}{\omega_n^2}+2\frac{\zeta}{\omega_n}s+1}
\]</span> It magnitude in dB <span class="math display">\[
A_\text{dB} =
10\log\frac{1+(\omega/\omega_z)^2}{1+(\omega/\omega_n)^4+2\omega^2(2\zeta^2-1)/\omega_n^2}
\]</span> Substitute <span class="math inline">\(\omega_n\)</span> with
Eq (2), followed is obtained <span class="math display">\[
A_\text{dB} = 10\log{\frac{\alpha^2(\omega_z^4 +
\omega_z^2\omega^2)}{\alpha^2\omega_z^4+\omega^4+2\alpha\omega_z^2(2\zeta^2-1)\omega^2}}
\]</span> peaking frequency <span class="math display">\[
\omega_\text{peak} = \omega_z\cdot \sqrt{\sqrt{(\alpha+1)^2 - 4\alpha
\zeta^2}-1}
\]</span> If <span class="math inline">\(\zeta=1\)</span> <span
class="math display">\[\begin{align}
\omega_{A_\text{dB = 0dB} }&amp;= \sqrt{1-2/\alpha}\cdot \omega_{p0} \\
\omega_\text{peak} &amp;= \omega_z\sqrt{\alpha-2} \\
A_\text{dB,peak} &amp;= 10\log\frac{\alpha^2}{4(\alpha-1)}
\end{align}\]</span></p>
<h2 id="miller-multiplication-of-capacitor">Miller multiplication of
Capacitor</h2>
<h3 id="positive-cap">Positive Cap</h3>
<p><img src="/2023/01/01/insight/image-20231220225508580.png"
alt="image-20231220225508580" /></p>
<p><img src="/2023/01/01/insight/image-20231220225450481.png"
alt="image-20231220225450481" /></p>
<h3 id="negative-cap">Negative Cap</h3>
<p><img src="/2023/01/01/insight/image-20231220225910283.png"
alt="image-20231220225910283" /></p>
<p><img src="/2023/01/01/insight/image-20231220230015868.png"
alt="image-20231220230015868" /></p>
<hr />
<p>gain has <strong>limited</strong> bandwidth</p>
<p><img src="/2023/01/01/insight/image-20231224212914366.png"
alt="image-20231224212914366" /></p>
<p><img src="/2023/01/01/insight/image-20231224212541383.png"
alt="image-20231224212541383" /></p>
<p><img src="/2023/01/01/insight/image-20231224212625409.png"
alt="image-20231224212625409" /></p>
<p><span class="math inline">\(V_o = V_i |A|e^{j\theta}\)</span>, and
<span class="math inline">\(A_r = |A|\cos\theta\)</span>, <span
class="math inline">\(A_i = |A|\sin\theta\)</span></p>
<p>Then <span class="math inline">\(I_i = (V_i - V_o)sC_f=
V_i(1-|A|e^{j\theta})sC_f\)</span>, impedance is shown as below</p>
<p><span class="math display">\[\begin{align}
Z &amp;= \frac{V_i}{I_i} \\
&amp;= \frac{1}{(1-|A|e^{j\theta})j\omega C_f} \\
&amp;= -\frac{j}{\omega
C_f\frac{1+|A|^2-2|A|\cos\theta}{1-|A|\cos\theta}} +
\frac{|A|\sin\theta}{\omega C_f (1+|A|^2-2|A|\cos\theta)} \\
\end{align}\]</span></p>
<p><span class="math inline">\(C_\text{eq}\)</span> and <span
class="math inline">\(R_\text{eq}\)</span> are obtained <span
class="math display">\[\begin{align}
C_\text{eq} &amp;= \frac{1+|A|^2-2A_r}{1-A_r}\cdot C_f \\
R_\text{eq} &amp;= \frac{A_i}{1+|A|^2-2A_r}\cdot \frac{1}{\omega C_f}
\end{align}\]</span></p>
<h2 id="ds-small-signal-model">D/S small signal model</h2>
<p><img src="/2023/01/01/insight/image-20240106161059584.png"
alt="image-20240106161059584" /></p>
<blockquote>
<p>The <code>Drain</code> and <code>Source</code> of MOS are determined
in <em>DC operating point</em>, i.e. large signal.</p>
</blockquote>
<p>That is, top of <span class="math inline">\(M_2\)</span> is
<code>drain</code> and bottom is <code>source</code>, <span
class="math display">\[\begin{align}
R_\text{eq2} &amp;= \frac{r_\text{o2}+R_L}{1+g_\text{m2}r_\text{o2}} \\
&amp; \simeq  \frac{1}{g_\text{m2}}
\end{align}\]</span></p>
<h2 id="pmos-small-signal-model-polarity">PMOS small signal model
polarity</h2>
<blockquote>
<p>The small-signal models of NMOS and PMOS transistors are
<strong>identical</strong></p>
</blockquote>
<p>A negative <span class="math inline">\(\Delta V_\text{GS}\)</span>
leads to a negative <span class="math inline">\(\Delta I_D\)</span>.</p>
<blockquote>
<p>Recall that <span class="math inline">\(I_D\)</span>, in the
direction shown here, is negative because the actual current of holes
flows from the source to the drain.</p>
<p><img src="/2023/01/01/insight/image-20240106170315177.png"
alt="image-20240106170315177" /></p>
</blockquote>
<p>Conversely, a positive <span class="math inline">\(\Delta
V_\text{GS}\)</span> produces a positive <span
class="math inline">\(\Delta I_D\)</span>, as is the case for an NMOS
device.</p>
<p><img src="/2023/01/01/insight/image-20240106164923917.png"
alt="image-20240106164923917" /></p>
<h2 id="leakage-in-mos">Leakage in MOS</h2>
<p><img src="/2023/01/01/insight/image-20230812104737404.png"
alt="image-20230812104737404" /></p>
<h3 id="reference">reference</h3>
<p>W. M. Elgharbawy and M. A. Bayoumi, "Leakage sources and possible
solutions in nanometer CMOS technologies," in IEEE Circuits and Systems
Magazine, vol. 5, no. 4, pp. 6-17, Fourth Quarter 2005, doi:
10.1109/MCAS.2005.1550165.</p>
<p>X. Qi et al., "Efficient subthreshold leakage current optimization -
Leakage current optimization and layout migration for 90- and 65- nm
ASIC libraries," in IEEE Circuits and Devices Magazine, vol. 22, no. 5,
pp. 39-47, Sept.-Oct. 2006, doi: 10.1109/MCD.2006.272999.</p>
<p>P. Monsurró, S. Pennisi, G. Scotti and A. Trifiletti, "Exploiting the
Body of MOS Devices for High Performance Analog Design," in IEEE
Circuits and Systems Magazine, vol. 11, no. 4, pp. 8-23, Fourthquarter
2011, doi: 10.1109/MCAS.2011.942751.</p>
<h2 id="signal-detection-circuit">signal detection circuit</h2>
<p><img src="/2023/01/01/insight/sc_sigdet.drawio.svg"
alt="sc_sigdet.drawio" /></p>
<p><strong>phase I</strong></p>
<p><span class="math display">\[\begin{align}
Q_a &amp;= (V_{a0} - 0.5*(V_{ip} + V_{im}))*C + (V_{a0} - V_{th})*C \\
Q_b &amp;= (V_{b0} - 0.5*(V_{ip} + V_{im}))*C + V_{b0}*C
\end{align}\]</span></p>
<p><strong>Phase II</strong></p>
<p><span class="math display">\[\begin{align}
Q_a &amp;= (V_{a} - V_{ip})*C + (V_{a} - V_{b})*0.5C \\
Q_b &amp;= (V_{b} - V_{im})*C + (V_{b} - V_{a})*0.5C
\end{align}\]</span></p>
<p><strong>With the law of charge conservation, we get</strong></p>
<p><span class="math display">\[\begin{equation}
V_a - V_b = (V_{a0} - V_{b0}) + 0.5*(V_{ip} - V_{im} - V_{th})
\end{equation}\]</span></p>
<blockquote>
<p>REF: D. A. Yokoyama-Martin et al., "A Multi-Standard Low Power
1.5-3.125 Gb/s Serial Transceiver in 90nm CMOS," IEEE Custom Integrated
Circuits Conference 2006, 2006, pp. 401-404, doi:
10.1109/CICC.2006.320970.</p>
</blockquote>
<h2 id="powerground-and-io-pins">Power/Ground and I/O Pins</h2>
<h3 id="power-ground-pin-information">Power / Ground Pin
Information</h3>
<p>In both digital and analog I/O, power and ground pins appear at the
sub-circuit definiton, allowing user to use the I/O in voltage islands.
They follow certain naming conventions.</p>
<ol type="1">
<li>digital I/O sub-circuit</li>
</ol>
<ul>
<li>VDD: pre-driver core voltage (supplied by PVDD1CDGM)</li>
<li>VSS: pre-driver ground and also global ground (supplied by
PVDD1CDGM)</li>
<li>VDDPST: I/O post-driver voltage, i.e. 1.8V (supplied by PVDD2CDGM or
PVDD2POCM)</li>
<li>VSSPOST: I/O post-driver ground (supplied by PVDD2CDGM or
PVDD2POCM)</li>
<li>POCCTRL: POCCTRL signal (supplied by PVDD2POCM)</li>
</ul>
<ol start="2" type="1">
<li>analog I/O placed in a core voltage domain, the convention is</li>
</ol>
<ul>
<li>TACVDD: analog core voltage (supplied by PVDD3ACM)</li>
<li>TACVSS: analog core ground (supplied by PVDD3ACM)</li>
<li>VSS: global core ground</li>
</ul>
<ol start="3" type="1">
<li>analog I/O placed in an I/O voltage domain, the convention is:</li>
</ol>
<ul>
<li>TAVDD: analog I/O voltage, i.e. 1.8V (supplied by PVDD3AM)</li>
<li>TAVSS: analog I/O ground (supplied by PVDD3AM)</li>
<li>VSS: global core ground</li>
</ul>
<p>Power/Ground <strong>Combo Cells</strong></p>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 36%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr class="header">
<th>power/ground combo pad cell</th>
<th>pins to be connected to bump</th>
<th>to core side pin name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>PVDD1CDGM</td>
<td>VDD VSS</td>
<td>VDD VSS</td>
</tr>
<tr class="even">
<td>PVDD2CDGM PVDD2POCM</td>
<td>VDDPST VSSPST</td>
<td>N/A</td>
</tr>
<tr class="odd">
<td>PVDD3AM</td>
<td>TAVDD TAVSS</td>
<td>AVDD AVSS</td>
</tr>
<tr class="even">
<td>PVDD3ACM</td>
<td>TACVDD TACVSS</td>
<td>AVDD AVSS</td>
</tr>
</tbody>
</table>
<h3 id="note-for-the-retention-mode">Note for the retention mode</h3>
<ol type="1">
<li>At initial state, IRTE must be <strong>0</strong> when VDD is
off.</li>
<li>IRTE must be kept &gt;= 10us after VDD turns on again (from the
retention mode to the normal operation mode).</li>
<li>IRTE can be switched only when both VDD and VDDPST are on.</li>
</ol>
<p><img src="/2023/01/01/insight/rention_seq.drawio.svg"
alt="rention_seq.drawio" /></p>
<p>When the rention function is needed, IRTE signal must come from an
"always-on" core power domain. If you don't need the rention function,
it is required to tie IRTE to ground. In other words, <strong>no matter
the rention feature is needed or not, it is required to have PCBRTE in
each domain</strong>.</p>
<p><img src="/2023/01/01/insight/PCBRTE_in_digital_domain.drawio.svg"
alt="PCBRTE_in_digital_domain.drawio" /></p>
<p><strong>Note</strong>: PCBRTE <strong>does not</strong> need PAD
connection.</p>
<h3 id="internal-pins">Internal Pins</h3>
<p>There are 3 internal global pins, i.e. <strong>ESD</strong>,
<strong>POCCTRL</strong>, <strong>RTE</strong>, in all digital domain
cells.</p>
<p>In real application,</p>
<ul>
<li><strong>ESD pin</strong> is an internal signal and
<strong>active</strong> in ESD event happening</li>
<li><strong>POCCTRL</strong> is an internal signal and active in
Power-on-control event.</li>
</ul>
<p>However, these special events (i.e. ESD event and Power-on-control
event) are not modeled in NLDM kit (.lib), only normal function is
covered, so <strong>ESD</strong> and <strong>POCCTRL</strong> pins are
simply defined as ground in NLDM kit (.lib).</p>
<blockquote>
<p>These 3 global pins will be connected automatically after
<strong>cell-to-cell abutting</strong> in physical layout.</p>
</blockquote>
<h3 id="power-up-sequence-in-digital-domain">Power-Up sequence in
Digital Domain</h3>
<p>Power up the I/O power (VDDPST) first, then the core power (VDD)</p>
<p><img src="/2023/01/01/insight/pocctrl_seq.drawio.svg"
alt="pocctrl_seq.drawio" /></p>
<ol type="1">
<li>PVDDD2POCM cell would generate Power-On-Control signal (POCCTRL) to
have the post-driver NMOS and PMOS off, so that the crowbar current
would not occur in the post-driver fingers when the I/O voltage is on
while the core voltage remains off. As such, I/O cell would be in the
Hi-Z state. when POCCTRL is on, the pll-up/down resistor is disabled and
C is 0.</li>
<li>The POCCTRL signal is transmitted to I/O cells through <strong>cell
abutment</strong>. There is no need to have routing for POCCTTRL nor
give a control signal to the POCCTRL pin any of I/O cells. Note that the
POCCTRL signal would be cut if inserting a power-cut (PRCUT) cell.</li>
</ol>
<p><img src="/2023/01/01/insight/power-on-control-ciruit.drawio.svg"
alt="power-on-control-ciruit.drawio" /></p>
<h3 id="power-down-sequence-in-digital-domain">Power-Down sequence in
Digital Domain</h3>
<p>It's the reverse of power-up sequence.</p>
<h3 id="use-model-in-innovus">Use model in Innovus</h3>
<figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> init_gnd_net <span class="string">&quot;vss_core vss DUMMY_ESD DUMMY_POCCTRL&quot;</span></span><br><span class="line"></span><br><span class="line">addInst -moduleBased u_io -ori R270 -physical -status fixed -loc <span class="number">135</span> <span class="number">994</span> -inst u_io/VDDIO_1 -cell PVDD2CDGM_H</span><br><span class="line"></span><br><span class="line">addNet u_io_RTE</span><br><span class="line">attachTerm FILLER_6 RTE u_io_RTE</span><br><span class="line">attachTerm VDDIO_1 RTE u_right_RTE</span><br><span class="line">setAttribute -skip_routing true -net u_io_RTE</span><br><span class="line"></span><br><span class="line">clearGlobalNets</span><br><span class="line">globalNetConnect DUMMY_POCCTRL -type pgpin -pin POCCTRL -singleInstance u_io/VDDDIO_1 -override</span><br><span class="line">globalNetConnect DUMMY_ESD -type pgpin -pin ESD -singleInstance u_io/VDDDIO_1 -override</span><br></pre></td></tr></table></figure>
<figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> pins [get_object_name [get_ports *]]</span><br><span class="line"><span class="keyword">foreach</span> pin <span class="variable">$pins</span> &#123;</span><br><span class="line">	<span class="keyword">set</span> netPtr [dbGetNetByName <span class="variable">$pin</span>]</span><br><span class="line">	<span class="keyword">if</span> &#123; <span class="variable">$netPtr</span> == <span class="string">&quot;0x0&quot;</span> &#125; &#123;</span><br><span class="line">		<span class="keyword">puts</span> <span class="string">&quot;INFO: can&#x27;t find the port: $pin&quot;</span></span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		setAttribute -net <span class="variable">$pin</span> -skip_routing true</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> net [get_object_name [get_nets -of_objects [get_pins */RTE -hierarchical]]] &#123;</span><br><span class="line">	setAttribute -net <span class="variable">$net</span> -skip_routing true</span><br><span class="line">	dbSet [dbGetNetByName <span class="variable">$net</span>].dontTouch true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="antenna-effect">Antenna Effect</h2>
<p>The <strong>antenna effect</strong> is a common name for the effects
of <em>charge accumulation</em> in <em>isolated nodes</em> of an
integrated circuit <em>during its processing</em>.</p>
<blockquote>
<p>This effect is also sometimes called "Plasma Induced Damage",
"Process Induced Damage" (PID) or "charging effect".</p>
</blockquote>
<h3 id="antenna-ratio">antenna ratio</h3>
<p>The antenna rule specifies the maximum tolerance for the ratio of a
metal line area to the area of connected gates.</p>
<h3 id="metal-jumping">metal jumping</h3>
<p>Long metal can be taken to <em>higher metal</em> routing layer. This
is known as <strong>metal jumping</strong>.</p>
<blockquote>
<p>This metal jumping will break the long interconnect and hence the
charge collected on the long interconnect will not discharge through
gate oxide because the higher metal layer is not yet fabricated.</p>
</blockquote>
<blockquote>
<p>so, if the gate immediately connects to the highest level by jump-up
metals, large amount of charges can not be collected, while the poly
finally connected to the diffusion part by highest level, thus no
antenna violation will normally occure.</p>
</blockquote>
<h3 id="diode-insertion">Diode Insertion</h3>
<p>Diode helps dissipate charges accumulated on metal. Diode should be
placed as near as possible to the gate of device on low level of
metal.</p>
<blockquote>
<p>Diode should always be connected in <em>reverse bias</em>, with
cathode connected to gate electrode and anode connected to ground
potential.</p>
<p>During processing, even if the diodes are reversely biased, because
of the elevated wafer temperature (200 o C plus) it will provide a much
conductive path</p>
<p>In the reverse bias region, the reverse saturation current of Si and
Ge diodes doubles for every 10° C rise in temperature</p>
</blockquote>
<p><img
src="/2023/01/01/insight/main-qimg-c3fe57dfac5fd5e5b5616ddf4f89f08a-pjlq.jpg"
alt="main-qimg-c3fe57dfac5fd5e5b5616ddf4f89f08a-pjlq" /></p>
<blockquote>
<p>Tuvia Liran, Antenna effect (PID): Do the design rules really protect
us? [<a
target="_blank" rel="noopener" href="https://www.eetimes.com/antenna-effect-do-the-design-rules-really-protect-us/">link</a>]</p>
<p>Upma Pawan Kumar, Sunandan Chaubey, Antenna Effect in 16nm Technology
Node [<a
target="_blank" rel="noopener" href="https://www.design-reuse.com/articles/48227/antenna-effect-in-16nm-technology-node.html">link</a>]</p>
<p>pulsic.com, Analog layout – Stop the antenna effect from destroying
your circuit [<a
target="_blank" rel="noopener" href="https://pulsic.com/analog-layout-stop-the-antenna-effect-from-destroying-your-circuit/">link</a>]</p>
<p>BuBuChen, 積體電路的天線效應 (Antenna Effect in IC) [<a
target="_blank" rel="noopener" href="https://www.bubuchen.com/2020/04/Antenna-Effect.html">link</a>]</p>
<p>EDN, Antenna violations resolved using new method [<a
target="_blank" rel="noopener" href="https://www.edn.com/antenna-violations-resolved-using-new-method/">link</a>]</p>
<p>edaboard.com, why jump up metal can solve the antenna effect? [<a
target="_blank" rel="noopener" href="https://www.edaboard.com/threads/why-jump-up-metal-can-solve-the-antenna-effect.177890/post-745696">link</a>]</p>
<p>siliconvlsi.com, Antenna effect [<a
target="_blank" rel="noopener" href="https://siliconvlsi.com/antenna-effect/">link</a>]</p>
<p>Prof. Adam Teman, Digital VLSI Design.
Lecture-10-The-Manufacturing-Process [<a
target="_blank" rel="noopener" href="https://www.eng.biu.ac.il/temanad/files/2017/02/Lecture-10-The-Manufacturing-Process.pdf">pdf</a>]</p>
<p>Zongjian Chen, Processing and Reliability Issues That Impact Design
Practice. [<a
target="_blank" rel="noopener" href="https://web.stanford.edu/class/archive/ee/ee371/ee371.1066/lectures/Old/lect_15_2up.pdf">https://web.stanford.edu/class/archive/ee/ee371/ee371.1066/lectures/Old/lect_15_2up.pdf</a>]</p>
</blockquote>
<h2 id="metastability-and-synchronizer">Metastability and
Synchronizer</h2>
<p>When a flip-flop samples an input that is changing during its
aperture, the output Q may momentarily take on a voltage between 0 and
VDD that is in the forbidden zone. This is called a metastable state.
Eventually, the flip-flop will resolve the output to a stable state of
either 0 or 1. However, the resolution time required to reach the stable
state is <em>unbounded</em></p>
<p><img src="/2023/01/01/insight/image-20240803075025846.png"
alt="image-20240803075025846" /></p>
<blockquote>
<p>Steve Golson. Synchronization and Metastability [<a
target="_blank" rel="noopener" href="https://trilobyte.com/pdf/golson_snug14.pdf">https://trilobyte.com/pdf/golson_snug14.pdf</a>]</p>
<p>R. Ginosar, "Metastability and Synchronizers: A Tutorial," in IEEE
Design &amp; Test of Computers, vol. 28, no. 5, pp. 23-35, Sept.-Oct.
2011, doi: 10.1109/MDT.2011.113. [<a
target="_blank" rel="noopener" href="https://webee.technion.ac.il/~ran/papers/Metastability-and-Synchronizers.IEEEDToct2011.pdf">https://webee.technion.ac.il/~ran/papers/Metastability-and-Synchronizers.IEEEDToct2011.pdf</a>]</p>
<p>Kinniment, D. J. Synchronization and arbitration in digital systems.
John Wiley &amp; Sons Ltd (2007).</p>
</blockquote>
<h2 id="slewing">Slewing</h2>
<p><img src="/2023/01/01/insight/image-20240817161915989.png"
alt="image-20240817161915989" /></p>
<blockquote>
<p>In practice, we choose <span class="math inline">\(I_P \simeq
I_{SS}\)</span></p>
</blockquote>
<hr />
<p><img src="/2023/01/01/insight/image-20240817162418938.png"
alt="image-20240817162418938" /></p>
<p><img src="/2023/01/01/insight/image-20240817162127452.png"
alt="image-20240817162127452" /></p>
<hr />
<p><img src="/2023/01/01/insight/image-20240816175038971.png"
alt="image-20240816175038971" /></p>
<p>Avoid <em>zero current</em> in cascodes</p>
<ul>
<li><p>left circuit</p>
<p><span class="math inline">\(I_b \gt I_a\)</span></p></li>
<li><p>right circuit</p>
<p><span class="math inline">\(I_b \gt 2I_a\)</span></p></li>
</ul>
<h2 id="step-response-of-higher-order-system">Step Response of higher
order system</h2>
<p><img src="/2023/01/01/insight/image-20240112002314153.png"
alt="image-20240112002314153" /></p>
<p>Since <span class="math inline">\(1/sC_1+R_1 \gg R_0\)</span> <span
class="math display">\[
\frac{V_m}{V_i}(s) \simeq \frac{R_0}{R_0 + 1/sC_0} =
\frac{sR_0C_0}{1+sR_0C_0}
\]</span> <em>step response</em> of <span
class="math inline">\(V_m\)</span> <span class="math display">\[
V_m(t) = e^{-t/R_0C_0}
\]</span> where <span class="math inline">\(\tau = R_0C_0\)</span></p>
<p>And <span class="math inline">\(V_o(s)\)</span> can be expressed as
<span class="math display">\[\begin{align}
\frac{V_o}{V_i}(s)  &amp; \simeq \frac{sR_0C_0}{1+sR_0C_0} \cdot
\frac{sR_1C_1}{1+sR_1C_1} \\
&amp;= \frac{sR_0C_0R_1C_1}{R_0C_0-R_1C_1}\left(\frac{1}{1+sR_1C_1} -
\frac{1}{1+sR_0C_0}\right)
\end{align}\]</span></p>
<p>Then <em>step response</em> of <span
class="math inline">\(Vo\)</span> <span
class="math display">\[\begin{align}
Vo(t) &amp;= \frac{R_0C_0R_1C_1}{R_0C_0-R_1C_1}
\left(\frac{1}{R_1C_1}e^{-t/R_1C_1} -
\frac{1}{R_0C_0}e^{-t/R_0C_0}\right) \\
&amp;= \frac{1}{R_0C_0-R_1C_1}\left(R_0C_0e^{-t/R_1C_1} -
R_1C_1e^{-t/R_0C_0}\right) \\
&amp;\simeq = \frac{1}{R_0C_0-R_1C_1}\left(R_0C_0e^{-t/R_1C_1} -
R_1C_1\right)
\end{align}\]</span></p>
<p>where <span class="math inline">\(\tau=R_1C_1\)</span></p>
<h3 id="partial-fraction-expansion">Partial-fraction Expansion</h3>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">syms C0</span><br><span class="line">syms R0</span><br><span class="line">syms C1</span><br><span class="line">syms R1</span><br><span class="line">syms s</span><br><span class="line"></span><br><span class="line">Z0 = <span class="number">1</span>/s/C1 + R1;</span><br><span class="line">Z1 = R0*Z0/(R0+Z0);</span><br><span class="line">vm = Z1 / (Z1 + <span class="number">1</span>/s/C0);</span><br><span class="line">vo = R1/Z0 * vm;</span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; partfrac(vm, s)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"> </span><br><span class="line"><span class="number">1</span> - (s*(C1*R0 + C1*R1) + <span class="number">1</span>)/(C0*C1*R0*R1*s^<span class="number">2</span> + (C0*R0 + C1*R0 + C1*R1)*s + <span class="number">1</span>)</span><br><span class="line"> </span><br><span class="line">&gt;&gt; partfrac(vo, s)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"> </span><br><span class="line"><span class="number">1</span> - (s*(C0*R0 + C1*R0 + C1*R1) + <span class="number">1</span>)/(C0*C1*R0*R1*s^<span class="number">2</span> + (C0*R0 + C1*R0 + C1*R1)*s + <span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p><span class="math display">\[\begin{align}
V_m(s) &amp;= 1 -
\frac{s(C_1R_0+C_1R_1)+1}{C_0C_1R_0R_1s^2+(C_0R_0+C_1R_0+C_1R_1)s+1} \\
V_o(s) &amp;= 1 -
\frac{s(C_0R_0+C_1R_0+C_1R_1)+1}{C_0C_1R_0R_1s^2+(C_0R_0+C_1R_0+C_1R_1)s+1}
\end{align}\]</span></p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">C0 = <span class="number">200e-9</span>;</span><br><span class="line">R0 = <span class="number">50</span>;</span><br><span class="line">C1 = <span class="number">400e-15</span>;</span><br><span class="line">R1 = <span class="number">200e3</span>;</span><br><span class="line"></span><br><span class="line">s = tf(<span class="string">&quot;s&quot;</span>);</span><br><span class="line"></span><br><span class="line">Z0 = <span class="number">1</span>/s/C1 + R1;</span><br><span class="line">Z1 = R0*Z0/(R0+Z0);</span><br><span class="line">vm = Z1 / (Z1 + <span class="number">1</span>/s/C0);</span><br><span class="line">vo = R1/Z0 * vm;</span><br><span class="line"></span><br><span class="line">vm_exp = <span class="number">1</span> - (s*(C1*R0 + C1*R1) + <span class="number">1</span>)/(C0*C1*R0*R1*s^<span class="number">2</span> + (C0*R0 + C1*R0 + C1*R1)*s + <span class="number">1</span>);</span><br><span class="line">vo_exp = <span class="number">1</span> - (s*(C0*R0 + C1*R0 + C1*R1) + <span class="number">1</span>)/(C0*C1*R0*R1*s^<span class="number">2</span> + (C0*R0 + C1*R0 + C1*R1)*s + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">step(vm, <span class="number">500e-9</span>, <span class="string">&#x27;k-o&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">step(vm_exp, <span class="number">500e-9</span>, <span class="string">&#x27;r-^&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;vm step response&#x27;</span>)</span><br><span class="line">grid on;</span><br><span class="line"><span class="built_in">legend</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">step(vo, <span class="number">500e-9</span>, <span class="string">&#x27;k-o&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">step(vo_exp, <span class="number">500e-9</span>, <span class="string">&#x27;r-^&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;vo step response&#x27;</span>)</span><br><span class="line">grid on;</span><br><span class="line"><span class="built_in">legend</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">% with approximation</span></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>)</span><br><span class="line">vm_exp2 = s*R0*C0/(<span class="number">1</span>+s*R0*C0);</span><br><span class="line">vo_exp2 = s*R0*C0/(<span class="number">1</span>+s*R0*C0) * s*R1*C1/(<span class="number">1</span>+s*R1*C1);</span><br><span class="line"></span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">step(vm, <span class="number">500e-9</span>, <span class="string">&#x27;k-o&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">step(vm_exp2, <span class="number">500e-9</span>, <span class="string">&#x27;r-^&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;vm step response&#x27;</span>)</span><br><span class="line">grid on;</span><br><span class="line"><span class="built_in">legend</span>()</span><br><span class="line"></span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">step(vo, <span class="number">500e-9</span>, <span class="string">&#x27;k-o&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">step(vo_exp2, <span class="number">500e-9</span>, <span class="string">&#x27;r-^&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;vo step response&#x27;</span>)</span><br><span class="line">grid on;</span><br><span class="line"><span class="built_in">legend</span>()</span><br></pre></td></tr></table></figure>
<p><img src="/2023/01/01/insight/image-20240113181003272.png"
alt="image-20240113181003272" /></p>
<p><img src="/2023/01/01/insight/image-20240113181032379.png"
alt="image-20240113181032379" /></p>
<hr />
<p>spectre simulation vs matlab</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">C0 = <span class="number">200e-9</span>;</span><br><span class="line">R0 = <span class="number">50</span>;</span><br><span class="line">C1 = <span class="number">400e-15</span>;</span><br><span class="line">R1 = <span class="number">200e3</span>;</span><br><span class="line"></span><br><span class="line">s = tf(<span class="string">&quot;s&quot;</span>);</span><br><span class="line"></span><br><span class="line">Z0 = <span class="number">1</span>/s/C1 + R1;</span><br><span class="line">Z1 = R0*Z0/(R0+Z0);</span><br><span class="line">vm = Z1 / (Z1 + <span class="number">1</span>/s/C0);</span><br><span class="line">vo = R1/Z0 * vm;</span><br><span class="line"></span><br><span class="line">step(vm, <span class="number">500e-9</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">step(vo, <span class="number">500e-9</span>);</span><br><span class="line"></span><br><span class="line">grid on</span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; vm</span><br><span class="line"></span><br><span class="line">vm =</span><br><span class="line"> </span><br><span class="line">          <span class="number">1.024e-44</span> s^<span class="number">5</span> + <span class="number">2.56e-37</span> s^<span class="number">4</span> + <span class="number">1.6e-30</span> s^<span class="number">3</span></span><br><span class="line">  -----------------------------------------------------------</span><br><span class="line">  <span class="number">1.024e-44</span> s^<span class="number">5</span> + <span class="number">2.571e-37</span> s^<span class="number">4</span> + <span class="number">1.626e-30</span> s^<span class="number">3</span> + <span class="number">1.6e-25</span> s^<span class="number">2</span></span><br><span class="line"> </span><br><span class="line">Continuous-time transfer <span class="keyword">function</span>.</span><br><span class="line"></span><br><span class="line">&gt;&gt; vo</span><br><span class="line"></span><br><span class="line">vo =</span><br><span class="line"> </span><br><span class="line">                 <span class="number">8.194e-52</span> s^<span class="number">6</span> + <span class="number">2.048e-44</span> s^<span class="number">5</span> + <span class="number">1.28e-37</span> s^<span class="number">4</span></span><br><span class="line">  ---------------------------------------------------------------------------</span><br><span class="line">  <span class="number">8.194e-52</span> s^<span class="number">6</span> + <span class="number">3.081e-44</span> s^<span class="number">5</span> + <span class="number">3.871e-37</span> s^<span class="number">4</span> + <span class="number">1.638e-30</span> s^<span class="number">3</span> + <span class="number">1.6e-25</span> s^<span class="number">2</span></span><br><span class="line"> </span><br><span class="line">Continuous-time transfer <span class="keyword">function</span>.</span><br></pre></td></tr></table></figure>
<p><img src="/2023/01/01/insight/image-20240112002155622.png"
alt="image-20240112002155622" /></p>
<h2 id="reference-1">reference</h2>
<p>M. Tian, V. Visvanathan, J. Hantgan and K. Kundert, "Striving for
small-signal stability," in IEEE Circuits and Devices Magazine, vol. 17,
no. 1, pp. 31-41, Jan. 2001, doi: 10.1109/101.900125.</p>
<p>Open loop gain analysis and "STB" method [<a
target="_blank" rel="noopener" href="https://www.linkedin.com/pulse/open-loop-gain-analysis-stb-method-jean-francois-debroux">https://www.linkedin.com/pulse/open-loop-gain-analysis-stb-method-jean-francois-debroux</a>]</p>
<p>The Analog Designer's Toolbox (ADT) | Invited Talk by IEEE Santa
Clara Valley Section CAS Society, <a
target="_blank" rel="noopener" href="https://youtu.be/FT6kKC5OdE0">https://youtu.be/FT6kKC5OdE0</a></p>
<p>ESSCIRC2023 Circuit Insights Ali Sheikholeslami [<a
target="_blank" rel="noopener" href="https://youtu.be/2xFIZM5_FPw?si=XWwSzDgKWZGB0rX1">https://youtu.be/2xFIZM5_FPw?si=XWwSzDgKWZGB0rX1</a>]</p>
<p>Ali Sheikholeslami, Circuit Intuitions: Thevenin and Norton
Equivalent Circuits, Part 3 IEEE Solid-State Circuits Magazine, Vol. 10,
Issue 4, pp. 7-8, Fall 2018.</p>
<p>Ali Sheikholeslami, Circuit Intuitions: Thevenin and Norton
Equivalent Circuits, Part 2 IEEE Solid-State Circuits Magazine, Vol. 10,
Issue 3, pp. 7-8, Summer 2018.</p>
<p>Ali Sheikholeslami, Circuit Intuitions: Thevenin and Norton
Equivalent Circuits, Part 1 IEEE Solid-State Circuits Magazine, Vol. 10,
Issue 2, pp. 7-8, Spring 2018.</p>
<p>Ali Sheikholeslami, Circuit Intuitions: Miller's Approximation IEEE
Solid-State Circuits Magazine, Vol. 7, Issue 4, pp. 7-8, Fall 2015.</p>
<p>Ali Sheikholeslami, Circuit Intuitions: Miller's Theorem IEEE
Solid-State Circuits Magazine, Vol. 7, Issue 3, pp. 8-10, Summer
2015.</p>
<p>Shanthi Pavan, "Demystifying Linear Time Varying Circuits"</p>
<p>ecircuitcenter. Switched-Capacitor Resistor [<a
target="_blank" rel="noopener" href="http://www.ecircuitcenter.com/Circuits/SWCap/SWCap.htm">http://www.ecircuitcenter.com/Circuits/SWCap/SWCap.htm</a>]</p>
<p>Jørgen Andreas Michaelsen. INF4420 Switched-Capacitor Circuits. [<a
target="_blank" rel="noopener" href="https://www.uio.no/studier/emner/matnat/ifi/INF4420/v13/undervisningsmateriale/inf4420_v13_07_switchedcapacitor_print.pdf">https://www.uio.no/studier/emner/matnat/ifi/INF4420/v13/undervisningsmateriale/inf4420_v13_07_switchedcapacitor_print.pdf</a>]</p>
<p>chembiyan T. OC Lecture 10: A very basic introduction to switched
capacitor circuits [<a
target="_blank" rel="noopener" href="https://youtu.be/SaYtemYp4rQ?si=q2qovTKJrLy65pnu">https://youtu.be/SaYtemYp4rQ?si=q2qovTKJrLy65pnu</a></p>
<p>Robert Bogdan Staszewski, Poras T. Balsara. "All‐Digital Frequency
Synthesizer in Deep‐Submicron CMOS"</p>
<p>Mayank Parasrampuria, Sandeep Jain, Burn-in 101 [<a
target="_blank" rel="noopener" href="https://www.edn.com/burn-in-101/">link</a>]</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/16/VMwareDiskShrink/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/16/VMwareDiskShrink/" class="post-title-link" itemprop="url">VMware Disk Shrink</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-12-16 15:36:35" itemprop="dateCreated datePublished" datetime="2022-12-16T15:36:35+00:00">2022-12-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-27 04:12:03" itemprop="dateModified" datetime="2024-08-27T04:12:03+00:00">2024-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>In Guest OS and run</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vmware-toolbox-cmd disk shrink /</span><br></pre></td></tr></table></figure>
<p><a
target="_blank" rel="noopener" href="https://superuser.com/q/211798">https://superuser.com/q/211798</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/14/doublet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Guo">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KNOW-HOW">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | KNOW-HOW">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/12/14/doublet/" class="post-title-link" itemprop="url">Pole-Zero Doublet</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-12-14 23:27:20" itemprop="dateCreated datePublished" datetime="2022-12-14T23:27:20+00:00">2022-12-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-27 04:12:03" itemprop="dateModified" datetime="2024-08-27T04:12:03+00:00">2024-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/analog/" itemprop="url" rel="index"><span itemprop="name">analog</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Mismatch between the pole and zero frequencies leads to the
<strong>“doublet problem”</strong>. If the pole and the zero do not
exactly coincide, we say that they constitute a
<strong>doublet</strong></p>
<blockquote>
<p>Problem 10.19 in Razavi 2nd book</p>
</blockquote>
<p>Suppose the open-loop transfer function of a two-stage op amp is
expressed as <span class="math display">\[
H_{open}(s)=\frac{A_0(1+\frac{s}{\omega_z})}{\left( 1+
\frac{s}{\omega_{p1}}\right)\left( 1+ \frac{s}{\omega_{p2}}\right)}
\]</span> Ideally, <span
class="math inline">\(\omega_z=\omega_2\)</span> and the feedback
circuit exhibits a first-order behavior, i.e., its step response
contains a single time constant and no overshoot.</p>
<p>Then the transfer function of the amplifier in a <em>unity-gain
feedback loop</em> is given by <span
class="math display">\[\begin{align}
H_{closed}(s)
&amp;=\frac{A_0\left(1+\frac{s}{\omega_z}\right)}{\frac{s^2}{\omega_{p1}\omega_{p2}}+\left(
\frac{1}{\omega_{p1}} +
\frac{1}{\omega_{p2}}+\frac{A_0}{\omega_{z}}\right)s+A_0+1} \\
&amp;=\frac{\frac{A_0}{A_0+1}(1+\frac{s}{\omega_z})}{\frac{s^2}{\omega_{p1}\omega_{p2}(A_0+1)}+\left(
\frac{1}{\omega_{p1}} +
\frac{1}{\omega_{p2}}+\frac{A_0}{\omega_{z}}\right)\frac{s}{A_0+1}+1}
\end{align}\]</span></p>
<hr />
<p>The denominator part of <span
class="math inline">\(H_{closed}(s)\)</span> is <span
class="math display">\[
D(s) = \frac{s^2}{\omega_{p1}\omega_{p2}}+\left( \frac{1}{\omega_{p1}} +
\frac{1}{\omega_{p2}}+\frac{A_0}{\omega_{z}}\right)s+A_0+1
\]</span></p>
<p>Assuming two poles (<span class="math inline">\(\omega_{pA}
\ll\omega_{pB}\)</span>) of <span
class="math inline">\(H_{closed}(s)\)</span> are widely spaced, <span
class="math display">\[\begin{align}
D(s) &amp;= \left( 1+ \frac{s}{\omega_{pA}}\right)\left( 1+
\frac{s}{\omega_{pB}}\right)\\
&amp;\cong \frac{s^2}{\omega_{pA}\omega_{pB}}+\frac{s}{\omega_{pA}} + 1
\end{align}\]</span></p>
<p>Thus, the two poles of the closed-loop transfer function of system
are <span class="math display">\[\begin{align}
\omega_{pA} &amp;= \frac{A_0+1}{\frac{1}{\omega_{p1}} +
\frac{1}{\omega_{p2}}+\frac{A_0}{\omega_{z}}} \\
&amp;=  \frac{(A_0+1)\omega_{p1} \omega_{p2}}{\omega_{p1} + \omega_{p2}
+ \frac{A_0}{\omega_z}\omega_{p1} \omega_{p2}} \\
\omega_{pB} &amp;= \omega_{p1} + \omega_{p2} +
\frac{A_0}{\omega_z}\omega_{p1} \omega_{p2}
\end{align}\]</span></p>
<hr />
<p><strong>Assuming</strong> <span class="math inline">\(\omega_z \simeq
\omega_{p2}\)</span> and <span class="math inline">\(\omega_{p2}\ll
(1+A_0)\omega_{p1}\)</span> <span class="math display">\[
\omega_{pA} = \omega_{p2}
\]</span> and <span class="math display">\[
\omega_{pB} = (1+A_0)\omega_{p1}
\]</span> The closed-loop transfer function is <span
class="math display">\[
H_{closed}(s) =
\frac{\frac{A_0}{A_0+1}\left(1+\frac{s}{\omega_z}\right)}{\left(1+\frac{s}{(1+A_0)\omega_{p1}}\right)\left(
1+\frac{s}{\omega_{p2}} \right)}
\]</span></p>
<hr />
<p>The step response of the closed-loop amplifier</p>
<p>Consider the Laplace transform function of step response, <span
class="math inline">\(X(s)=\frac{1}{s}\)</span> <span
class="math display">\[
Y(s)=\frac{1}{s}\times H_{closed}(s)
\]</span> Thus, the <strong>small-signal step response</strong> of the
closed-loop amplifier is <span class="math display">\[
y(t)=\frac{A_0}{A_0+1}\left[1-e^{-(A_0+1)\omega_{p1}t}-\left(1-\frac{\omega_{p2}}{\omega_z}\right)e^{-\omega_{p2}t}
\right]u(t)
\]</span> Since, <span class="math inline">\(\omega_{p2}\ll
(1+A_0)\omega_{p1}\)</span>. Therefore, rewrite the <span
class="math inline">\(y(t)\)</span> <span class="math display">\[
y(t)\cong
\frac{A_0}{A_0+1}\left[1-\left(1-\frac{\omega_{p2}}{\omega_z}\right)e^{-\omega_{p2}t}
\right]u(t)
\]</span> The step response contains an exponential term of the form
<span
class="math inline">\(\left(1-\frac{\omega_{p2}}{\omega_z}\right)e^{-\omega_{p2}t}\)</span>.
This is an important result, indicating that if the zero does not
exactly cancel the pole, the step response exhibits an exponential with
an amplitude proportional to <span
class="math inline">\(\left(1-\frac{\omega_{p2}}{\omega_z}\right)\)</span>,
which depends on the mismatch between <span
class="math inline">\(\omega_z\)</span> and <span
class="math inline">\(\omega_{p2}\)</span> and a time constant <span
class="math inline">\(\tau\)</span> of <span
class="math inline">\(\frac{1}{\omega_{p2}}\)</span> or <span
class="math inline">\(\frac{1}{\omega_{z}}\)</span></p>
<h3 id="perfect-pole-zero-cancellation">perfect pole-zero
cancellation</h3>
<p><span class="math display">\[\begin{align}
y(t)
&amp;=\frac{A_0}{A_0+1}\left[1-e^{-(A_0+1)\omega_{p1}t}-\left(1-\frac{\omega_{p2}}{\omega_z}\right)e^{-\omega_{p2}t}
\right]u(t) \\
&amp;= \frac{A_0}{A_0+1}\left[1-e^{-(A_0+1)\omega_{p1}t}\right]u(t)
\end{align}\]</span></p>
<hr />
<p><img src="/2022/12/14/doublet/image-20230108233523345.png"
alt="image-20230108233523345" /></p>
<p><img src="/2022/12/14/doublet/image-20230108234123707.png"
alt="image-20230108234123707" /></p>
<blockquote>
<p>The zero comes from the mirror node</p>
<p>Thanks to unity gain buffer, zero is alleviated for <span
class="math inline">\(C_c\)</span></p>
</blockquote>
<h3 id="reference">reference</h3>
<p>Elad Alon, Lecture 10: Settling-Limited Amplifier Design Methodology,
EE 240B – Spring 2018, Advanced Analog Integrated Circuits <a
target="_blank" rel="noopener" href="https://inst.eecs.berkeley.edu/~ee240b/sp18/lectures/Lecture10_Settling_Design_2up.pdf">https://inst.eecs.berkeley.edu/~ee240b/sp18/lectures/Lecture10_Settling_Design_2up.pdf</a></p>
<p>Eric Chang, Prof. Elad Alon EE240B HW3 <a
target="_blank" rel="noopener" href="https://inst.eecs.berkeley.edu/~ee240b/sp18/homeworks/hw3.pdf">https://inst.eecs.berkeley.edu/~ee240b/sp18/homeworks/hw3.pdf</a>
and <a
target="_blank" rel="noopener" href="https://inst.eecs.berkeley.edu/~ee240b/sp18/homeworks/hw3_soln.pdf">https://inst.eecs.berkeley.edu/~ee240b/sp18/homeworks/hw3_soln.pdf</a></p>
<p>Prof. Tai-Haur Kuo, Analog IC Design ( 類比積體電路設計 ),
Operational Amplifiers <a
target="_blank" rel="noopener" href="http://msic.ee.ncku.edu.tw/course/aic/201809/chapter5.pdf">http://msic.ee.ncku.edu.tw/course/aic/201809/chapter5.pdf</a></p>
<p>B. Y. T. Kamath, R. G. Meyer and P. R. Gray, "Relationship between
frequency response and settling time of operational amplifiers," in IEEE
Journal of Solid-State Circuits, vol. 9, no. 6, pp. 347-352, Dec. 1974,
doi: 10.1109/JSSC.1974.1050527.</p>
<p>B. Y. T. Kamath, R. G. Meyer and P. R. Gray, "Relationship between
frequency response and settling time of operational amplifiers," in IEEE
Journal of Solid-State Circuits, vol. 9, no. 6, pp. 347-352, Dec. 1974,
doi: 10.1109/JSSC.1974.1050527.</p>
<p>P. R. Gray and R. G. Meyer, "MOS operational amplifier design-a
tutorial overview," in IEEE Journal of Solid-State Circuits, vol. 17,
no. 6, pp. 969-982, Dec. 1982, doi: 10.1109/JSSC.1982.1051851.</p>
<p>SERGIO FRANCO, Demystifying pole-zero doublets URL:<a
target="_blank" rel="noopener" href="https://www.edn.com/demystifying-pole-zero-doublets/">https://www.edn.com/demystifying-pole-zero-doublets/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Guo</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.1/dist/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.3.0/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>






  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
